<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>tså¿«é€Ÿä¸Šæ‰‹</title>
      <link href="/post/a6577751.html"/>
      <url>/post/a6577751.html</url>
      
        <content type="html"><![CDATA[<h1 id="TypeScriptå…¥é—¨"><a href="#TypeScriptå…¥é—¨" class="headerlink" title="TypeScriptå…¥é—¨"></a>TypeScriptå…¥é—¨</h1><p>å†…å®¹</p><p>å‚è€ƒé“¾æ¥</p><p>TypeScriptï¼ˆé›¶ï¼‰ â€”â€” ç®€ä»‹ã€ç¯å¢ƒæ­å»ºã€ç¬¬ä¸€ä¸ªå®ä¾‹</p><p><a href="https://zahuopu.blog.csdn.net/article/details/126000138">æ­å»ºå¼€å‘ç¯å¢ƒ</a></p><hr><h3 id="æ–‡ç« ç›®å½•"><a href="#æ–‡ç« ç›®å½•" class="headerlink" title="æ–‡ç« ç›®å½•"></a>æ–‡ç« ç›®å½•</h3><ul><li><a href="#typescript%E5%85%A5%E9%97%A8">TypeScriptå…¥é—¨</a><ul><li><a href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">æ–‡ç« ç›®å½•</a></li><li><a href="#%E8%AE%A4%E8%AF%86-typescript">è®¤è¯† TypeScript</a></li><li><a href="#typescript-%E5%B7%A5%E4%BD%9C%E6%B5%81">TypeScript å·¥ä½œæµ</a></li><li><a href="#typescript-%E7%9A%84%E7%B1%BB%E5%9E%8B">TypeScript çš„ç±»å‹</a><ul><li><a href="#number-%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B">Number æ•°å­—ç±»å‹</a></li><li><a href="#string-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B">String å­—ç¬¦ä¸²ç±»å‹</a></li><li><a href="#boolean-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B">Boolean å¸ƒå°”ç±»å‹</a></li><li><a href="#array-%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B">Array æ•°ç»„ç±»å‹</a></li><li><a href="#tuple-%E5%85%83%E7%BB%84%E7%B1%BB%E5%9E%8B">Tuple å…ƒç»„ç±»å‹</a></li><li><a href="#union-%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B">Union è”åˆç±»å‹</a></li><li><a href="#literal-%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B">Literal å­—é¢é‡ç±»å‹</a></li><li><a href="#enum-%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B">Enum æšä¸¾ç±»å‹</a></li><li><a href="#any-%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B">Any ä»»æ„ç±»å‹</a></li><li><a href="#unknown-%E6%9C%AA%E7%9F%A5%E7%B1%BB%E5%9E%8B">unknown æœªçŸ¥ç±»å‹</a></li><li><a href="#voidundefinednever-%E7%B1%BB%E5%9E%8B">voidã€undefinedã€never ç±»å‹</a></li><li><a href="#type-assertions-%E7%B1%BB%E5%9E%8B%E9%80%82%E9%85%8D">Type Assertions ç±»å‹é€‚é…</a></li></ul></li><li><a href="#%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93">æœ¬ç« å°ç»“</a></li></ul></li></ul><hr><h2 id="è®¤è¯†-TypeScript"><a href="#è®¤è¯†-TypeScript" class="headerlink" title="è®¤è¯† TypeScript"></a>è®¤è¯† TypeScript</h2><p>TypeScript ç®€ä»‹</p><blockquote><p>TypeScript æ˜¯å¾®è½¯å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„ç¼–ç¨‹è¯­è¨€ï¼Œé€šè¿‡åœ¨ JavaScript çš„åŸºç¡€ä¸Šæ·»åŠ é™æ€ç±»å‹å®šä¹‰æ„å»ºè€Œæˆã€‚</p></blockquote><p>TypeScript çš„ä½œç”¨</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ<strong>JavaScript æ˜¯å¼±ç±»å‹çš„è¯­è¨€</strong>ï¼Œå¯¹äºä¸€äº›ç±»å‹çš„é™åˆ¶å¹¶ä¸æ˜¯å¾ˆæ˜ç¡®ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬ç¼–ç ä¸€ä¸ªåœ¨ä¸¤ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥æ•°å­—æ±‚å’Œçš„åŠ æ³•å°ç¨‹åºï¼Œè¿™æ—¶å€™ç›´æ¥è¾“å…¥åˆ°æ–‡æœ¬æ¡†çš„æ•°å­—ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œå°±ä¼šå¾—åˆ° 1 + 1 &#x3D; 11 çš„å¥‡æ€ªç»“æœã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ TypeScript å°±å¯ä»¥å¤§æ˜¾èº«æ‰‹ï¼Œå®ç° 1 + 1 &#x3D; 2ã€‚</p><blockquote><p>a. è§„èŒƒæˆ‘ä»¬çš„ä»£ç <br>b. ä»£ç ç¼–è¯‘é˜¶æ®µå°±èƒ½åŠæ—¶å‘ç°é—®é¢˜<br>c. åœ¨åŸç”ŸJSåŸºç¡€ä¸ŠåŠ ä¸Šäº†ä¸€å±‚ç±»å‹å®šä¹‰</p></blockquote><h2 id="TypeScript-å·¥ä½œæµ"><a href="#TypeScript-å·¥ä½œæµ" class="headerlink" title="TypeScript å·¥ä½œæµ"></a>TypeScript å·¥ä½œæµ</h2><p>TSC ï¼ˆæŠŠ ts æ–‡ä»¶è½¬æ¢ä¸º js æ–‡ä»¶ï¼‰çš„ä½œç”¨ç›¸å½“äº Babelï¼ˆæŠŠé«˜çº§è¯­æ³•å’Œä»£ç è½¬æ¢ä¸ºæµè§ˆå™¨èƒ½è¯†åˆ«çš„ä½çº§è¯­æ³•å’Œä»£ç ï¼‰ã€‚</p><p>ç¼–è¯‘å’Œè¿è¡Œå‚è€ƒ <a href="https://zahuopu.blog.csdn.net/article/details/126000138">TypeScriptï¼ˆé›¶ï¼‰ â€”â€” ç®€ä»‹ã€ç¯å¢ƒæ­å»ºã€ç¬¬ä¸€ä¸ªå®ä¾‹</a></p><p><img src="https://img-blog.csdnimg.cn/5b7d7d1921454fa2aeaf81206a9090d5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ä¸Šå›¾è¡¨ç¤ºï¼šts æ–‡ä»¶é€šè¿‡ tsc å‘½ä»¤æŠŠ ts æ–‡ä»¶è½¬æˆäº† js æ–‡ä»¶ã€‚</p><h2 id="TypeScript-çš„ç±»å‹"><a href="#TypeScript-çš„ç±»å‹" class="headerlink" title="TypeScript çš„ç±»å‹"></a>TypeScript çš„ç±»å‹</h2><p>ç›¸æ¯”äº JavaScript çš„åŸå§‹ç±»å‹ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ï¼‰å’Œå¯¹è±¡ç±»å‹ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹ï¼‰ï¼ŒTypeScript ä¹Ÿæœ‰è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>åŸºæœ¬ç±»å‹ï¼šbooleanã€stringã€numberã€arrayã€tupleã€enumã€nullã€undefinedã€objectã€voidã€neverã€any</p></blockquote><blockquote><p>é«˜çº§ç±»å‹ï¼šunion ç»„åˆç±»å‹ã€Nullable å¯ç©ºç±»å‹ã€Literal é¢„å®šä¹‰ç±»å‹</p></blockquote><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹ä¸åŒç±»å‹è¿›è¡Œé€ä¸€è¯¦ç»†çš„æ¢ç´¢â€¦</p><h3 id="Number-æ•°å­—ç±»å‹"><a href="#Number-æ•°å­—ç±»å‹" class="headerlink" title="Number æ•°å­—ç±»å‹"></a>Number æ•°å­—ç±»å‹</h3><p>å¯¹æ•°å­—çš„å®šä¹‰åªæœ‰ä¸€ä¸ªç¬¼ç»Ÿçš„ Number è¡¨ç¤ºï¼Œæ—¢èƒ½è¡¨ç¤º <strong>æ•´æ•°</strong>ã€ä¹Ÿèƒ½è¡¨ç¤º <strong>æµ®ç‚¹æ•°</strong>ï¼Œç”šè‡³ä¹Ÿå¯ä»¥è¡¨ç¤º <strong>æ­£è´Ÿæ•°</strong>ã€‚ä¾‹å¦‚ï¼š1ï¼Œ3.3ï¼Œ-5 ç­‰ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num1 = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> num2 = <span class="number">6</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">n1: number, n2: number</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(num1, num2))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºç»“æœ <code>8</code>ã€‚</p><h3 id="String-å­—ç¬¦ä¸²ç±»å‹"><a href="#String-å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="String å­—ç¬¦ä¸²ç±»å‹"></a>String å­—ç¬¦ä¸²ç±»å‹</h3><p>ä¸ JavaScript ä¹¦å†™æ–¹å¼åŠä½¿ç”¨æ–¹æ³•å‡ä¸€è‡´ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;å‰ç«¯æ‚è´§é“º&#x27;</span></span><br><span class="line"><span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span></span><br><span class="line"><span class="string">`å‰ç«¯æ‚è´§é“º`</span></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">let</span> <span class="attr">myName</span>: string = <span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;myName&#x27;</span>, myName)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“æœã€‚</p><p><img src="https://img-blog.csdnimg.cn/4e8e97379f16492ca3b37672937d8130.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="Boolean-å¸ƒå°”ç±»å‹"><a href="#Boolean-å¸ƒå°”ç±»å‹" class="headerlink" title="Boolean å¸ƒå°”ç±»å‹"></a>Boolean å¸ƒå°”ç±»å‹</h3><p>è¡¨ç¤ºçœŸã€å‡ï¼Œå¸¸ç”¨äºå¤„ç†åˆ¤æ–­é€»è¾‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">isTrue</span>: boolean = <span class="literal">true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isTure&#x27;</span>, isTrue)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“æœã€‚</p><p><img src="https://img-blog.csdnimg.cn/9b4c81d6c5cb4658b60a8da5aa07786b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="Array-æ•°ç»„ç±»å‹"><a href="#Array-æ•°ç»„ç±»å‹" class="headerlink" title="Array æ•°ç»„ç±»å‹"></a>Array æ•°ç»„ç±»å‹</h3><p>æ•°ç»„ä¸­å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„æ•°æ®ï¼ŒJSä¸­æ•°ç»„çš„å®½å®¹åº¦éå¸¸å¤§ï¼ŒTSä¹Ÿç»§æ‰¿äº†è¿™ä¸€ç‚¹ã€‚</p><p>ä»¥ä¸‹ä¸‰ç§å†™æ³•ï¼ˆlist1ã€list2ã€list3ï¼‰è¡¨ç¤ºçš„å®Œå…¨ä¸€è‡´ï¼Œé¼ æ ‡ç§»åŠ¨è‡³ list ä¸Šç¼–è¯‘å™¨å‡æç¤º <code>number[]</code>ï¼Œè¡¨ç¤ºæ•°å­—ç±»å‹ã€‚</p><p><img src="https://img-blog.csdnimg.cn/18dd86617db740168e576f87dfc863f4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">list1</span>: number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">list2</span>: <span class="title class_">Array</span>&lt;number&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> list3 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„ list 4 ä¸º (string | number)[]ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹ã€‚</p><p><img src="https://img-blog.csdnimg.cn/ace86d03b03b438bae260d34bf7b6344.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list4 = [<span class="number">1</span>, <span class="string">&#x27;å‰ç«¯æ‚è´§é“º&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„ list 5 ä¸º any[]ï¼Œè¡¨ç¤ºä»»æ„ç±»å‹ã€‚</p><p><img src="https://img-blog.csdnimg.cn/a0d3a352b9894d1789d55fdf1bb36ac3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">list5</span>: any[] = [<span class="number">1</span>, <span class="string">&#x27;å‰ç«¯æ‚è´§é“º&#x27;</span>, <span class="literal">true</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Tuple-å…ƒç»„ç±»å‹"><a href="#Tuple-å…ƒç»„ç±»å‹" class="headerlink" title="Tuple å…ƒç»„ç±»å‹"></a>Tuple å…ƒç»„ç±»å‹</h3><p>å›ºå®šé•¿åº¦ï¼Œå›ºå®šç±»å‹çš„ Arrayï¼Œå£°æ˜å…ƒç»„çš„æ—¶å€™ä¸€å®šè¦äº‹å…ˆæŒ‡å®šç±»å‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: [number, string] = [<span class="number">1</span>, <span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå…ƒç»„çš„é•¿åº¦å’Œç±»å‹éƒ½è¢«å›ºå®šä½äº†ï¼Œå½“æˆ‘ä»¬å°è¯•ä¿®æ”¹å…ƒç´ çš„é•¿åº¦å’Œç±»å‹éƒ½ä¼šæŠ¥é”™ã€‚</p><p><img src="https://img-blog.csdnimg.cn/329278ba86ec45428d1b5d39f8123a5c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ³¨ï¼šå…ƒç»„ç±»å‹æœ‰ä¸€ä¸ª Bugï¼Œå¯ä»¥è°ƒç”¨ push() æ–¹æ³•æ”¹å˜å…ƒç»„çš„é•¿åº¦ã€‚</strong></p><h3 id="Union-è”åˆç±»å‹"><a href="#Union-è”åˆç±»å‹" class="headerlink" title="Union è”åˆç±»å‹"></a>Union è”åˆç±»å‹</h3><p>è”åˆç±»å‹è¡¨ç¤ºä¸€ä¸ªå˜é‡åŒæ—¶æ”¯æŒä¸¤ä¸ªæˆ–è€…å¤šä¸ªä¸åŒçš„ç±»å‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> union : string | number</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/d46e7e59a60549f68f3a33b22ca98fbf.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="Literal-å­—é¢é‡ç±»å‹"><a href="#Literal-å­—é¢é‡ç±»å‹" class="headerlink" title="Literal å­—é¢é‡ç±»å‹"></a>Literal å­—é¢é‡ç±»å‹</h3><p>å¯ä»¥æ··åˆä½¿ç”¨ä¸åŒçš„ç±»å‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> literal : <span class="number">1</span> | <span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span> | <span class="literal">true</span> | [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šmerge æ±‚å’Œï¼ˆåˆ†ä¸ºæ•°å­—å’Œå­—ç¬¦ä¸²ä¸¤ç§æ–¹å¼ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">n1: number | string, n2: number | string, resultType: <span class="string">&quot;as-number&quot;</span> | <span class="string">&quot;as-string&quot;</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (resultType === <span class="string">&#x27;as-string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n1.<span class="title function_">toString</span>() + n2.<span class="title function_">toString</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> n1 === <span class="string">&quot;string&quot;</span> || <span class="keyword">typeof</span> n2 === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n1.<span class="title function_">toString</span>() + n2.<span class="title function_">toString</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n1 + n2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mergeNumber1 = <span class="title function_">merge</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;as-number&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> mergeNumber2 = <span class="title function_">merge</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;as-string&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> mergeString = <span class="title function_">merge</span>(<span class="string">&quot;å‰ç«¯&quot;</span>, <span class="string">&quot;æ‚è´§é“º&quot;</span>, <span class="string">&quot;as-string&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergeNumber1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergeNumber2)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergeString)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“æœã€‚</p><p><img src="https://img-blog.csdnimg.cn/adfbfc44f3d2458190412282763ed30b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="Enum-æšä¸¾ç±»å‹"><a href="#Enum-æšä¸¾ç±»å‹" class="headerlink" title="Enum æšä¸¾ç±»å‹"></a>Enum æšä¸¾ç±»å‹</h3><p>æšä¸¾å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ç»„å‘½åçš„å¸¸é‡ã€‚<strong>é»˜è®¤æƒ…å†µä¸‹</strong>ï¼Œæˆ‘ä»¬è·å–åˆ°å¯¹è±¡çš„æŸä¸ªå±æ€§æ‰“å°å‡ºæ¥çš„æ˜¯è¯¥å±æ€§çš„<strong>ç´¢å¼•</strong>ï¼Œç¥å¥‡çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ <strong>ç»™å¯¹è±¡é‡Œé¢çš„å±æ€§èµ‹å€¼</strong>ï¼Œè¿™æ—¶å€™å†è·å–åˆ°å¯¹è±¡çš„æŸä¸ªå±æ€§æ—¶æ‰“å°å‡ºæ¥çš„å°±æ˜¯ <strong>æˆ‘ä»¬ç»™å±æ€§èµ‹çš„å€¼</strong> äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">enum <span class="title class_">Color</span> &#123;</span><br><span class="line">    red,</span><br><span class="line">    yellow = <span class="string">&#x27;é»„è‰²&#x27;</span>,</span><br><span class="line">    blue = <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> color1 = <span class="title class_">Color</span>.<span class="property">red</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color1)</span><br><span class="line"><span class="keyword">let</span> color2 = <span class="title class_">Color</span>.<span class="property">blue</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color2)</span><br><span class="line"><span class="keyword">let</span> color3 = <span class="title class_">Color</span>.<span class="property">yellow</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color3)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“æœã€‚</p><p><img src="https://img-blog.csdnimg.cn/0ebba57921864bd1a30ce4a6a674c367.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="Any-ä»»æ„ç±»å‹"><a href="#Any-ä»»æ„ç±»å‹" class="headerlink" title="Any ä»»æ„ç±»å‹"></a>Any ä»»æ„ç±»å‹</h3><p>Any è¿™ä¸ªç±»å‹å¯ä»¥è®©æˆ‘ä»¬éšæ„å®šä¹‰ç±»å‹ï¼Œå½“æˆ‘ä»¬â€œæ‡’å¾—â€å®šä¹‰å¤æ‚ç±»å‹ç»“æ„çš„æ—¶å€™ï¼Œå¯ä»¥åˆç†çš„ä½¿ç”¨å®ƒã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">randomValue</span>: any = <span class="number">123</span></span><br><span class="line">randomValue = <span class="literal">true</span></span><br><span class="line">randomValue = <span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span></span><br><span class="line">randomValue = &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="unknown-æœªçŸ¥ç±»å‹"><a href="#unknown-æœªçŸ¥ç±»å‹" class="headerlink" title="unknown æœªçŸ¥ç±»å‹"></a>unknown æœªçŸ¥ç±»å‹</h3><p>unknown ä¸ä¿è¯ç±»å‹ï¼Œä½† <strong>å¯ä»¥ä¿è¯ç±»å‹å®‰å…¨</strong>ï¼Œå½“æˆ‘ä»¬å‡ºç°é”™è¯¯ç¼–ç æ—¶ï¼ˆä¸‹é¢çš„æ•°å­— 123 ä¸èƒ½è°ƒç”¨ toUpperCase() æ–¹æ³•ï¼‰ï¼Œä½¿ç”¨ unknow ç¼–è¯‘å™¨ä¼šæœ‰æŠ¥é”™æç¤ºã€‚</p><p><img src="https://img-blog.csdnimg.cn/791317f9ddcd48648bdd1eb99c7f65fa.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æˆ‘ä»¬å¯ä»¥åšå‡ºä»¥ä¸‹é€‚é…ï¼Œè®©ç¼–è¯‘å™¨ä¸æŠ¥é”™ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">randomValue</span>: unknown = <span class="number">123</span></span><br><span class="line">randomValue = <span class="literal">true</span></span><br><span class="line">randomValue = <span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span></span><br><span class="line">randomValue = &#123;&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> randomValue === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">randomValue</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> randomValue === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    randomValue.<span class="title function_">toUpperCase</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="voidã€undefinedã€never-ç±»å‹"><a href="#voidã€undefinedã€never-ç±»å‹" class="headerlink" title="voidã€undefinedã€never ç±»å‹"></a>voidã€undefinedã€never ç±»å‹</h3><p>ä¸å­˜åœ¨æ—¶ç”¨ voidï¼Œundefined è¡¨ç¤ºå¿…é¡»å­˜åœ¨ä½†å¯ä»¥ä¸èµ‹å€¼ï¼Œæ°¸è¿œä¸ä¼šæ‰§è¡Œå®Œæ—¶ç”¨ neverã€‚</p><p>æ­¤æ—¶ä½¿ç”¨äº† voidï¼ˆé»˜è®¤å°±æ˜¯ voidï¼Œå¯åŠ å¯ä¸åŠ ï¼‰ï¼Œä¸æ·»åŠ è¿”å›å€¼ä¹Ÿä¸€åˆ‡æ­£å¸¸ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printResult</span>(<span class="params"></span>) : <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>, <span class="title function_">printResult</span>())</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“æœã€‚</p><p><img src="https://img-blog.csdnimg.cn/bc75f30833de483c81778c84a7eb3669.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æ­¤æ—¶ä½¿ç”¨äº† undefinedï¼Œå‡½æ•°ä½“é‡Œé¢å¿…é¡»æœ‰è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä½“å†…æ·»åŠ  returnï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printResult</span>(<span class="params"></span>) : <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>, <span class="title function_">printResult</span>())</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åç»ˆç«¯æ‰§è¡Œ <code>tsc main.ts</code> å’Œ <code>node main.js</code>ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“æœã€‚</p><p><img src="https://img-blog.csdnimg.cn/bc75f30833de483c81778c84a7eb3669.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æ­¤æ—¶ä½¿ç”¨äº† neverï¼Œä¸€èˆ¬ç”¨åœ¨æŠ›å‡ºå¼‚å¸¸æˆ–è€… promise ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throwError</span>(<span class="params">message: string, errorCode: number</span>): never &#123;</span><br><span class="line">    <span class="keyword">throw</span> &#123;</span><br><span class="line">        message,</span><br><span class="line">        errorCode</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">throwError</span>(<span class="string">&quot;not found&quot;</span>, <span class="number">404</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">whileLoop</span>(<span class="params"></span>): never &#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Type-Assertions-ç±»å‹é€‚é…"><a href="#Type-Assertions-ç±»å‹é€‚é…" class="headerlink" title="Type Assertions ç±»å‹é€‚é…"></a>Type Assertions ç±»å‹é€‚é…</h3><p>ç¬¬ä¸€ä¸ª endsWith() å‡ºç°çš„åœ°æ–¹ç¼–è¯‘å™¨æ˜¯ä¸ä¼šè‡ªåŠ¨æç¤ºè¡¥å…¨çš„ï¼Œå› ä¸ºæ­¤æ—¶çš„ç±»å‹è¿˜æ˜¯ anyï¼Œè€Œä¸æ˜¯ stringï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ endsWith() åœ¨ä¸‹é¢ä»£ç ä¸­ç¬¬äºŒæ¬¡å’Œç¬¬ä¸‰æ¬¡å‡ºç°çš„åœ°æ–¹çš„æ–¹å¼è¿›è¡Œç±»å‹é€‚é…ï¼Œä¾¿å¯ä»¥å®ç°è‡ªåŠ¨è¡¥å…¨ï¼ˆåœ¨æˆ‘ä»¬åˆšå¼€å§‹ä¸æ˜ç¡®ç±»å‹ï¼Œè€Œåé¢æ˜ç¡®ç±»å‹åå°±å¯ä»¥ä½¿ç”¨è¿™ç§ç±»å‹é€‚é…çš„æ–¹å¼ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message : any</span><br><span class="line">message = <span class="string">&quot;å‰ç«¯æ‚è´§é“º&quot;</span></span><br><span class="line">message.<span class="title function_">endsWith</span>(<span class="string">&quot;é“º&quot;</span>)</span><br><span class="line"></span><br><span class="line">(&lt;string&gt;message).<span class="title function_">endsWith</span>(<span class="string">&quot;é“º&quot;</span>)</span><br><span class="line">(message <span class="keyword">as</span> string).<span class="title function_">endsWith</span>(<span class="string">&quot;é“º&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h2><p>å­˜åœ¨å³åˆç†ï¼ŒTypeScript çš„å‡ºç°è‡ªæœ‰å®ƒçš„ç”¨é€”ã€‚TypeScript ä½œä¸º JavaScript çš„è¶…é›†ï¼Œå¯¹ JavaScript è¿›è¡Œäº†ä¸€äº›åˆ—çº¦æŸï¼Œä½¿å¾—å¼±ç±»å‹çš„ JavaScript å˜æˆå¼ºç±»å‹ï¼Œè¿™å°±ä¼šä½¿å¾—ä»£ç æ›´æ¸…æ™°ã€å¯è¯»æ€§æ›´é«˜ã€æé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ›´é€‚åˆå¼€å‘å¤§å‹åº”ç”¨ã€‚</p><p>ç»“åˆ Vue3 å¯¹ TypeScript æ›´å¥½çš„åŒ…å®¹æ€§ï¼Œä½¿ç”¨ Vue3 + TS æ„å»ºå¤§ã€ä¸­ã€å°å‹åº”ç”¨ä¾¿æˆäº†ä¸€ç§å¤§è¶‹åŠ¿â€¦</p><hr><blockquote><p>å‚è€ƒèµ„æ–™ï¼š</p><ol><li>TypeScript ç™¾åº¦ç™¾ç§‘</li><li>TypeScript å…¥é—¨è®²è§£ ã€ä½œè€…ï¼šé˜¿è±å…‹æ–¯åˆ˜ã€‘</li></ol></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>fetchå’Œajaxçš„åŒºåˆ«</title>
      <link href="/post/692db637.html"/>
      <url>/post/692db637.html</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸€ã€å†™åœ¨å‰é¢</strong><br>ä»Šå¤©æ€»ç»“ä¸€ä¸‹<code>fetch</code>å’Œ<code>ajax</code>çš„åŒºåˆ«ã€‚<br><strong>äºŒã€Ajax</strong><br><code>ajax</code>çš„æœ¬è´¨å°±æ˜¯ä½¿ç”¨<code>XMLHttpRequest</code>å¯¹è±¡æ¥è¯·æ±‚æ•°æ®ï¼Œä¸‹é¢æ˜¯ç®€å•çš„åŸç”Ÿjså®ç°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ajax</span>(<span class="params">url, fnSucc, fnFaild</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//1.åˆ›å»ºAjaxå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>)&#123;</span><br><span class="line">       <span class="keyword">var</span> oAjax=<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> oAjax=<span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.è¿æ¥æœåŠ¡å™¨ï¼ˆæ‰“å¼€å’ŒæœåŠ¡å™¨çš„è¿æ¥ï¼‰</span></span><br><span class="line">    oAjax.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.å‘é€</span></span><br><span class="line">    oAjax.<span class="title function_">send</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.æ¥æ”¶</span></span><br><span class="line">    oAjax.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">if</span>(oAjax.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span><br><span class="line">           <span class="keyword">if</span>(oAjax.<span class="property">status</span>==<span class="number">200</span>)&#123;</span><br><span class="line">              <span class="comment">//alert(&#x27;æˆåŠŸäº†ï¼š&#x27;+oAjax.responseText);</span></span><br><span class="line">              <span class="title function_">fnSucc</span>(oAjax.<span class="property">responseText</span>);</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="comment">//alert(&#x27;å¤±è´¥äº†&#x27;);</span></span><br><span class="line">              <span class="keyword">if</span>(fnFaild)&#123;</span><br><span class="line">                  <span class="title function_">fnFaild</span>();</span><br><span class="line">              &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¸‰ã€fetch</strong><br><code>fetch</code>æ˜¯å…¨å±€é‡<code>window</code>çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æœ‰ï¼š<br><code>1ã€ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯URL</code>.<br><code>2ã€ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰å‚æ•°ï¼Œå¯ä»¥æ§åˆ¶ä¸åŒçš„é…ç½®çš„initå¯¹è±¡ã€‚</code><br><code>3ã€ä½¿ç”¨äº†JavaScript Promisesæ¥å¤„ç†ç»“æœ/å›è°ƒã€‚</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;http://123.207.32.32:8000/home/multidata&#x27;</span>).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">      <span class="keyword">return</span> response.<span class="title function_">json</span>()</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">returnedValue</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(returnedValue)</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å››ã€fetchå’Œajaxä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ä¸åŒ</strong><br><code>4.1ã€</code>ä»<code>fetch()</code>è¿”å›çš„<code>Promise</code>å°†ä¸ä¼šæ‹’ç»<code>http</code>é”™è¯¯çŠ¶æ€ï¼Œå³ä½¿ç›¸åº”æ˜¯ä¸€ä¸ªç›¸åº”æ˜¯<code>400</code>æˆ–è€…<code>500</code>,å®ƒéƒ½ä¼šå®‰è£…æ­£å¸¸çš„å»è§£å†³ï¼Œå¹¶ä¸”ä»…åœ¨ç½‘ç»œæ•…éšœæ—¶æˆ–è€…ä»»ä½•é˜»æ­¢è¯·æ±‚å®Œæˆæ—¶ï¼Œå®ƒæ‰ä¼šæ‹’ç»ï¼Œå¯ä»¥åšç®€å•çš„å°è£…ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkStatus</span>(<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (response.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; response.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(response.<span class="property">statusText</span>)</span><br><span class="line">    error.<span class="property">response</span> = response</span><br><span class="line">    <span class="keyword">throw</span> error</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">parseJSON</span>(<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/users&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(checkStatus)</span><br><span class="line">  .<span class="title function_">then</span>(parseJSON)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;request succeeded with JSON response&#x27;</span>, data)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;request failed&#x27;</span>, error)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>4.2ã€</code>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>fetch</code>åœ¨ä¸ä¼šæ¥å—å’Œå‘é€<code>cookie</code>ï¼Œå¦‚æœéœ€è¦å‘é€<code>cookie</code>çš„è¯ï¼Œæ­¤æ—¶éœ€è¦å¯¹å…¶å•ç‹¬è¿›è¡Œé…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, &#123;</span><br><span class="line"><span class="attr">credentials</span>: <span class="string">&#x27;same-origin&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>same-origin</code>å€¼ä½¿å¾—<code>fetch</code>å¤„ç†<code>cookie</code>ä¸<code>XMLHTTPRequest</code>ç±»ä¼¼ã€‚å¦åˆ™ï¼Œ<code>cookie</code>å°†ä¸ä¼šè¢«å‘é€ï¼Œå¯¼è‡´è¿™äº›è¯·æ±‚ä¸ä¿ç•™è®¤è¯ä¼šè¯ã€‚<br>å¯¹äº<code>cors</code>è¯·æ±‚ï¼Œä½¿ç”¨<code>include</code>å€¼å…è®¸å°†å‡­è¯å‘é€åˆ°å…¶ä»–åŸŸã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, &#123;</span><br><span class="line"><span class="attr">credentials</span>:<span class="string">&#x27;include&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h4 id="fetchçš„-poståŸºæœ¬è¯­æ³•"><a href="#fetchçš„-poståŸºæœ¬è¯­æ³•" class="headerlink" title="fetchçš„ poståŸºæœ¬è¯­æ³•"></a>fetchçš„ poståŸºæœ¬è¯­æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;è¯·æ±‚åœ°å€&quot;</span>,&#123;</span><br><span class="line">   <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">   <span class="attr">headers</span>: &#123;</span><br><span class="line"> <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">  <span class="string">&quot;Authorization&quot;</span>: <span class="string">&quot;Bearer ç”¨æˆ·çš„token&quot;</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">body</span>: <span class="string">&quot;è¯·æ±‚å‚æ•°&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(*res* =&gt; res.<span class="title function_">json</span>()).<span class="title function_">then</span>(*data*=&gt;&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">*err*</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>consoleçš„å¸¸è§æ–¹æ³•</title>
      <link href="/post/de8f3828.html"/>
      <url>/post/de8f3828.html</url>
      
        <content type="html"><![CDATA[<hr><p>title: consoleå®¶æ—<br>abbrlink: â€˜0â€™</p><hr><h3 id="consoleç³»åˆ—æ–¹æ³•"><a href="#consoleç³»åˆ—æ–¹æ³•" class="headerlink" title="consoleç³»åˆ—æ–¹æ³•"></a>consoleç³»åˆ—æ–¹æ³•</h3><ol><li><p>ä¸‡ç‰©çš†å¯â€”logğŸ§<br>console.log()æ˜¯ä¸€ä¸ªé€šç”¨çš„æ‰“å°æ–¹æ¡ˆï¼Œå¯ä»¥ç”¨å®ƒæ‰“å°ä»»ä½•ä¸œè¥¿ï¼Œä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å°å¯¹è±¡ï¼Œæ•°ç»„è¿™ç±»ä¸œè¥¿ï¼Œè¿™ä¸ªå°±ä¸å¤ªæ–¹ä¾¿ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨</p></li><li><p>å¯¹è±¡æ•°ç»„â€”tableğŸ§<br>console.table()æ˜¯ä¸“é—¨ç”¨æ¥æ‰“å°å¯¹è±¡å’Œæ•°ç»„çš„ï¼Œä»–ä¼šåˆ¶ä½œæˆä¸€ä¸ªè¡¨æ ¼ï¼Œç„¶åå¾ˆæ˜ç¡®çš„å¯ä»¥çœ‹åˆ°é‡Œé¢çš„å€¼</p></li><li><p>è®¡ç®—æ—¶é—´â€”timeå’ŒtimeEndğŸ˜²<br>console.time(ç›¸åŒå)è®°å½•å¼€å§‹æ—¶é—´</p></li></ol><p>console.timeEnd(ç›¸åŒå)è®°å½•ç»“æŸæ—¶é—´</p><ol start="4"><li>çº¢è‰²è­¦å‘Šâ€”errorå’ŒwarnğŸ˜¤<br>console.error()æ‰“å°æŠ¥é”™ä¿¡æ¯</li></ol><p>console.warn()æ‰“å°è­¦å‘Šä¿¡æ¯</p><ol start="5"><li>å…ƒç´ ç»“æ„â€”dirâœŒ<br>console.dir()å¯¹æ‰“å°å¯¹è±¡ç»“æ„éå¸¸æœ‰ç”¨ã€‚</li></ol><p>ä¾‹å¦‚ï¼šconsole.dir(document.body)</p><ol start="6"><li><p>æ‰§è¡Œæ¬¡æ•°â€”countâœŒ<br>console.count()æ‰“å°æ‰§è¡Œçš„æ¬¡æ•°ï¼Œæœ€é•¿å¹¿æ³›åº”ç”¨äºå‡½æ•°å½“ä¸­</p></li><li><p>è¿½è¸ªæ‰§è¡Œæ¬¡æ•°â€”traceğŸ¤<br>æˆ‘ä»¬çŸ¥é“ï¼Œç¨‹åºçš„æ‰§è¡Œæ¬¡åºä¸»è¦æ˜¯ç”±å †æ ˆæ¥æ‰§è¡Œçš„ã€‚ä½¿ç”¨&#x3D;&#x3D;console.trace()&#x3D;&#x3D;å¯ä»¥è¿½è¸ªæ‰§è¡Œçš„é¡ºåºã€‚</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// aå‡½æ•°è°ƒç”¨æ­¤æ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">trace</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// bè°ƒç”¨aå‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">a</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…¨å±€è°ƒç”¨bå‡½æ•°</span></span><br><span class="line"><span class="title function_">b</span>();</span><br><span class="line"></span><br><span class="line">at a (<span class="attr">C</span>:\<span class="title class_">Users</span>\<span class="variable constant_">LENOVO</span>\<span class="title class_">Desktop</span>\æ­£åˆ™è¡¨è¾¾å¼\<span class="number">02</span>-æ­£åˆ™è¡¨è¾¾å¼\<span class="number">04</span>.<span class="property">js</span>:<span class="number">3</span>:<span class="number">13</span>)</span><br><span class="line">at b (<span class="attr">C</span>:\<span class="title class_">Users</span>\<span class="variable constant_">LENOVO</span>\<span class="title class_">Desktop</span>\æ­£åˆ™è¡¨è¾¾å¼\<span class="number">02</span>-æ­£åˆ™è¡¨è¾¾å¼\<span class="number">04</span>.<span class="property">js</span>:<span class="number">7</span>:<span class="number">5</span>)</span><br><span class="line">at <span class="title class_">Object</span>.&lt;anonymous&gt; (<span class="attr">C</span>:\<span class="title class_">Users</span>\<span class="variable constant_">LENOVO</span>\<span class="title class_">Desktop</span>\æ­£åˆ™è¡¨è¾¾å¼\<span class="number">02</span>-æ­£åˆ™è¡¨è¾¾å¼\<span class="number">04</span>.<span class="property">js</span>:<span class="number">10</span>:<span class="number">1</span>) </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºcanvas2då®ç°ç”µå­ç­¾å</title>
      <link href="/post/d3aa27e1.html"/>
      <url>/post/d3aa27e1.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºæ–°ç‰ˆcanvas2då®ç°ç”µå­ç­¾å"><a href="#å¾®ä¿¡å°ç¨‹åºæ–°ç‰ˆcanvas2då®ç°ç”µå­ç­¾å" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºæ–°ç‰ˆcanvas2då®ç°ç”µå­ç­¾å"></a>å¾®ä¿¡å°ç¨‹åºæ–°ç‰ˆcanvas2då®ç°ç”µå­ç­¾å</h1><p><strong>æ•ˆæœ</strong>ï¼š <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0ce14702d9341ab932ce57f544c68a9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><p><strong>ç®€å•è¯´æ˜</strong>ï¼š ç”±äº canvas2D çš„å®ä¾‹éœ€è¦è·å–åˆ° canvas çš„å®¹å™¨å…ƒç´ ï¼Œå› æ­¤æˆ‘ä»¬æœ€æ—©åªèƒ½åœ¨é¡µé¢Â <code>onReady</code>Â ä¸­è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ï¼Œå¦‚æœåœ¨Â <code>onLoad</code>Â æˆ–è€…Â <code>onShow</code>Â ä¸­è°ƒç”¨è¯¥å‡½æ•°ï¼Œåˆ™æ— æ³•è·å–åˆ° canvas å®¹å™¨å…ƒç´ </p><p>è§¦æ‘¸å¼€å§‹çš„æ—¶å€™å’Œæ—§ç‰ˆçš„canvas æ¥å£æ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦Â <code>moveTo</code>Â åˆ°èµ·å§‹ç‚¹</p><p>åœ¨ canvas2D ç»˜åˆ¶çš„æ—¶å€™å’Œæ—§ç‰ˆçš„ canvas ä¸åŒï¼šcanvas2D åªéœ€è¦Â <code>lineTo() &gt; stroke() &gt; moveTo()</code>Â å³å¯ï¼Œä¸éœ€è¦æ˜¾å¼çš„è°ƒç”¨Â <code>draw()</code>Â æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾åŠ¨å›¾ä¸­æ˜¾å¼çš„æ•ˆæœï¼Œè¦ä¸æ—§ç‰ˆçš„ canvas æ›´ä¸ºç»†è…»</p><p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š <strong>wxml</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas <span class="attr">id</span>=<span class="string">&quot;myCanvas&quot;</span> type=<span class="string">&quot;2d&quot;</span> class=<span class="string">&quot;canvas&quot;</span> style=<span class="string">&quot;width:&#123;&#123;width+&#x27;px&#x27;&#125;&#125;;height:&#123;&#123;height+&#x27;px&#x27;&#125;&#125;&quot;</span> catchtouchstart=<span class="string">&quot;catchtouchstart&quot;</span> catchtouchmove=<span class="string">&quot;catchtouchmove&quot;</span> catchtouchend=<span class="string">&quot;catchtouchend&quot;</span>&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;view <span class="attr">class</span>=<span class="string">&quot;btn-reset&quot;</span> catchtap=<span class="string">&quot;clearCanvas&quot;</span>&gt;é‡æ–°ç­¾å&lt;/view&gt;</span><br><span class="line">&lt;view <span class="attr">class</span>=<span class="string">&quot;btn-ok&quot;</span> catchtap=<span class="string">&quot;canvasToImg&quot;</span>&gt;ç¡®è®¤&lt;/view&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>wxss</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">page&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f2f2f2</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">canvas</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myCanvas</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-reset</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">130</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">180</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#4965B3</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4965B3</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">24</span>rpx;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-ok</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">130</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#4965B3</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#4965B3</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">24</span>rpx;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>js</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    canvas:null,</span><br><span class="line">    ctx: null,</span><br><span class="line">    width: 385,</span><br><span class="line">    height: 650,</span><br><span class="line">    drawCount: 0,</span><br><span class="line">    drawState: &quot;init&quot;,</span><br><span class="line">    points:<span class="section">[]</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    initCanvas() &#123;</span><br><span class="line">      wx.nextTick(()=&gt;&#123;</span><br><span class="line">        const <span class="attr">query</span> = wx.createSelectorQuery().in(this)</span><br><span class="line">        query.select(&#x27;<span class="comment">#myCanvas&#x27;)</span></span><br><span class="line">        .fields(&#123; node: true, size: true &#125;)</span><br><span class="line">        .exec((res) =&gt; &#123;</span><br><span class="line">            // Canvas å¯¹è±¡</span><br><span class="line">            const <span class="attr">canvas</span> = res[<span class="number">0</span>].node</span><br><span class="line">            // Canvas ç”»å¸ƒçš„å®é™…ç»˜åˆ¶å®½é«˜</span><br><span class="line">            const <span class="attr">renderWidth</span> = res[<span class="number">0</span>].width</span><br><span class="line">            const <span class="attr">renderHeight</span> = res[<span class="number">0</span>].height</span><br><span class="line">            // Canvas ç»˜åˆ¶ä¸Šä¸‹æ–‡</span><br><span class="line">            const <span class="attr">ctx</span> = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">            <span class="attr">this.data.ctx</span> = ctx</span><br><span class="line">            <span class="attr">this.data.canvas</span> = canvas</span><br><span class="line"></span><br><span class="line">            // åˆå§‹åŒ–ç”»å¸ƒå¤§å°</span><br><span class="line">            const <span class="attr">dpr</span> = wx.getWindowInfo().pixelRatio</span><br><span class="line">            <span class="attr">canvas.width</span> = renderWidth * dpr</span><br><span class="line">            <span class="attr">canvas.height</span> = renderHeight * dpr</span><br><span class="line">            ctx.scale(dpr, dpr)</span><br><span class="line">            this.clearCanvas()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    clearCanvas() &#123;</span><br><span class="line">      const &#123; ctx,canvas &#125; = this.data</span><br><span class="line">      <span class="attr">this.data.drawCount</span> = <span class="number">0</span></span><br><span class="line">      <span class="attr">this.data.drawState</span> = <span class="string">&quot;ing&quot;</span></span><br><span class="line">      <span class="attr">ctx.textBaseline</span> = <span class="string">&#x27;top&#x27;</span></span><br><span class="line">      <span class="attr">ctx.textAlign</span> = <span class="string">&#x27;center&#x27;</span></span><br><span class="line">      <span class="attr">ctx.fontSize</span> = <span class="string">&#x27;20&#x27;</span></span><br><span class="line">      <span class="attr">ctx.font</span> = <span class="string">&#x27;24px red&#x27;</span></span><br><span class="line">      <span class="attr">ctx.fillStyle</span> = <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">      ctx.fillRect(0, 0, canvas.width, canvas.height)</span><br><span class="line">      <span class="attr">ctx.fillStyle</span> = <span class="string">&#x27;#616165&#x27;</span></span><br><span class="line">      ctx.fillText(&quot;è¯·åœ¨åŒºåŸŸå†…å®Œæˆç­¾å&quot;, this.data.width / 2, this.data.height/2 - 40)</span><br><span class="line">    &#125;,</span><br><span class="line">    catchtouchstart(e) &#123;</span><br><span class="line">      const &#123; canvas &#125; = this.data</span><br><span class="line">      if (<span class="attr">this.data.drawCount</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        this.data.ctx.beginPath()</span><br><span class="line">        this.data.ctx.clearRect(0,0,canvas.width,canvas.height)</span><br><span class="line">      &#125;</span><br><span class="line">      this.data.drawCount++</span><br><span class="line">      this.data.ctx.moveTo(e.changedTouches<span class="section">[0]</span>.clientX, e.changedTouches<span class="section">[0]</span>.clientY)</span><br><span class="line">    &#125;,</span><br><span class="line">    catchtouchmove(e) &#123;</span><br><span class="line">      const &#123; ctx &#125; = this.data</span><br><span class="line">      if (<span class="attr">this.data.drawState</span> == <span class="string">&quot;stop&quot;</span>) return</span><br><span class="line">      <span class="attr">this.data.drawState</span> = <span class="string">&quot;ing&quot;</span></span><br><span class="line">      if (e.touches.length &gt; 1) &#123;</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="attr">ctx.strokeStyle</span> = <span class="string">&#x27;#000000&#x27;</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.LineWidth</span> = <span class="number">4</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.shadowOffsetX</span> = <span class="number">0</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.shadowOffsetY</span> = <span class="number">0</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.shadowColor</span> = <span class="string">&#x27;#000000&#x27;</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.shadowBlur</span> = <span class="number">1</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.lineCap</span> = <span class="string">&#x27;round&#x27;</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">ctx.lineJoin</span> = <span class="string">&#x27;round&#x27;</span><span class="comment">;</span></span><br><span class="line">      ctx.lineTo(e.changedTouches<span class="section">[0]</span>.clientX, e.changedTouches<span class="section">[0]</span>.clientY)</span><br><span class="line">      ctx.stroke()</span><br><span class="line">      ctx.moveTo(e.changedTouches<span class="section">[0]</span>.clientX, e.changedTouches<span class="section">[0]</span>.clientY)</span><br><span class="line">    &#125;,</span><br><span class="line">    catchtouchend(e) &#123;</span><br><span class="line">      <span class="attr">this.data.points</span> = []</span><br><span class="line">    &#125;,</span><br><span class="line">    canvasToImg() &#123;</span><br><span class="line">      const &#123; canvas &#125; = this.data</span><br><span class="line">      if (<span class="attr">this.data.drawState</span> == <span class="string">&quot;init&quot;</span>) return</span><br><span class="line">      <span class="attr">this.data.drawState</span> = <span class="string">&quot;stop&quot;</span></span><br><span class="line">      wx.canvasToTempFilePath(&#123;</span><br><span class="line">        canvas: canvas,</span><br><span class="line">        success: (res) =&gt; &#123;</span><br><span class="line">          console.log(res.tempFilePath)</span><br><span class="line">        &#125;,</span><br><span class="line">        fail(rej)&#123;</span><br><span class="line">          console.log(rej)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  pageLifetimes:&#123;</span><br><span class="line">    show: function () &#123;</span><br><span class="line">      this.initCanvas()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨viteæ„å»ºé¡¹ç›®</title>
      <link href="/post/e7e9df67.html"/>
      <url>/post/e7e9df67.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ–‡ç« ç›®å½•"><a href="#æ–‡ç« ç›®å½•" class="headerlink" title="æ–‡ç« ç›®å½•"></a>æ–‡ç« ç›®å½•</h3><ul><li><a href="#1-%E5%AE%89%E8%A3%85vite%E8%84%9A%E6%89%8B%E6%9E%B6">1. å®‰è£…viteè„šæ‰‹æ¶</a><ul><li><a href="#11-%E4%B8%8B%E8%BD%BDvite">1.1 ä¸‹è½½vite</a></li><li><a href="#12-%E5%88%9B%E5%BB%BAvue%E9%A1%B9%E7%9B%AE">1.2 åˆ›å»ºvueé¡¹ç›®</a></li><li><a href="#13-%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8--viteconfigts-">1.3 é…ç½®ä»£ç†æœåŠ¡å™¨ ( vite.config.ts )</a></li></ul></li><li><a href="#2-%E5%88%9B%E5%BB%BA%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6-indexhtml-">2. åˆ›å»ºå…¥å£æ–‡ä»¶( index.html )</a></li><li><a href="#3-%E5%88%9B%E5%BB%BA%E7%B3%BB%E7%BB%9F%E5%85%A5%E5%8F%A3%E9%A1%B5%E9%9D%A2-appvue-">3. åˆ›å»ºç³»ç»Ÿå…¥å£é¡µé¢( app.vue )</a></li><li><a href="#4-%E5%88%9B%E5%BB%BA%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E5%85%A5%E5%8F%A3-maints-">4. åˆ›å»ºç³»ç»Ÿå¯åŠ¨å…¥å£( main.ts )</a></li><li><a href="#5-%E9%85%8D%E7%BD%AEpinia">5. é…ç½®pinia</a><ul><li><a href="#51-%E5%88%9B%E5%BB%BApinia-stores%E6%96%87%E4%BB%B6-">5.1 åˆ›å»ºpinia( storesæ–‡ä»¶ )</a></li><li><a href="#52-%E6%8C%82%E8%BD%BDpinia--maints-">5.2 æŒ‚è½½pinia ( main.ts )</a></li><li><a href="#53-%E4%BD%BF%E7%94%A8pinia--%E7%BB%84%E4%BB%B6%E4%B8%AD-">5.3 ä½¿ç”¨pinia ( ç»„ä»¶ä¸­ )</a></li></ul></li><li><a href="#6-%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1">6. é…ç½®è·¯ç”±</a><ul><li><a href="#61-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E8%A1%A8-routerts-">6.1 åˆ›å»ºè·¯ç”±è¡¨( router.ts )</a></li><li><a href="#62-%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB--routerts-">6.2 è·¯ç”±å®ˆå« ( router.ts )</a></li><li><a href="#63-%E6%8C%82%E8%BD%BD%E8%B7%AF%E7%94%B1--maints-">6.3 æŒ‚è½½è·¯ç”± ( main.ts )</a></li><li><a href="#64-%E8%B7%AF%E7%94%B1%E6%98%BE%E7%A4%BA--appvue-">6.4 è·¯ç”±æ˜¾ç¤º ( app.vue )</a></li></ul></li><li><a href="#7%E9%85%8D%E7%BD%AEapi">7.é…ç½®API</a><ul><li><a href="#71-%E5%88%9B%E5%BB%BAaxios%E5%AE%9E%E4%BE%8B--apits-">7.1 åˆ›å»ºaxioså®ä¾‹ ( api.ts )</a></li><li><a href="#72-%E5%88%9B%E5%BB%BA%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8--apits-">7.2 åˆ›å»ºè¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ ( api.ts )</a></li><li><a href="#73-%E4%BD%BF%E7%94%A8api--%E7%BB%84%E4%BB%B6%E4%B8%AD-">7.3 ä½¿ç”¨API ( ç»„ä»¶ä¸­ )</a></li></ul></li></ul><h1 id="1-å®‰è£…viteè„šæ‰‹æ¶"><a href="#1-å®‰è£…viteè„šæ‰‹æ¶" class="headerlink" title="1. å®‰è£…viteè„šæ‰‹æ¶"></a>1. å®‰è£…viteè„šæ‰‹æ¶</h1><h3 id="1-1-ä¸‹è½½vite"><a href="#1-1-ä¸‹è½½vite" class="headerlink" title="1.1 ä¸‹è½½vite"></a>1.1 ä¸‹è½½vite</h3><blockquote><p>ç»ˆç«¯è¾“å…¥<code>npm init vue@latest</code></p></blockquote><h3 id="1-2-åˆ›å»ºvueé¡¹ç›®"><a href="#1-2-åˆ›å»ºvueé¡¹ç›®" class="headerlink" title="1.2 åˆ›å»ºvueé¡¹ç›®"></a>1.2 åˆ›å»ºvueé¡¹ç›®</h3><blockquote><p>ä¾æ¬¡æŒ‰éœ€æ±‚é€‰æ‹©å›¾ä¸­æ‰“å‹¾çš„æ’ä»¶;é€‰æ‹©å®Œå,ä¾æ¬¡æ‰§è¡Œæœ€åº•ä¸‹çš„ä¸‰æ¡å‘½ä»¤<br><img src="https://img-blog.csdnimg.cn/1e6b359eca1a4bf2bd2fdbb07ae37175.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å®‰è£…å®Œåçš„é¡¹ç›®ç»“æ„<br><img src="https://img-blog.csdnimg.cn/02e800e7cff541b593a98459bb9ec877.png#pic_center" alt="é¡¹ç›®ç»“æ„"></p></blockquote><h3 id="1-3-é…ç½®ä»£ç†æœåŠ¡å™¨-vite-config-ts"><a href="#1-3-é…ç½®ä»£ç†æœåŠ¡å™¨-vite-config-ts" class="headerlink" title="1.3 é…ç½®ä»£ç†æœåŠ¡å™¨ ( vite.config.ts )"></a>1.3 é…ç½®ä»£ç†æœåŠ¡å™¨ ( vite.config.ts )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;<span class="comment">// é…ç½®éœ€è¦ä»£ç†çš„è·¯å¾„ --&gt; è¿™é‡Œçš„æ„æ€æ˜¯ä»£ç†http://localhost:80/api/åçš„æ‰€æœ‰è·¯ç”±</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://httpbin.org&#x27;</span>,<span class="comment">// ç›®æ ‡åœ°å€ --&gt; æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,<span class="comment">// å…è®¸è·¨åŸŸ</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-åˆ›å»ºå…¥å£æ–‡ä»¶-index-html"><a href="#2-åˆ›å»ºå…¥å£æ–‡ä»¶-index-html" class="headerlink" title="2. åˆ›å»ºå…¥å£æ–‡ä»¶( index.html )"></a>2. åˆ›å»ºå…¥å£æ–‡ä»¶( index.html )</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/favicon.ico&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ ¹ç»„ä»¶å®¹å™¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- å¼•å…¥ç³»ç»Ÿå¯åŠ¨å…¥å£jsæ–‡ä»¶ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="3-åˆ›å»ºç³»ç»Ÿå…¥å£é¡µé¢-app-vue"><a href="#3-åˆ›å»ºç³»ç»Ÿå…¥å£é¡µé¢-app-vue" class="headerlink" title="3. åˆ›å»ºç³»ç»Ÿå…¥å£é¡µé¢( app.vue )"></a>3. åˆ›å»ºç³»ç»Ÿå…¥å£é¡µé¢( app.vue )</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- htmlä»£ç  --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//jsä»£ç </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/*å±€éƒ¨cssæ ·å¼ */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="4-åˆ›å»ºç³»ç»Ÿå¯åŠ¨å…¥å£-main-ts"><a href="#4-åˆ›å»ºç³»ç»Ÿå¯åŠ¨å…¥å£-main-ts" class="headerlink" title="4. åˆ›å»ºç³»ç»Ÿå¯åŠ¨å…¥å£( main.ts )"></a>4. åˆ›å»ºç³»ç»Ÿå¯åŠ¨å…¥å£( main.ts )</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> å¯¼å…¥å…¨å±€cssæ ·å¼</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/main.css&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥åˆ›å»ºvueåº”ç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ ¹ç»„ä»¶å®¹å™¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ ¹ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½æ ¹ç»„ä»¶</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="5-é…ç½®pinia"><a href="#5-é…ç½®pinia" class="headerlink" title="5. é…ç½®pinia"></a>5. é…ç½®pinia</h1><h3 id="5-1-åˆ›å»ºpinia-storesæ–‡ä»¶"><a href="#5-1-åˆ›å»ºpinia-storesæ–‡ä»¶" class="headerlink" title="5.1 åˆ›å»ºpinia( storesæ–‡ä»¶ )"></a>5.1 åˆ›å»ºpinia( storesæ–‡ä»¶ )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥refã€computedå‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//å¯¼å…¥åˆ›å»ºpiniaçš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºpiniaå¹¶å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//ref()æ˜¯stateå±æ€§</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//computed()æ˜¯getterså±æ€§</span></span><br><span class="line">  <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//function()æ˜¯actionså±æ€§</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count.<span class="property">value</span>++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è¿”å›çŠ¶æ€ï¼Œä¾›å…¶ä»–æ–‡ä»¶è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">return</span> &#123; count, doubleCount, increment &#125;</span><br><span class="line">&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//piniaæ•°æ®æŒä¹…åŒ–</span></span><br><span class="line">    <span class="attr">persist</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>main.js</p><h3 id="5-2-æŒ‚è½½pinia-main-ts"><a href="#5-2-æŒ‚è½½pinia-main-ts" class="headerlink" title="5.2 æŒ‚è½½pinia ( main.ts )"></a>5.2 æŒ‚è½½pinia ( main.ts )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥åˆ›å»ºvueåº”ç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥åˆ›å»ºpiniaçš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="comment">//å¯¼å…¥piniaæŒä¹…åŒ–æ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> piniaPluginPersistedstate <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥æ ¹ç»„ä»¶å®¹å™¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ ¹ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºpinia</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//piniaæŒ‚è½½æ•°æ®æŒä¹…åŒ–æ’ä»¶</span></span><br><span class="line">pinia.<span class="title function_">use</span>(piniaPluginPersistedstate)</span><br><span class="line"><span class="comment">// æŒ‚è½½pinia</span></span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line"><span class="comment">// æŒ‚è½½æ ¹ç»„ä»¶</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-3-ä½¿ç”¨pinia-ç»„ä»¶ä¸­"><a href="#5-3-ä½¿ç”¨pinia-ç»„ä»¶ä¸­" class="headerlink" title="5.3 ä½¿ç”¨pinia ( ç»„ä»¶ä¸­ )"></a>5.3 ä½¿ç”¨pinia ( ç»„ä»¶ä¸­ )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//å¯¼å…¥pinia</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useCounterStore &#125; <span class="keyword">from</span> <span class="string">&#x27;./stores/counter&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//å¯¼å…¥refå‡½æ•°</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ä½¿ç”¨pinia</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> counterStore = <span class="title function_">useCounterStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//åˆ›å»ºå“åº”å¼æ•°æ®,ä»¥piniaä¸­çš„æ•°æ®ä¸ºåˆå§‹å€¼</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> count = <span class="title function_">ref</span>(counterStore.<span class="property">count</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">btn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  count.<span class="property">value</span>++</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//æŠŠæ›´æ–°åçš„æ•°æ®å­˜å‚¨åˆ°piniaä¸­</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  counterStore.<span class="property">count</span> = count.<span class="property">value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/*å±€éƒ¨cssæ ·å¼ */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="6-é…ç½®è·¯ç”±"><a href="#6-é…ç½®è·¯ç”±" class="headerlink" title="6. é…ç½®è·¯ç”±"></a>6. é…ç½®è·¯ç”±</h1><h3 id="6-1-åˆ›å»ºè·¯ç”±è¡¨-router-ts"><a href="#6-1-åˆ›å»ºè·¯ç”±è¡¨-router-ts" class="headerlink" title="6.1 åˆ›å»ºè·¯ç”±è¡¨( router.ts )"></a>6.1 åˆ›å»ºè·¯ç”±è¡¨( router.ts )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">//ä¸€çº§è·¯ç”±</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Main.vue&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è·¯ç”±é‡å®šå‘</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/main&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-2-è·¯ç”±å®ˆå«-router-ts"><a href="#6-2-è·¯ç”±å®ˆå«-router-ts" class="headerlink" title="6.2 è·¯ç”±å®ˆå« ( router.ts )"></a>6.2 è·¯ç”±å®ˆå« ( router.ts )</h3><ul><li>å…¨å±€å‰ç½®å®ˆå«</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//toï¼šè¦å»çš„è·¯ç”±</span></span><br><span class="line"><span class="comment">//fromï¼šå½“å‰çš„è·¯ç”±</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å› false ä¸è®©é¡µé¢è·³è½¬</span></span><br><span class="line">  <span class="comment">// è¿”å› true å…è®¸é¡µé¢è·³è½¬</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-3-æŒ‚è½½è·¯ç”±-main-ts"><a href="#6-3-æŒ‚è½½è·¯ç”±-main-ts" class="headerlink" title="6.3 æŒ‚è½½è·¯ç”± ( main.ts )"></a>6.3 æŒ‚è½½è·¯ç”± ( main.ts )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥åˆ›å»ºvueåº”ç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥æ ¹ç»„ä»¶å®¹å™¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥è·¯ç”±</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./routers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ ¹ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‚è½½è·¯ç”±</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"><span class="comment">// æŒ‚è½½æ ¹ç»„ä»¶</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-4-è·¯ç”±æ˜¾ç¤º-app-vue"><a href="#6-4-è·¯ç”±æ˜¾ç¤º-app-vue" class="headerlink" title="6.4 è·¯ç”±æ˜¾ç¤º ( app.vue )"></a>6.4 è·¯ç”±æ˜¾ç¤º ( app.vue )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template &gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>å»ç™»å½•<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;main&quot;</span>&gt;</span>å»ä¸»é¡µ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  &lt;!-- è·¯ç”±æ˜¾ç¤ºåŒºåŸŸ --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">RouterView</span>&gt;</span><span class="tag">&lt;/<span class="name">RouterView</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//å£°æ˜è·¯ç”±è¡¨</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//è·³è½¬åˆ°ç™»å½•</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">main</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//è·³è½¬åˆ°ç™»å½•</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  router.<span class="title function_">push</span>(<span class="string">&#x27;/main&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="7-é…ç½®API"><a href="#7-é…ç½®API" class="headerlink" title="7.é…ç½®API"></a>7.é…ç½®API</h1><ul><li>ç»ˆç«¯è¾“å…¥<code>npm i axios</code>,å®‰è£…axiosæ¨¡å—</li></ul><h3 id="7-1-åˆ›å»ºaxioså®ä¾‹-api-ts"><a href="#7-1-åˆ›å»ºaxioså®ä¾‹-api-ts" class="headerlink" title="7.1 åˆ›å»ºaxioså®ä¾‹ ( api.ts )"></a>7.1 åˆ›å»ºaxioså®ä¾‹ ( api.ts )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥axiosæ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="comment">//baseURL å°†è‡ªåŠ¨åŠ åœ¨ url å‰é¢ï¼Œé™¤é url æ˜¯ä¸€ä¸ªç»å¯¹ URL</span></span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://httpbin.org&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœè¯·æ±‚æ—¶é—´è¶…è¿‡ timeout çš„å€¼ï¼Œåˆ™è¯·æ±‚ä¼šè¢«ä¸­æ–­</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰è¯·æ±‚å¤´</span></span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;foobar&#x27;</span> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-2-åˆ›å»ºè¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨-api-ts"><a href="#7-2-åˆ›å»ºè¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨-api-ts" class="headerlink" title="7.2 åˆ›å»ºè¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ ( api.ts )"></a>7.2 åˆ›å»ºè¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨ ( api.ts )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯·æ±‚æˆåŠŸ&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è¯·æ±‚å‡ºé”™&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚</span></span><br><span class="line">        <span class="comment">// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è¶…å‡º 2xx èŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥logå‡½æ•°ã€‚</span></span><br><span class="line">        <span class="comment">// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-3-ä½¿ç”¨API-ç»„ä»¶ä¸­"><a href="#7-3-ä½¿ç”¨API-ç»„ä»¶ä¸­" class="headerlink" title="7.3 ä½¿ç”¨API ( ç»„ä»¶ä¸­ )"></a>7.3 ä½¿ç”¨API ( ç»„ä»¶ä¸­ )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template &gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;req&quot;</span>&gt;</span>å‘é€è¯·æ±‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;./api/index&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">req</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  request.<span class="title function_">post</span>(<span class="string">&#x27;url&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶æµå’Œåˆ‡ç‰‡ä¼ è¾“</title>
      <link href="/post/bd390c75.html"/>
      <url>/post/bd390c75.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰ç«¯æ–‡ä»¶æµã€åˆ‡ç‰‡ä¸‹è½½å’Œä¸Šä¼ ï¼šä¼˜åŒ–æ–‡ä»¶ä¼ è¾“æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒ"><a href="#å‰ç«¯æ–‡ä»¶æµã€åˆ‡ç‰‡ä¸‹è½½å’Œä¸Šä¼ ï¼šä¼˜åŒ–æ–‡ä»¶ä¼ è¾“æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒ" class="headerlink" title="å‰ç«¯æ–‡ä»¶æµã€åˆ‡ç‰‡ä¸‹è½½å’Œä¸Šä¼ ï¼šä¼˜åŒ–æ–‡ä»¶ä¼ è¾“æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒ"></a>å‰ç«¯æ–‡ä»¶æµã€åˆ‡ç‰‡ä¸‹è½½å’Œä¸Šä¼ ï¼šä¼˜åŒ–æ–‡ä»¶ä¼ è¾“æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒ</h1><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0af7daee3f8a4cd18f57ff57b80c6ef9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><blockquote><p>æ–‡ä»¶ä¼ è¾“æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚å¯¹äºå¤§æ–‡ä»¶çš„ä¸‹è½½å’Œä¸Šä¼ ï¼Œç›´æ¥ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼å¯èƒ½ä¼šé‡åˆ°æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒæ–¹é¢çš„é—®é¢˜ã€‚å¹¸è¿çš„æ˜¯ï¼Œå‰ç«¯æŠ€æœ¯æä¾›äº†ä¸€äº›é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼šæ–‡ä»¶æµæ“ä½œå’Œåˆ‡ç‰‡ä¸‹è½½ä¸ä¸Šä¼ ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›æŠ€æœ¯ï¼Œå¸®åŠ©ä½ ç†è§£å®ƒä»¬çš„åŸç†å’Œå®ç°æ–¹æ³•ï¼Œä»¥ä¼˜åŒ–æ–‡ä»¶ä¼ è¾“æ•ˆç‡å’Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p></blockquote><h2 id="ä¸€ã€å‰ç«¯æ–‡ä»¶æµæ“ä½œ"><a href="#ä¸€ã€å‰ç«¯æ–‡ä»¶æµæ“ä½œ" class="headerlink" title="ä¸€ã€å‰ç«¯æ–‡ä»¶æµæ“ä½œ"></a>ä¸€ã€å‰ç«¯æ–‡ä»¶æµæ“ä½œ</h2><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ–‡ä»¶æµæ“ä½œæ˜¯æŒ‡é€šè¿‡æ•°æ®æµçš„æ–¹å¼å¤„ç†æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œ<code>è¯»å–</code>ã€<code>å†™å…¥</code>å’Œ<code>å±•ç¤º</code>ç­‰æ“ä½œã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»äº†å‰ç«¯æ–‡ä»¶æµæ“ä½œçš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µå’ŒæŠ€æœ¯ã€‚</p><h3 id="æ•°æ®æµå’Œæ–‡ä»¶å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ"><a href="#æ•°æ®æµå’Œæ–‡ä»¶å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="æ•°æ®æµå’Œæ–‡ä»¶å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ"></a>æ•°æ®æµå’Œæ–‡ä»¶å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ</h3><p>æ•°æ®æµæ˜¯æŒ‡è¿<code>ç»­çš„æ•°æ®åºåˆ—</code>ï¼Œå¯ä»¥ä»ä¸€ä¸ªæºä¼ è¾“åˆ°å¦ä¸€ä¸ªç›®çš„åœ°ã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ–‡ä»¶å¯ä»¥è¢«çœ‹ä½œæ•°æ®æµçš„ä¸€ç§å½¢å¼ï¼Œå¯ä»¥é€šè¿‡æ•°æ®æµçš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚ æ–‡ä»¶å¤„ç†æ¶‰åŠè¯»å–å’Œå†™å…¥æ–‡ä»¶çš„æ“ä½œï¼ŒåŒ…æ‹¬è¯»å–æ–‡ä»¶çš„å†…å®¹ã€å†™å…¥æ•°æ®åˆ°æ–‡ä»¶ï¼Œä»¥åŠå¯¹æ–‡ä»¶è¿›è¡Œåˆ é™¤ã€é‡å‘½åç­‰æ“ä½œã€‚</p><h3 id="Blob-å¯¹è±¡å’Œ-ArrayBufferï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®"><a href="#Blob-å¯¹è±¡å’Œ-ArrayBufferï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="Blob å¯¹è±¡å’Œ ArrayBufferï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®"></a>Blob å¯¹è±¡å’Œ ArrayBufferï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®</h3><p>åœ¨å‰ç«¯å¤„ç†æ–‡ä»¶æ—¶ï¼Œç»å¸¸éœ€è¦å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚<code>Blob</code>ï¼ˆBinary Large Objectï¼‰å¯¹è±¡æ˜¯ç”¨æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡çš„äºŒè¿›åˆ¶æ•°æ®ã€‚Blob å¯¹è±¡å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œåˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»– API ç”Ÿæˆï¼Œä¾‹å¦‚é€šè¿‡ FormData å¯¹è±¡è·å–ä¸Šä¼ çš„æ–‡ä»¶ã€‚ è€Œ ArrayBuffer æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ªé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>ArrayBuffer</code> æ¥æ“ä½œå’Œå¤„ç†æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ <strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">FileInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [fileContent, setFileContent] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¯»å–æ–‡ä»¶å†…å®¹åˆ°ArrayBuffer</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">readFileToArrayBuffer</span>(<span class="params">file</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ³¨å†Œæ–‡ä»¶è¯»å–å®Œæˆåçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">      reader.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> arrayBuffer = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">        <span class="title function_">resolve</span>(arrayBuffer);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¯»å–æ–‡ä»¶å†…å®¹åˆ°ArrayBuffer</span></span><br><span class="line">      reader.<span class="title function_">readAsArrayBuffer</span>(file);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†ArrayBufferè½¬ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">arrayBufferToHexString</span>(<span class="params">arrayBuffer</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> uint8Array = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(arrayBuffer);</span><br><span class="line">    <span class="keyword">let</span> hexString = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; uint8Array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> hex = uint8Array[i].<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">      hexString += hex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hexString;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†æ–‡ä»¶é€‰æ‹©äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleFileChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> file = event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>];  <span class="comment">// è·å–é€‰ä¸­çš„æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (file) &#123;</span><br><span class="line">      <span class="title function_">readFileToArrayBuffer</span>(file)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">arrayBuffer</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> hexString = <span class="title function_">arrayBufferToHexString</span>(arrayBuffer);</span><br><span class="line">          <span class="title function_">setFileContent</span>(hexString);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ–‡ä»¶è¯»å–å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">setFileContent</span>(<span class="string">&#x27;è¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleFileChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>æ–‡ä»¶å†…å®¹ï¼š<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;fileContent&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">FileInput</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>FileInput</code> çš„å‡½æ•°å¼ç»„ä»¶ã€‚è¯¥ç»„ä»¶åŒ…å«ä¸€ä¸ªæ–‡ä»¶é€‰æ‹©æ¡†å’Œä¸€ä¸ªç”¨äºæ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„ <code>&lt;pre&gt;</code> å…ƒç´ ã€‚å½“ç”¨æˆ·é€‰æ‹©æ–‡ä»¶æ—¶ï¼Œé€šè¿‡ <code>FileReader</code> å°†æ–‡ä»¶å†…å®¹è¯»å–ä¸º <code>ArrayBuffer</code>ï¼Œç„¶åå°† <code>ArrayBuffer</code> è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¹¶å°†ç»“æœæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p><h3 id="ä½¿ç”¨-FileReader-è¿›è¡Œæ–‡ä»¶è¯»å–"><a href="#ä½¿ç”¨-FileReader-è¿›è¡Œæ–‡ä»¶è¯»å–" class="headerlink" title="ä½¿ç”¨ FileReader è¿›è¡Œæ–‡ä»¶è¯»å–"></a>ä½¿ç”¨ FileReader è¿›è¡Œæ–‡ä»¶è¯»å–</h3><p><code>FileReader</code> æ˜¯å‰ç«¯æµè§ˆå™¨æä¾›çš„ä¸€ä¸ª APIï¼Œç”¨äºè¯»å–æ–‡ä»¶å†…å®¹ã€‚é€šè¿‡ FileReaderï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼‚æ­¥æ–¹å¼è¯»å–æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºå¯ç”¨çš„æ•°æ®å½¢å¼ï¼Œæ¯”å¦‚æ–‡æœ¬æ•°æ®æˆ–äºŒè¿›åˆ¶æ•°æ®ã€‚ FileReader æä¾›äº†ä¸€äº›è¯»å–æ–‡ä»¶çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>readAsText()ã€readAsArrayBuffer()</code> ç­‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„æ–¹æ³•æ¥è¯»å–æ–‡ä»¶å†…å®¹ã€‚</p><h3 id="å°†æ–‡ä»¶æµå±•ç¤ºåœ¨å‰ç«¯é¡µé¢ä¸­"><a href="#å°†æ–‡ä»¶æµå±•ç¤ºåœ¨å‰ç«¯é¡µé¢ä¸­" class="headerlink" title="å°†æ–‡ä»¶æµå±•ç¤ºåœ¨å‰ç«¯é¡µé¢ä¸­"></a>å°†æ–‡ä»¶æµå±•ç¤ºåœ¨å‰ç«¯é¡µé¢ä¸­</h3><p>ä¸€æ—¦æˆ‘ä»¬æˆåŠŸåœ°è¯»å–äº†æ–‡ä»¶çš„å†…å®¹ï¼Œå°±å¯ä»¥å°†æ–‡ä»¶æµå±•ç¤ºåœ¨å‰ç«¯é¡µé¢ä¸Šã€‚å…·ä½“çš„å±•ç¤ºæ–¹å¼å–å†³äºæ–‡ä»¶çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥å°†å…¶å†…å®¹æ˜¾ç¤ºåœ¨é¡µé¢çš„æ–‡æœ¬æ¡†æˆ–åŒºåŸŸä¸­ï¼›å¯¹äºå›¾ç‰‡æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;img&gt;</code> æ ‡ç­¾å±•ç¤ºå›¾ç‰‡ï¼›å¯¹äºéŸ³è§†é¢‘æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;video&gt;</code> æˆ– <code>&lt;audio&gt;</code> æ ‡ç­¾æ¥æ’­æ”¾ã€‚ é€šè¿‡å°†æ–‡ä»¶æµå±•ç¤ºåœ¨å‰ç«¯é¡µé¢ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å®ç°åœ¨çº¿é¢„è§ˆå’ŒæŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„åŠŸèƒ½ã€‚</p><p>å¥½çš„ï¼Œè¿™ä¸€éƒ¨åˆ†å°±åŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œæ€»ç»“ä¸€ä¸‹ã€‚å‰ç«¯æ–‡ä»¶æ“ä½œæµæ˜¯å¤„ç†<code>å¤§å‹æ–‡ä»¶</code>çš„ä¸€ç§å¸¸è§æ–¹å¼ï¼Œä»–å¯ä»¥é€šè¿‡æ•°æ®æµçš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚<code>Blob</code>å¯¹è±¡ å’Œ <code>ArrayBuffer</code>æ˜¯å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„é‡è¦å·¥å…·ã€‚è€Œ<code>FileReader</code>åˆ™æ˜¯è¯»å–æ–‡ä»¶å†…å®¹çš„çš„å…³é”®ç»„ä»¶ã€‚é€šè¿‡è¿™äº›æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åœ¨å‰ç«¯é¡µé¢ä¸Šè¿›è¡Œæ“ä½œæˆ–è€…æ–‡ä»¶å±•ç¤ºã€‚</p><h2 id="äºŒã€æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½"><a href="#äºŒã€æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½" class="headerlink" title="äºŒã€æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½"></a>äºŒã€æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½</h2><p>è¿™ä¸€æ­¥å°±è¿›å…¥åˆ°æˆ‘ä»¬ä»Šå¤©æ–‡ç« ä¸»é¢˜äº†ï¼Œå…ˆæ¥ä¸»è¦çš„çœ‹ä¸‹æµç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A(å¼€å§‹) --&gt; B&#123;é€‰æ‹©æ–‡ä»¶&#125;</span><br><span class="line">B -- ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ --&gt; C[åˆ‡å‰²æ–‡ä»¶ä¸ºå¤šä¸ªåˆ‡ç‰‡]</span><br><span class="line">C --&gt; D&#123;ä¸Šä¼ åˆ‡ç‰‡&#125;</span><br><span class="line">D -- ä¸Šä¼ å®Œæˆ --&gt; E[åˆå¹¶åˆ‡ç‰‡ä¸ºå®Œæ•´æ–‡ä»¶]</span><br><span class="line">E -- æ–‡ä»¶åˆå¹¶å®Œæˆ --&gt; F(ä¸Šä¼ æˆåŠŸ)</span><br><span class="line">D -- ä¸Šä¼ ä¸­æ–­ --&gt; G&#123;ä¿å­˜ä¸Šä¼ è¿›åº¦&#125;</span><br><span class="line">G -- ä¸Šä¼ æ¢å¤ --&gt; D</span><br><span class="line">G -- å–æ¶ˆä¸Šä¼  --&gt; H(ä¸Šä¼ å–æ¶ˆ)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¼ ç»Ÿæ–‡ä»¶ä¸‹è½½çš„æ€§èƒ½é—®é¢˜"><a href="#ä¼ ç»Ÿæ–‡ä»¶ä¸‹è½½çš„æ€§èƒ½é—®é¢˜" class="headerlink" title="ä¼ ç»Ÿæ–‡ä»¶ä¸‹è½½çš„æ€§èƒ½é—®é¢˜"></a>ä¼ ç»Ÿæ–‡ä»¶ä¸‹è½½çš„æ€§èƒ½é—®é¢˜</h3><p>æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½æ˜¯ä¸€ç§æå‡æ–‡ä»¶ä¸‹è½½æ•ˆç‡çš„æŠ€æœ¯ï¼Œé€šè¿‡å°†å¤§æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªå°ç‰‡æ®µï¼ˆåˆ‡ç‰‡ï¼‰ï¼Œå¹¶ä½¿ç”¨å¤šä¸ªå¹¶å‘è¯·æ±‚åŒæ—¶ä¸‹è½½è¿™äº›åˆ‡ç‰‡ï¼Œä»è€ŒåŠ å¿«æ•´ä½“ä¸‹è½½é€Ÿåº¦ã€‚</p><p>ä¼ ç»Ÿçš„æ–‡ä»¶ä¸‹è½½æ–¹å¼å¯¹äºå¤§æ–‡ä»¶æ¥è¯´å­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚å½“ç”¨æˆ·è¯·æ±‚ä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶æ—¶ï¼ŒæœåŠ¡å™¨éœ€è¦å°†æ•´ä¸ªæ–‡ä»¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¼šå¯¼è‡´ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li>è¾ƒé•¿çš„ç­‰å¾…æ—¶é—´ï¼šå¤§æ–‡ä»¶éœ€è¦è¾ƒé•¿çš„æ—¶é—´æ¥ä¼ è¾“åˆ°å®¢æˆ·ç«¯ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´æ‰èƒ½å¼€å§‹ä½¿ç”¨æ–‡ä»¶ã€‚</li><li>ç½‘ç»œé˜»å¡ï¼šç”±äºä¸‹è½½è¿‡ç¨‹ä¸­å ç”¨äº†ç½‘ç»œå¸¦å®½ï¼Œå…¶ä»–ç”¨æˆ·å¯èƒ½ä¼šé‡åˆ°ä¸‹è½½é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</li><li>æ–­ç‚¹ç»­ä¼ å›°éš¾ï¼šå¦‚æœä¸‹è½½è¿‡ç¨‹ä¸­å‡ºç°ç½‘ç»œæ•…éšœæˆ–è€…ç”¨æˆ·ä¸­æ–­ä¸‹è½½ï¼Œéœ€è¦é‡æ–°ä¸‹è½½æ•´ä¸ªæ–‡ä»¶ï¼Œæ— æ³•ç»§ç»­ä¹‹å‰çš„ä¸‹è½½è¿›åº¦ã€‚</li></ol><h3 id="åˆ©ç”¨æ–‡ä»¶åˆ‡ç‰‡æå‡ä¸‹è½½æ•ˆç‡"><a href="#åˆ©ç”¨æ–‡ä»¶åˆ‡ç‰‡æå‡ä¸‹è½½æ•ˆç‡" class="headerlink" title="åˆ©ç”¨æ–‡ä»¶åˆ‡ç‰‡æå‡ä¸‹è½½æ•ˆç‡"></a>åˆ©ç”¨æ–‡ä»¶åˆ‡ç‰‡æå‡ä¸‹è½½æ•ˆç‡</h3><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54f4870b538d43d8a637e116932e1939~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"> æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½é€šè¿‡å°†æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªå°ç‰‡æ®µï¼Œæ¯ä¸ªç‰‡æ®µå¤§å°é€šå¸¸åœ¨å‡ ç™¾KBåˆ°å‡ MBä¹‹é—´ã€‚ç„¶åå®¢æˆ·ç«¯é€šè¿‡å¤šä¸ªå¹¶å‘è¯·æ±‚åŒæ—¶ä¸‹è½½è¿™äº›ç‰‡æ®µã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š</p><ol><li>å¿«é€Ÿå¯åŠ¨ï¼šå®¢æˆ·ç«¯å¯ä»¥å¿«é€Ÿå¼€å§‹ä¸‹è½½ï¼Œå› ä¸ºåªéœ€è¦ä¸‹è½½ç¬¬ä¸€ä¸ªåˆ‡ç‰‡å³å¯ã€‚</li><li>å¹¶å‘ä¸‹è½½ï¼šé€šè¿‡ä½¿ç”¨å¤šä¸ªå¹¶å‘è¯·æ±‚ä¸‹è½½åˆ‡ç‰‡ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨å¸¦å®½ï¼Œå¹¶æé«˜æ•´ä½“ä¸‹è½½é€Ÿåº¦ã€‚</li><li>æ–­ç‚¹ç»­ä¼ ï¼šå¦‚æœä¸‹è½½ä¸­æ–­ï¼Œå®¢æˆ·ç«¯åªéœ€è¦é‡æ–°ä¸‹è½½ä¸­æ–­çš„åˆ‡ç‰‡ï¼Œè€Œä¸éœ€è¦é‡æ–°ä¸‹è½½æ•´ä¸ªæ–‡ä»¶ã€‚ <strong>åˆ‡ç‰‡ä¸Šä¼ ä»£ç ç¤ºä¾‹ï¼š</strong></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [selectedFile, setSelectedFile] = <span class="title function_">useState</span>(<span class="literal">null</span>); </span><br><span class="line"><span class="keyword">const</span> [progress, setProgress] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="comment">// å¤„ç†æ–‡ä»¶é€‰æ‹©äº‹ä»¶</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">handleFileChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">   <span class="title function_">setSelectedFile</span>(event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>]);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å¤„ç†æ–‡ä»¶ä¸Šä¼ äº‹ä»¶</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">handleFileUpload</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (selectedFile) &#123;</span><br><span class="line">     <span class="comment">// è®¡ç®—åˆ‡ç‰‡æ•°é‡å’Œæ¯ä¸ªåˆ‡ç‰‡çš„å¤§å°</span></span><br><span class="line">     <span class="keyword">const</span> fileSize = selectedFile.<span class="property">size</span>;</span><br><span class="line">     <span class="keyword">const</span> chunkSize = <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">// è®¾ç½®åˆ‡ç‰‡å¤§å°ä¸º1MB</span></span><br><span class="line">     <span class="keyword">const</span> totalChunks = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(fileSize / chunkSize);</span><br><span class="line"></span><br><span class="line">     <span class="comment">// åˆ›å»ºFormDataå¯¹è±¡ï¼Œå¹¶æ·»åŠ æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">     <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">     formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, selectedFile);</span><br><span class="line">     formData.<span class="title function_">append</span>(<span class="string">&#x27;totalChunks&#x27;</span>, totalChunks);</span><br><span class="line"></span><br><span class="line">     <span class="comment">// å¾ªç¯ä¸Šä¼ åˆ‡ç‰‡</span></span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> chunkNumber = <span class="number">0</span>; chunkNumber &lt; totalChunks; chunkNumber++) &#123;</span><br><span class="line">       <span class="keyword">const</span> start = chunkNumber * chunkSize;</span><br><span class="line">       <span class="keyword">const</span> end = <span class="title class_">Math</span>.<span class="title function_">min</span>(start + chunkSize, fileSize);</span><br><span class="line">       <span class="keyword">const</span> chunk = selectedFile.<span class="title function_">slice</span>(start, end);</span><br><span class="line">       formData.<span class="title function_">append</span>(<span class="string">`chunk-<span class="subst">$&#123;chunkNumber&#125;</span>`</span>, chunk, selectedFile.<span class="property">name</span>);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// å‘èµ·æ–‡ä»¶ä¸Šä¼ è¯·æ±‚</span></span><br><span class="line">     axios.<span class="title function_">post</span>(<span class="string">&#x27;/upload&#x27;</span>, formData, &#123;</span><br><span class="line">       <span class="attr">onUploadProgress</span>: <span class="function"><span class="params">progressEvent</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">round</span>((progressEvent.<span class="property">loaded</span> / progressEvent.<span class="property">total</span>) * <span class="number">100</span>);</span><br><span class="line">         <span class="title function_">setProgress</span>(progress);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">       .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ:&#x27;</span>, response.<span class="property">data</span>);</span><br><span class="line">       &#125;)</span><br><span class="line">       .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ–‡ä»¶ä¸Šä¼ å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“æ¶‰åŠåˆ°åˆ‡ç‰‡ä¸Šä¼ å’Œä¸‹è½½æ—¶ï¼Œå‰ç«¯ä½¿ç”¨çš„æŠ€æœ¯é€šå¸¸æ˜¯åŸºäºå‰ç«¯åº“æˆ–æ¡†æ¶æä¾›çš„æ–‡ä»¶å¤„ç†åŠŸèƒ½ï¼Œç»“åˆåç«¯æœåŠ¡å®ç°ã€‚</p><p>ä¸Šé¢ä»£ç é‡Œæˆ‘ä»¬æåˆ°äº†æ–‡ä»¶å¦‚ä½•åˆ‡ç‰‡ä¸Šä¼ ã€‚</p><ul><li>å½“ç”¨æˆ·é€‰æ‹©æ–‡ä»¶åï¼Œé€šè¿‡Â <code>handleFileChange</code>Â å‡½æ•°å¤„ç†æ–‡ä»¶é€‰æ‹©äº‹ä»¶ï¼Œå°†é€‰æ‹©çš„æ–‡ä»¶ä¿å­˜åœ¨Â <code>selectedFile</code>Â çŠ¶æ€ä¸­ã€‚</li><li>å½“ç”¨æˆ·ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æ—¶ï¼Œé€šè¿‡Â <code>handleFileUpload</code>Â å‡½æ•°å¤„ç†æ–‡ä»¶ä¸Šä¼ äº‹ä»¶ã€‚</li><li>åœ¨Â <code>handleFileUpload</code>Â å‡½æ•°ä¸­ï¼Œè®¡ç®—åˆ‡ç‰‡æ•°é‡å’Œæ¯ä¸ªåˆ‡ç‰‡çš„å¤§å°ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªÂ <code>FormData</code>Â å¯¹è±¡ç”¨äºå­˜å‚¨æ–‡ä»¶ä¿¡æ¯å’Œåˆ‡ç‰‡æ•°æ®ã€‚</li></ul><h3 id="å®ç°å®¢æˆ·ç«¯åˆ‡ç‰‡ä¸‹è½½çš„æ–¹æ¡ˆ"><a href="#å®ç°å®¢æˆ·ç«¯åˆ‡ç‰‡ä¸‹è½½çš„æ–¹æ¡ˆ" class="headerlink" title="å®ç°å®¢æˆ·ç«¯åˆ‡ç‰‡ä¸‹è½½çš„æ–¹æ¡ˆ"></a>å®ç°å®¢æˆ·ç«¯åˆ‡ç‰‡ä¸‹è½½çš„æ–¹æ¡ˆ</h3><p>å®ç°å®¢æˆ·ç«¯åˆ‡ç‰‡ä¸‹è½½çš„åŸºæœ¬æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ol><li>æœåŠ¡å™¨ç«¯å°†å¤§æ–‡ä»¶åˆ‡å‰²æˆå¤šä¸ªåˆ‡ç‰‡ï¼Œå¹¶ä¸ºæ¯ä¸ªåˆ‡ç‰‡ç”Ÿæˆå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚</li><li>å®¢æˆ·ç«¯å‘é€è¯·æ±‚è·å–åˆ‡ç‰‡åˆ—è¡¨ï¼ŒåŒæ—¶å¼€å§‹ä¸‹è½½ç¬¬ä¸€ä¸ªåˆ‡ç‰‡ã€‚</li><li>å®¢æˆ·ç«¯åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®åˆ‡ç‰‡åˆ—è¡¨å‘èµ·å¹¶å‘è¯·æ±‚ä¸‹è½½å…¶ä»–åˆ‡ç‰‡ï¼Œå¹¶é€æ¸æ‹¼æ¥åˆå¹¶ä¸‹è½½çš„æ•°æ®ã€‚</li><li>å½“æ‰€æœ‰åˆ‡ç‰‡éƒ½ä¸‹è½½å®Œæˆåï¼Œå®¢æˆ·ç«¯å°†ä¸‹è½½çš„æ•°æ®åˆå¹¶ä¸ºå®Œæ•´çš„æ–‡ä»¶ã€‚</li></ol><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">downloadFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// å‘èµ·æ–‡ä»¶ä¸‹è½½è¯·æ±‚</span></span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&#x27;/download&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> totalSize = data.<span class="property">totalSize</span>;</span><br><span class="line">      <span class="keyword">const</span> totalChunks = data.<span class="property">totalChunks</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> downloadedChunks = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">let</span> chunks = [];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸‹è½½æ¯ä¸ªåˆ‡ç‰‡</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> chunkNumber = <span class="number">0</span>; chunkNumber &lt; totalChunks; chunkNumber++) &#123;</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">`/download/<span class="subst">$&#123;chunkNumber&#125;</span>`</span>, &#123;</span><br><span class="line">          <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">          .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">blob</span>())</span><br><span class="line">          .<span class="title function_">then</span>(<span class="function"><span class="params">chunk</span> =&gt;</span> &#123;</span><br><span class="line">            downloadedChunks++;</span><br><span class="line">            chunks.<span class="title function_">push</span>(chunk);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å½“æ‰€æœ‰åˆ‡ç‰‡éƒ½ä¸‹è½½å®Œæˆæ—¶</span></span><br><span class="line">            <span class="keyword">if</span> (downloadedChunks === totalChunks) &#123;</span><br><span class="line">              <span class="comment">// åˆå¹¶åˆ‡ç‰‡</span></span><br><span class="line">              <span class="keyword">const</span> mergedBlob = <span class="keyword">new</span> <span class="title class_">Blob</span>(chunks);</span><br><span class="line"></span><br><span class="line">              <span class="comment">// åˆ›å»ºå¯¹è±¡ URLï¼Œç”Ÿæˆä¸‹è½½é“¾æ¥</span></span><br><span class="line">              <span class="keyword">const</span> downloadUrl = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(mergedBlob);</span><br><span class="line"></span><br><span class="line">              <span class="comment">// åˆ›å»º &lt;a&gt; å…ƒç´ å¹¶è®¾ç½®å±æ€§</span></span><br><span class="line">              <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">              link.<span class="property">href</span> = downloadUrl;</span><br><span class="line">              link.<span class="title function_">setAttribute</span>(<span class="string">&#x27;download&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line">              <span class="comment">// æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½</span></span><br><span class="line">              link.<span class="title function_">click</span>();</span><br><span class="line"></span><br><span class="line">              <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(downloadUrl);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ–‡ä»¶ä¸‹è½½å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹ä¸‹ä»£ç ï¼Œé¦–å…ˆä½¿ç”¨<code>BLOB</code>å¯¹è±¡åˆ›å»ºä¸€å…±å¯¹è±¡URLï¼Œç”¨äºç”Ÿæˆä¸‹è½½è¿æ¥ï¼Œç„¶ååˆ›å»º<code>a</code>æ ‡ç­¾å¹¶ä¸”è®¾ç½®<code>href</code>çš„å±æ€§ä¸ºåˆšåˆšåˆ›å»ºçš„å¯¹è±¡URL,ç»§ç»­è®¾ç½®<code>a</code>æ ‡ç­¾çš„<code>download</code>å±æ€§æ˜¯æ–‡ä»¶åï¼Œæ–¹ä¾¿ç‚¹å‡»çš„æ—¶å€™è‡ªåŠ¨ä¸‹è½½æ–‡ä»¶ã€‚</p><h3 id="æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œå®ŒæˆçŠ¶æ€"><a href="#æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œå®ŒæˆçŠ¶æ€" class="headerlink" title="æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œå®ŒæˆçŠ¶æ€"></a>æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œå®ŒæˆçŠ¶æ€</h3><p>ä¸ºäº†æ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œå®ŒæˆçŠ¶æ€ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>æ˜¾ç¤ºè¿›åº¦æ¡ï¼šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ç›‘å¬æ¯ä¸ªåˆ‡ç‰‡çš„ä¸‹è½½è¿›åº¦æ¥è®¡ç®—æ•´ä½“ä¸‹è½½è¿›åº¦ï¼Œå¹¶å®æ—¶æ›´æ–°è¿›åº¦æ¡çš„æ˜¾ç¤ºã€‚</li><li>æ˜¾ç¤ºå®ŒæˆçŠ¶æ€ï¼šå½“æ‰€æœ‰åˆ‡ç‰‡éƒ½ä¸‹è½½å®Œæˆåï¼Œå®¢æˆ·ç«¯å¯ä»¥æ˜¾ç¤ºä¸‹è½½å®Œæˆçš„çŠ¶æ€ï¼Œä¾‹å¦‚æ˜¾ç¤ºä¸€ä¸ªå®Œæˆçš„å›¾æ ‡æˆ–è€…æ–‡æœ¬ã€‚</li></ol><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¥ç€<code>åˆ‡ç‰‡ä¸Šä¼ ä»£ç ç¤ºä¾‹</code>é‡Œçš„ç»§ç»­å†™ã€‚</p><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç†æ–‡ä»¶ä¸‹è½½äº‹ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleFileDownload</span>(<span class="params"></span>) &#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&#x27;/download&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">responseType</span>: <span class="string">&#x27;blob&#x27;</span>,</span><br><span class="line">    <span class="attr">onDownloadProgress</span>: <span class="function"><span class="params">progressEvent</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">round</span>((progressEvent.<span class="property">loaded</span> / progressEvent.<span class="property">total</span>) * <span class="number">100</span>);</span><br><span class="line">      <span class="title function_">setProgress</span>(progress);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„URLå¯¹è±¡ç”¨äºä¸‹è½½</span></span><br><span class="line">      <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>([response.<span class="property">data</span>]));</span><br><span class="line">      <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">      link.<span class="property">href</span> = url;</span><br><span class="line">      link.<span class="title function_">setAttribute</span>(<span class="string">&#x27;download&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span><br><span class="line">      link.<span class="title function_">click</span>();</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ–‡ä»¶ä¸‹è½½å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;button onClick=&#123;handleFileDownload&#125;&gt;ä¸‹è½½æ–‡ä»¶&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿›åº¦ï¼š&#123;progress&#125;%<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å½“ç”¨æˆ·ç‚¹å‡»ä¸‹è½½æŒ‰é’®æ—¶ï¼Œé€šè¿‡Â <code>handleFileDownload</code>Â å‡½æ•°å¤„ç†æ–‡ä»¶ä¸‹è½½äº‹ä»¶ã€‚</li><li>åœ¨Â <code>handleFileDownload</code>Â å‡½æ•°ä¸­ï¼Œä½¿ç”¨Â <code>axios</code>Â åº“å‘èµ·æ–‡ä»¶ä¸‹è½½è¯·æ±‚ï¼Œå¹¶è®¾ç½®Â <code>responseType: &#39;blob&#39;</code>Â è¡¨ç¤ºè¿”å›äºŒè¿›åˆ¶æ•°æ®ã€‚</li><li>é€šè¿‡ç›‘å¬Â <code>onDownloadProgress</code>Â å±æ€§è·å–ä¸‹è½½è¿›åº¦ï¼Œå¹¶æ›´æ–°è¿›åº¦æ¡çš„æ˜¾ç¤ºã€‚</li><li>ä¸‹è½½å®Œæˆåï¼Œåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ URL å¯¹è±¡ç”¨äºä¸‹è½½ï¼Œå¹¶é€šè¿‡åŠ¨æ€åˆ›å»ºÂ <code>&lt;a&gt;</code>Â å…ƒç´ æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½ã€‚</li></ul><h2 id="ä¸‰ã€å¤§æ–‡ä»¶ä¸Šä¼ çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#ä¸‰ã€å¤§æ–‡ä»¶ä¸Šä¼ çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€å¤§æ–‡ä»¶ä¸Šä¼ çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a>ä¸‰ã€å¤§æ–‡ä»¶ä¸Šä¼ çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="ä¼ ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ æ–¹å¼å­˜åœ¨çš„é—®é¢˜"><a href="#ä¼ ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ æ–¹å¼å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="ä¼ ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ æ–¹å¼å­˜åœ¨çš„é—®é¢˜"></a>ä¼ ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ æ–¹å¼å­˜åœ¨çš„é—®é¢˜</h3><ul><li>å¤§æ–‡ä»¶ä¸Šä¼ è€—æ—¶é•¿ï¼Œå®¹æ˜“å¯¼è‡´è¯·æ±‚è¶…æ—¶ã€‚</li><li>å ç”¨æœåŠ¡å™¨å’Œç½‘ç»œå¸¦å®½èµ„æºï¼Œå¯èƒ½å½±å“å…¶ä»–ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ã€‚</li><li>å¦‚æœä¸Šä¼ ä¸­æ–­ï¼Œéœ€è¦é‡æ–°ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li><li>éš¾ä»¥å®ç°ä¸Šä¼ è¿›åº¦çš„æ˜¾ç¤ºå’Œæ§åˆ¶ã€‚</li></ul><h3 id="å‰ç«¯æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼ çš„ä¼˜åŠ¿"><a href="#å‰ç«¯æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼ çš„ä¼˜åŠ¿" class="headerlink" title="å‰ç«¯æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼ çš„ä¼˜åŠ¿"></a>å‰ç«¯æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼ çš„ä¼˜åŠ¿</h3><ul><li>å°†å¤§æ–‡ä»¶åˆ†å‰²ä¸ºæ›´å°çš„æ–‡ä»¶åˆ‡ç‰‡ï¼Œåˆ†å¤šæ¬¡ä¸Šä¼ ï¼Œæé«˜ä¸Šä¼ æ•ˆç‡å’Œç¨³å®šæ€§ã€‚</li><li>æä¾›ä¸Šä¼ è¿›åº¦çš„ç›‘æ§å’Œå±•ç¤ºï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</li><li>å……åˆ†åˆ©ç”¨æµè§ˆå™¨çš„å¹¶å‘ä¸Šä¼ èƒ½åŠ›ï¼Œå‡è½»æœåŠ¡å™¨è´Ÿæ‹…ã€‚</li><li>å®ç°æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼Œé¿å…é‡å¤ä¸Šä¼ å·²ä¸Šä¼ çš„éƒ¨åˆ†ã€‚</li></ul><h3 id="å®ç°å‰ç«¯åˆ‡ç‰‡ä¸Šä¼ çš„æ–¹æ³•"><a href="#å®ç°å‰ç«¯åˆ‡ç‰‡ä¸Šä¼ çš„æ–¹æ³•" class="headerlink" title="å®ç°å‰ç«¯åˆ‡ç‰‡ä¸Šä¼ çš„æ–¹æ³•"></a>å®ç°å‰ç«¯åˆ‡ç‰‡ä¸Šä¼ çš„æ–¹æ³•</h3><ol><li><ul><li>ä½¿ç”¨ JavaScript çš„Â <code>File API</code>Â è·å–æ–‡ä»¶å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨Â <code>Blob.prototype.slice()</code>Â æ–¹æ³•å°†æ–‡ä»¶åˆ‡å‰²ä¸ºå¤šä¸ªåˆ‡ç‰‡ã€‚</li><li>ä½¿ç”¨Â <code>FormData</code>Â å¯¹è±¡å°†åˆ‡ç‰‡æ•°æ®é€šè¿‡ AJAX æˆ– Fetch API å‘é€åˆ°æœåŠ¡å™¨ã€‚</li><li>åœ¨åç«¯æœåŠ¡å™¨ä¸Šæ¥æ”¶åˆ‡ç‰‡å¹¶ä¿å­˜åˆ°ä¸´æ—¶å­˜å‚¨ä¸­ï¼Œç­‰å¾…åç»­åˆå¹¶ã€‚</li><li>åœ¨å®¢æˆ·ç«¯é€šè¿‡ç›‘å¬ä¸Šä¼ è¿›åº¦äº‹ä»¶ï¼Œåœ¨è¿›åº¦æ¡æˆ–æç¤ºä¸­å±•ç¤ºä¸Šä¼ è¿›åº¦ã€‚ <strong>ä»£ç ç¤ºä¾‹</strong></li></ul></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [file, setFile] = <span class="title function_">useState</span>(<span class="literal">null</span>);  <span class="comment">//ç”¨æ¥å­˜æ”¾æˆ‘æœ¬åœ°ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> chunkSize = <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">// 1MB åˆ‡ç‰‡å¤§å°</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">upload</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!file) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> chunkSize = <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">// 1MB</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> end = <span class="title class_">Math</span>.<span class="title function_">min</span>(chunkSize, file.<span class="property">size</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (start &lt; file.<span class="property">size</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> chunk = file.<span class="title function_">slice</span>(start, end);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// åˆ›å»ºFormDataå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">      formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, chunk);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å‘é€åˆ‡ç‰‡åˆ°æœåŠ¡å™¨</span></span><br><span class="line">      <span class="title function_">fetch</span>(<span class="string">&#x27;ä¸Šä¼ æ¥å£xxxx&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: formData</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        <span class="comment">// å¤„ç†å“åº”ç»“æœ</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">        <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      start = end;</span><br><span class="line">      end = <span class="title class_">Math</span>.<span class="title function_">min</span>(start + chunkSize, file.<span class="property">size</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleFileChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;upload&#125;</span>&gt;</span>ä¸Šä¼ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>Upload</code>çš„å‡½æ•°ç»„ä»¶ã€‚å®ƒä½¿ç”¨äº† React çš„<code>useState</code>é’©å­æ¥ç®¡ç†é€‰ä¸­çš„æ–‡ä»¶ã€‚</p><p>é€šè¿‡<code>onChange</code>äº‹ä»¶ç›‘å¬æ–‡ä»¶è¾“å…¥æ¡†çš„å˜åŒ–ï¼Œå¹¶åœ¨<code>handleFileChange</code>å‡½æ•°ä¸­è·å–é€‰æ‹©çš„æ–‡ä»¶ï¼Œå¹¶æ›´æ–°<code>file</code>çŠ¶æ€ã€‚</p><p>ç‚¹å‡»â€œä¸Šä¼ â€æŒ‰é’®æ—¶ï¼Œè°ƒç”¨<code>upload</code>å‡½æ•°ã€‚å®ƒä¸ä¹‹å‰çš„ç¤ºä¾‹ä»£ç ç±»ä¼¼ï¼Œå°†æ–‡ä»¶åˆ‡å‰²ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„åˆ‡ç‰‡ï¼Œå¹¶ä½¿ç”¨<code>FormData</code>å¯¹è±¡å’Œ<code>fetch</code>å‡½æ•°å‘é€åˆ‡ç‰‡æ•°æ®åˆ°æœåŠ¡å™¨ã€‚</p><h3 id="å®ç°æ–­ç‚¹ç»­ä¼ çš„æŠ€æœ¯ï¼šè®°å½•å’Œæ¢å¤ä¸Šä¼ çŠ¶æ€"><a href="#å®ç°æ–­ç‚¹ç»­ä¼ çš„æŠ€æœ¯ï¼šè®°å½•å’Œæ¢å¤ä¸Šä¼ çŠ¶æ€" class="headerlink" title="å®ç°æ–­ç‚¹ç»­ä¼ çš„æŠ€æœ¯ï¼šè®°å½•å’Œæ¢å¤ä¸Šä¼ çŠ¶æ€"></a>å®ç°æ–­ç‚¹ç»­ä¼ çš„æŠ€æœ¯ï¼šè®°å½•å’Œæ¢å¤ä¸Šä¼ çŠ¶æ€</h3><ul><li>åœ¨å‰ç«¯ï¼Œå¯ä»¥ä½¿ç”¨Â <code>localStorage</code>Â æˆ–Â <code>sessionStorage</code>Â æ¥å­˜å‚¨å·²ä¸Šä¼ çš„åˆ‡ç‰‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²ä¸Šä¼ çš„åˆ‡ç‰‡ç´¢å¼•ã€åˆ‡ç‰‡å¤§å°ç­‰ã€‚</li><li>æ¯æ¬¡ä¸Šä¼ å‰ï¼Œå…ˆæ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­æ˜¯å¦å­˜åœ¨å·²ä¸Šä¼ çš„åˆ‡ç‰‡ä¿¡æ¯ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™ä»æ–­ç‚¹å¤„ç»§ç»­ä¸Šä¼ ã€‚</li><li>åœ¨åç«¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹æˆ–æ•°æ®åº“æ¥è®°å½•å·²æ¥æ”¶åˆ°çš„åˆ‡ç‰‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²ä¸Šä¼ çš„åˆ‡ç‰‡ç´¢å¼•ã€åˆ‡ç‰‡å¤§å°ç­‰ã€‚</li><li>åœ¨ä¸Šä¼ å®Œæˆå‰ï¼Œä¿å­˜ä¸Šä¼ çŠ¶æ€ï¼Œä»¥ä¾¿åœ¨ä¸Šä¼ ä¸­æ–­åèƒ½å¤Ÿæ¢å¤ä¸Šä¼ è¿›åº¦ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Upload</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [file, setFile] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [uploadedChunks, setUploadedChunks] = <span class="title function_">useState</span>([]);</span><br><span class="line">  <span class="keyword">const</span> [uploading, setUploading] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> uploadRequestRef = <span class="title function_">useRef</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleFileChange</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> selectedFile = event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="title function_">setFile</span>(selectedFile);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">uploadChunk</span> = (<span class="params">chunk</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºFormDataå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">    formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, chunk);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€åˆ‡ç‰‡åˆ°æœåŠ¡å™¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="string">&#x27;your-upload-url&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">body</span>: formData</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">      <span class="comment">// å¤„ç†å“åº”ç»“æœ</span></span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">upload</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!file) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> chunkSize = <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">// 1MB</span></span><br><span class="line">    <span class="keyword">const</span> totalChunks = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(file.<span class="property">size</span> / chunkSize);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> end = <span class="title class_">Math</span>.<span class="title function_">min</span>(chunkSize, file.<span class="property">size</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setUploading</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; totalChunks; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> chunk = file.<span class="title function_">slice</span>(start, end);</span><br><span class="line">      <span class="keyword">const</span> uploadedChunkIndex = uploadedChunks.<span class="title function_">indexOf</span>(i);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (uploadedChunkIndex === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">uploadChunk</span>(chunk);</span><br><span class="line">          <span class="title function_">setUploadedChunks</span>(<span class="function">(<span class="params">prevChunks</span>) =&gt;</span> [...prevChunks, i]);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// ä¿å­˜å·²ä¸Šä¼ çš„åˆ‡ç‰‡ä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨</span></span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;uploadedChunks&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(uploadedChunks));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">          <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      start = end;</span><br><span class="line">      end = <span class="title class_">Math</span>.<span class="title function_">min</span>(start + chunkSize, file.<span class="property">size</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setUploading</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¼ å®Œæ¯•ï¼Œæ¸…é™¤æœ¬åœ°å­˜å‚¨çš„åˆ‡ç‰‡ä¿¡æ¯</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;uploadedChunks&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> storedUploadedChunks = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;uploadedChunks&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (storedUploadedChunks) &#123;</span><br><span class="line">      <span class="title function_">setUploadedChunks</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(storedUploadedChunks));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleFileChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;upload&#125;</span> <span class="attr">disabled</span>=<span class="string">&#123;uploading&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;uploading ? &#x27;ä¸Šä¼ ä¸­...&#x27; : &#x27;ä¸Šä¼ &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œä½¿ç”¨<code>useState</code>é’©å­åˆ›å»ºäº†ä¸€ä¸ª<code>uploadedChunks</code>çŠ¶æ€æ¥ä¿å­˜å·²ä¸Šä¼ çš„åˆ‡ç‰‡ç´¢å¼•æ•°ç»„ã€‚åˆå§‹å€¼ä¸ºç©ºæ•°ç»„ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>useRef</code>é’©å­åˆ›å»ºäº†ä¸€ä¸ª<code>uploadRequestRef</code>å¼•ç”¨ï¼Œç”¨äºå­˜å‚¨å½“å‰çš„ä¸Šä¼ è¯·æ±‚ã€‚</p><p>åœ¨<code>handleFileChange</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°äº†<code>file</code>çŠ¶æ€ä»¥é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ã€‚</p><p>åœ¨<code>uploadChunk</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å‘é€åˆ‡ç‰‡åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡æ¥å¤„ç†å“åº”ç»“æœã€‚</p><p>åœ¨<code>upload</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ–­ç‚¹ç»­ä¼ çš„é€»è¾‘ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è·å–åˆ‡ç‰‡çš„æ€»æ•°ï¼Œå¹¶è®¾ç½®<code>uploading</code>çŠ¶æ€ä¸º<code>true</code>æ¥ç¦ç”¨ä¸Šä¼ æŒ‰é’®ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>for</code>å¾ªç¯éå†æ‰€æœ‰åˆ‡ç‰‡ã€‚å¯¹äºæ¯ä¸ªåˆ‡ç‰‡ï¼Œæˆ‘ä»¬æ£€æŸ¥<code>uploadedChunks</code>æ•°ç»„ä¸­æ˜¯å¦å·²ç»åŒ…å«è¯¥ç´¢å¼•ï¼Œå¦‚æœä¸åŒ…å«ï¼Œåˆ™è¿›è¡Œä¸Šä¼ æ“ä½œã€‚</p><p>åœ¨ä¸Šä¼ åˆ‡ç‰‡ä¹‹åï¼Œæˆ‘ä»¬å°†å·²ä¸Šä¼ çš„åˆ‡ç‰‡ç´¢å¼•æ·»åŠ åˆ°<code>uploadedChunks</code>æ•°ç»„ï¼Œå¹¶ä½¿ç”¨<code>localStorage</code>ä¿å­˜å·²ä¸Šä¼ çš„åˆ‡ç‰‡ä¿¡æ¯ã€‚</p><p>æœ€åï¼Œåœ¨ä¸Šä¼ å®Œæ¯•åï¼Œæˆ‘ä»¬å°†<code>uploading</code>çŠ¶æ€è®¾ä¸º<code>false</code>ï¼Œå¹¶æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„åˆ‡ç‰‡ä¿¡æ¯ã€‚</p><blockquote><p>åœ¨å®ç°å¤§æ–‡ä»¶ä¸Šä¼ æ—¶è¦è€ƒè™‘æœåŠ¡å™¨ç«¯çš„å¤„ç†èƒ½åŠ›å’Œå­˜å‚¨ç©ºé—´ï¼Œä»¥åŠå®‰å…¨æ€§é—®é¢˜ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿éšœæ–­ç‚¹ç»­ä¼ çš„å‡†ç¡®æ€§ï¼Œåº”è¯¥å°½é‡é¿å…å¹¶å‘ä¸Šä¼ ç›¸åŒæ–‡ä»¶çš„æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨æ–‡ä»¶å”¯ä¸€æ ‡è¯†ç¬¦æˆ–ç”¨æˆ·ä¼šè¯æ ‡è¯†ç¬¦è¿›è¡ŒåŒºåˆ†ã€‚</p></blockquote><h2 id="å››ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼šåˆ‡ç‰‡ä¸‹è½½ä¸ä¸Šä¼ çš„åº”ç”¨åœºæ™¯"><a href="#å››ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼šåˆ‡ç‰‡ä¸‹è½½ä¸ä¸Šä¼ çš„åº”ç”¨åœºæ™¯" class="headerlink" title="å››ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼šåˆ‡ç‰‡ä¸‹è½½ä¸ä¸Šä¼ çš„åº”ç”¨åœºæ™¯"></a>å››ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼šåˆ‡ç‰‡ä¸‹è½½ä¸ä¸Šä¼ çš„åº”ç”¨åœºæ™¯</h2><h3 id="åå°ç®¡ç†ç³»ç»Ÿä¸­çš„æ–‡ä»¶ä¸‹è½½å’Œä¸Šä¼ ï¼š"><a href="#åå°ç®¡ç†ç³»ç»Ÿä¸­çš„æ–‡ä»¶ä¸‹è½½å’Œä¸Šä¼ ï¼š" class="headerlink" title="åå°ç®¡ç†ç³»ç»Ÿä¸­çš„æ–‡ä»¶ä¸‹è½½å’Œä¸Šä¼ ï¼š"></a>åå°ç®¡ç†ç³»ç»Ÿä¸­çš„æ–‡ä»¶ä¸‹è½½å’Œä¸Šä¼ ï¼š</h3><ul><li>æ–‡ä»¶ä¸‹è½½ï¼šåœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦ä¸‹è½½å¤§å‹æ–‡ä»¶ï¼Œå¦‚æŠ¥è¡¨ã€æ—¥å¿—æ–‡ä»¶ã€æ•°æ®åº“å¤‡ä»½ç­‰ã€‚é€šè¿‡å°†æ–‡ä»¶åˆ‡ç‰‡ä¸‹è½½ï¼Œå¯ä»¥æé«˜ä¸‹è½½é€Ÿåº¦å’Œç¨³å®šæ€§ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·ä¸­æ–­ä¸‹è½½å¹¶ä»ä¸­æ–­å¤„ç»§ç»­ä¸‹è½½ã€‚</li><li>æ–‡ä»¶ä¸Šä¼ ï¼šåå°ç®¡ç†ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦ä¸Šä¼ å¤§å‹æ–‡ä»¶ï¼Œå¦‚æ•°æ®å¯¼å…¥ã€æ–‡ä»¶å¤‡ä»½ç­‰ã€‚ä½¿ç”¨åˆ‡ç‰‡ä¸Šä¼ å¯ä»¥æé«˜ä¸Šä¼ æ•ˆç‡ï¼Œåˆ†æ‰¹ä¸Šä¼ æ–‡ä»¶åˆ‡ç‰‡ï¼Œå¹¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿäº†è§£ä¸Šä¼ çš„çŠ¶æ€ã€‚</li></ul><h3 id="å›¾ç‰‡-x2F-è§†é¢‘ä¸Šä¼ å’Œé¢„è§ˆï¼š"><a href="#å›¾ç‰‡-x2F-è§†é¢‘ä¸Šä¼ å’Œé¢„è§ˆï¼š" class="headerlink" title="å›¾ç‰‡&#x2F;è§†é¢‘ä¸Šä¼ å’Œé¢„è§ˆï¼š"></a>å›¾ç‰‡&#x2F;è§†é¢‘ä¸Šä¼ å’Œé¢„è§ˆï¼š</h3><ul><li>å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆï¼šåœ¨å›¾ç‰‡ä¸Šä¼ åœºæ™¯ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å¤šå¼ å›¾ç‰‡è¿›è¡Œä¸Šä¼ ã€‚é€šè¿‡åˆ‡ç‰‡ä¸Šä¼ ï¼Œå¯ä»¥åŠ å¿«å›¾ç‰‡ä¸Šä¼ é€Ÿåº¦ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ã€‚åŒæ—¶ï¼Œåœ¨ä¸Šä¼ å®Œæˆåï¼Œå¯ä»¥æä¾›é¢„è§ˆåŠŸèƒ½ï¼Œè®©ç”¨æˆ·å¯ä»¥ç«‹å³æŸ¥çœ‹ä¸Šä¼ çš„å›¾ç‰‡ã€‚</li><li>è§†é¢‘ä¸Šä¼ å’Œé¢„è§ˆï¼šå¯¹äºè¾ƒå¤§çš„è§†é¢‘æ–‡ä»¶ï¼Œåˆ‡ç‰‡ä¸Šä¼ å¯ä»¥ç¡®ä¿ä¸Šä¼ è¿‡ç¨‹å¯é ä¸”é«˜æ•ˆã€‚åŒæ—¶ï¼Œå¯ä»¥å®ç°ä¸Šä¼ è¿›åº¦çš„å®æ—¶å±•ç¤ºã€‚ä¸Šä¼ å®Œæˆåï¼Œé€šè¿‡åˆ‡ç‰‡ä¸‹è½½æŠ€æœ¯ï¼Œç”¨æˆ·å¯ä»¥æµç•…åœ°è§‚çœ‹è§†é¢‘ï¼Œæ— éœ€ç­‰å¾…æ•´ä¸ªæ–‡ä»¶ä¸‹è½½å®Œæˆã€‚</li></ul><h3 id="äº‘å­˜å‚¨å’Œäº‘ç›˜åº”ç”¨ä¸­çš„æ–‡ä»¶æ“ä½œï¼š"><a href="#äº‘å­˜å‚¨å’Œäº‘ç›˜åº”ç”¨ä¸­çš„æ–‡ä»¶æ“ä½œï¼š" class="headerlink" title="äº‘å­˜å‚¨å’Œäº‘ç›˜åº”ç”¨ä¸­çš„æ–‡ä»¶æ“ä½œï¼š"></a>äº‘å­˜å‚¨å’Œäº‘ç›˜åº”ç”¨ä¸­çš„æ–‡ä»¶æ“ä½œï¼š</h3><ul><li><p>æ–‡ä»¶åˆ†å—ä¸Šä¼ ï¼šäº‘å­˜å‚¨å’Œäº‘ç›˜åº”ç”¨é€šå¸¸éœ€è¦å¤„ç†å¤§é‡æ–‡ä»¶çš„ä¸Šä¼ ã€‚é€šè¿‡åˆ‡ç‰‡ä¸Šä¼ å¯ä»¥æé«˜ä¸Šä¼ é€Ÿåº¦å’Œç¨³å®šæ€§ï¼Œå¹¶å…è®¸ç”¨æˆ·ä¸­æ–­å¹¶ç»§ç»­ä¸Šä¼ ã€‚</p></li><li><p>æ–‡ä»¶åˆ†å—ä¸‹è½½ï¼šå½“ç”¨æˆ·éœ€è¦ä¸‹è½½äº‘å­˜å‚¨æˆ–äº‘ç›˜ä¸­çš„å¤§å‹æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ‡ç‰‡ä¸‹è½½æŠ€æœ¯ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦å¹¶æä¾›ä¸­æ–­æ¢å¤åŠŸèƒ½ã€‚</p></li><li><p>æ–‡ä»¶é¢„è§ˆå’Œåœ¨çº¿ç¼–è¾‘ï¼šé€šè¿‡å°†æ–‡ä»¶åˆ‡ç‰‡å¹¶è¿›è¡Œé¢„è§ˆï¼Œåœ¨çº¿ç¼–è¾‘ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ç”¨æˆ·å¯ä»¥åœ¨ä¸éœ€å®Œå…¨ä¸‹è½½æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œç›´æ¥é¢„è§ˆå’Œç¼–è¾‘æ–‡ä»¶ã€‚</p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•é¢˜æ•´ç†</title>
      <link href="/post/8fe9c4e1.html"/>
      <url>/post/8fe9c4e1.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ–‡ç« ç›®å½•"><a href="#æ–‡ç« ç›®å½•" class="headerlink" title="æ–‡ç« ç›®å½•"></a>æ–‡ç« ç›®å½•</h3><ul><li><a href="#1-%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96">1. å‡½æ•°æŸ¯é‡ŒåŒ–</a></li><li><a href="#2-get%E5%92%8Cpost%E7%9A%84%E5%B7%AE%E5%88%AB">2. getå’Œpostçš„å·®åˆ«</a></li><li><a href="#%E4%B8%8D%E7%86%9F-3-request-payload-%E5%92%8C-form-data%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB">@ä¸ç†Ÿ 3. request payload å’Œ form dataä¹‹é—´çš„åŒºåˆ«</a></li><li><a href="#4-httphttps%E5%8D%8F%E8%AE%AE%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D">4. HTTPã€HTTPsåè®®è¯¦ç»†ä»‹ç»</a><ul><li><a href="#1-http%E5%8D%8F%E8%AE%AE%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">1. HTTPåè®®è¯¦ç»†ä¿¡æ¯</a></li><li><a href="#2-http%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9">2. HTTPåè®®çš„ç‰¹ç‚¹</a></li><li><a href="#3-http%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">3. HTTPå·¥ä½œæµç¨‹</a></li><li><a href="#4-http%E5%8D%8F%E8%AE%AE%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F%E5%85%B18%E7%A7%8D">4. HTTPåè®®è¯·æ±‚æ–¹å¼(å…±8ç§)</a></li><li><a href="#5http%E5%8D%8F%E8%AE%AE%E7%8A%B6%E6%80%81%E7%A0%81">5.HTTPåè®®çŠ¶æ€ç </a></li><li><a href="#6https">6.HTTPS</a></li></ul></li><li><a href="#5v8%E5%BC%95%E6%93%8E%E7%9A%84ast%E6%98%AF%E4%BB%80%E4%B9%88">5.v8å¼•æ“çš„ASTæ˜¯ä»€ä¹ˆ</a></li><li><a href="#6bfc">6.BFC</a></li><li><a href="#7%E6%96%87%E6%A1%A3%E6%B5%81">7.æ–‡æ¡£æµ</a><ul><li><a href="#%E6%96%87%E6%A1%A3%E6%B5%81%E6%A0%87%E5%87%86%E6%B5%81%E6%99%AE%E9%80%9A%E6%B5%81">æ–‡æ¡£æµ(æ ‡å‡†æµã€æ™®é€šæµ)</a></li><li><a href="#%E6%B5%AE%E5%8A%A8%E6%B5%81">æµ®åŠ¨æµ</a></li><li><a href="#%E5%AE%9A%E4%BD%8D%E6%B5%81">å®šä½æµ</a></li></ul></li><li><a href="#8%E5%B8%83%E5%B1%80%E6%96%B9%E6%A1%88">8.å¸ƒå±€æ–¹æ¡ˆ</a></li><li><a href="#9%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%8E%E5%8F%91%E5%87%BA%E8%AF%B7%E6%B1%82%E5%88%B0%E6%8E%A5%E5%8F%97%E5%93%8D%E5%BA%94%E4%B8%AD%E9%97%B4%E8%BF%87%E7%A8%8B">9.æµè§ˆå™¨ä»å‘å‡ºè¯·æ±‚åˆ°æ¥å—å“åº”,ä¸­é—´è¿‡ç¨‹</a></li><li><a href="#10%E5%89%8D%E7%AB%AF%E5%AD%98%E5%82%A8">10.å‰ç«¯å­˜å‚¨</a><ul><li><a href="#%E4%BC%98%E5%8A%BF">ä¼˜åŠ¿</a></li><li><a href="#%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F">å­˜å‚¨æ–¹å¼</a><ul><li><a href="#%E5%AD%98%E5%82%A8%E7%B1%BB">å­˜å‚¨ç±»</a><ul><li><a href="#12-web-storagelocalstoragesessionstorage">1ã€2. Web Storage(localStorageã€sessionStorage)</a></li><li><a href="#3cookie">3.cookie</a></li><li><a href="#4-indexdb">4. IndexDB</a></li><li><a href="#5-web-sql">5. Web SQL</a></li></ul></li><li><a href="#%E7%BC%93%E5%AD%98%E7%B1%BB">ç¼“å­˜ç±»</a><ul><li><a href="#1-cache-storage">1. Cache Storage</a></li><li><a href="#2-application-cache">2. Application Cache</a></li></ul></li></ul></li></ul></li><li><a href="#11vite%E5%92%8Cwebpack%E7%9A%84%E5%8C%BA%E5%88%AB">11.viteå’Œwebpackçš„åŒºåˆ«</a></li><li><a href="#12%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%AD%98%E5%82%A8--localstorage">12.çŠ¶æ€ç®¡ç†å­˜å‚¨ , localstorage</a></li><li><a href="#%E4%B8%8D%E7%86%9F-13h5%E6%96%B0%E7%89%B9%E6%96%B0web-workerwebsocket">@ä¸ç†Ÿ 13.H5æ–°ç‰¹æ–°:Web Workerã€WebSocket</a></li><li><a href="#14vue-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E7%90%86%E8%A7%A3">14.Vue ç”Ÿå‘½å‘¨æœŸçš„ç†è§£</a><ul><li><a href="#vue2">vue2</a></li><li><a href="#vue3%E9%80%89%E9%A1%B9%E5%BC%8F">vue3é€‰é¡¹å¼</a></li><li><a href="#vue3%E7%BB%84%E5%90%88%E5%BC%8F">vue3ç»„åˆå¼</a></li></ul></li><li><a href="#15%E8%B0%88%E4%B8%80%E8%B0%88%E5%AF%B9-mvvm-%E7%9A%84%E7%90%86%E8%A7%A3">15.è°ˆä¸€è°ˆå¯¹ MVVM çš„ç†è§£ï¼Ÿ</a></li><li><a href="#16vue-%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8E%9F%E7%90%86">16.Vue å®ç°åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Ÿ</a><ul><li><a href="#vue2-1">vue2</a></li><li><a href="#vue3">vue3</a></li></ul></li><li><a href="#17vue2x-%E4%B8%AD%E5%A6%82%E4%BD%95%E6%A3%80%E6%B5%8B%E6%95%B0%E7%BB%84%E7%9A%84%E5%8F%98%E5%8C%96">17.Vue2.x ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„çš„å˜åŒ–ï¼Ÿ</a></li><li><a href="#%E4%B8%8D%E7%86%9F-18vue2x-%E5%92%8C-vuex3x-%E6%B8%B2%E6%9F%93%E5%99%A8%E7%9A%84-diff-%E7%AE%97%E6%B3%95%E5%88%86%E5%88%AB%E8%AF%B4%E4%B8%80%E4%B8%8B">ä¸ç†Ÿ@ 18.vue2.x å’Œ vuex3.x æ¸²æŸ“å™¨çš„ diff ç®—æ³•åˆ†åˆ«è¯´ä¸€ä¸‹ï¼Ÿ</a><ul><li><a href="#vue2-2">vue2</a></li><li><a href="#vue3-1">vue3</a></li></ul></li><li><a href="#19vue-%E7%9A%84%E8%B7%AF%E7%94%B1%E5%AE%9E%E7%8E%B0">19.Vue çš„è·¯ç”±å®ç°</a><ul><li><a href="#hashhistory%E8%B7%AF%E7%94%B1">HashHistoryè·¯ç”±</a></li><li><a href="#history%E8%B7%AF%E7%94%B1">historyè·¯ç”±</a></li><li><a href="#%E4%B8%A4%E7%A7%8D%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB">ä¸¤ç§è·¯ç”±æ¨¡å¼çš„åŒºåˆ«</a></li><li><a href="#%E4%B8%A4%E7%A7%8D%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F%E8%B7%B3%E8%BD%ACapi%E7%9A%84%E5%8C%BA%E5%88%AB">ä¸¤ç§è·¯ç”±æ¨¡å¼è·³è½¬APIçš„åŒºåˆ«</a></li></ul></li><li><a href="#20vuex%E5%92%8Cpina%E7%9A%84%E5%8C%BA%E5%88%AB">20.vuexå’Œpinaçš„åŒºåˆ«?</a><ul><li><a href="#vuex">vuex</a></li><li><a href="#pinia">pinia</a></li><li><a href="#vuex%E4%B8%8Epinia%E7%9A%84%E5%8C%BA%E5%88%AB">vuexä¸piniaçš„åŒºåˆ«</a></li></ul></li><li><a href="#21nexttick-%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%96%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88">21.<code>nextTick</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä»–çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#22%E7%83%AD%E6%9B%B4%E6%96%B0">22.çƒ­æ›´æ–°</a></li><li><a href="#23%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93ssr">23.æœåŠ¡ç«¯æ¸²æŸ“(SSR)</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93">ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“</a></li><li><a href="#%E4%BC%98%E7%82%B9">ä¼˜ç‚¹</a></li><li><a href="#%E7%BC%BA%E7%82%B9">ç¼ºç‚¹</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93%E7%9A%84%E6%96%B9%E5%BC%8F">æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ–¹å¼</a></li><li><a href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">åº”ç”¨åœºæ™¯</a></li></ul></li><li><a href="#24react-hooks">24.react-hooks</a><ul><li><a href="#1-usestate">1. useState()</a></li><li><a href="#2-usereducer">2. useReducer()</a></li><li><a href="#3-usecontext">3. useContext()</a></li><li><a href="#4-useeffect">4. useEffect()</a></li><li><a href="#5-usememo">5. useMemo()</a></li><li><a href="#6-usecallback">6. useCallBack()</a></li><li><a href="#7-useref">7. useRef()</a></li><li><a href="#8-%E8%87%AA%E5%AE%9A%E4%B9%89hooks">8. è‡ªå®šä¹‰hooks</a></li><li><a href="#9-react%E8%B7%AF%E7%94%B1hooks">9. Reactè·¯ç”±Hooks</a></li></ul></li><li><a href="#25redux">25.redux</a></li><li><a href="#26callapplybind%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%8C%BA%E5%88%AB">26.callã€applyã€bindçš„ä½œç”¨å’ŒåŒºåˆ«</a><ul><li><a href="#%E5%85%B1%E5%90%8C%E7%82%B9">å…±åŒç‚¹</a></li><li><a href="#%E4%B8%8D%E5%90%8C%E7%82%B9">ä¸åŒç‚¹</a></li><li><a href="#call%E6%96%B9%E6%B3%95">call()æ–¹æ³•</a></li><li><a href="#apply%E6%96%B9%E6%B3%95">apply()æ–¹æ³•</a></li><li><a href="#bind%E6%96%B9%E6%B3%95">bind()æ–¹æ³•</a></li></ul></li><li><a href="#27this%E6%8C%87%E5%90%91">27.thisæŒ‡å‘</a><ul><li><a href="#%E6%A6%82%E5%BF%B5">æ¦‚å¿µ</a></li><li><a href="#this%E7%9A%84%E6%8C%87%E5%90%91">thisçš„æŒ‡å‘</a></li></ul></li><li><a href="#28%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6">28.åƒåœ¾å›æ”¶æœºåˆ¶</a><ul><li><a href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E6%B3%95">æ ‡è®°æ¸…é™¤æ³•</a></li></ul></li><li><a href="#29eventloop%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF">29.EventLoop(äº‹ä»¶å¾ªç¯)</a></li><li><a href="#30%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E5%92%8C%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F">30.å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼</a><ul><li><a href="#%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2">å†…å­˜æ³„éœ²</a></li><li><a href="#%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA">å†…å­˜æº¢å‡º</a></li></ul></li></ul><h1 id="1-å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#1-å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="1. å‡½æ•°æŸ¯é‡ŒåŒ–"></a>1. å‡½æ•°æŸ¯é‡ŒåŒ–</h1><ul><li>ä½¿ç”¨ï¼šå›ºå®šéƒ¨åˆ†å‚æ•°ï¼Œè¿”å›æ¥æ”¶å‰©ä½™å‚æ•°çš„å‡½æ•°ï¼Œ</li><li>ç›®çš„ï¼šå»ºä¸€ä¸ªé’ˆå¯¹æ€§æ›´å¼ºçš„å‡½æ•°</li><li>æ ¸å¿ƒæ€æƒ³ï¼šæŠŠå¤šå‚æ•°ä¼ å…¥çš„å‡½æ•°ï¼Œæ‹†æˆä¸€ä¸ªä¸ªçš„å•å‚æ•°çš„å‡½æ•°ï¼Œå†…éƒ¨å†è¿”å›è°ƒç”¨ä¸‹ä¸€ä¸ªå•ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‚æ•°çš„å‡½æ•°ï¼Œä¾æ¬¡å¤„ç†å‰©ä½™å‚æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¯é‡ŒåŒ–å‰</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">log</span> = (<span class="params">date, project, message</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;date&#125;</span> <span class="subst">$&#123;project&#125;</span> <span class="subst">$&#123;message&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡º2022-07-29 xxxåå°ç®¡ç†ç³»ç»Ÿ mmæ¥å£å¼‚å¸¸</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">log</span>(<span class="string">&#x27;2022-07-29&#x27;</span>, <span class="string">&#x27;xxxåå°ç®¡ç†ç³»ç»Ÿ&#x27;</span>, <span class="string">&#x27;mmæ¥å£å¼‚å¸¸&#x27;</span>)) </span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¯é‡ŒåŒ–å</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">log</span> = (<span class="params">date</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">projectName</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;date&#125;</span> <span class="subst">$&#123;projectName&#125;</span> <span class="subst">$&#123;message&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‚£ä¸ªå‚æ•°å›ºå®šï¼Œåˆ™ä¼ å…¥åŒä¸€ä¸ªå‚æ•°ï¼Œåªæ”¹è¦å˜çš„å‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">log</span>(<span class="string">&#x27;2022-07-29&#x27;</span>)(<span class="string">&#x27;Aé¡¹ç›®&#x27;</span>)(<span class="string">&#x27;æ¥å£æŠ¥é”™&#x27;</span>)); </span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-getå’Œpostçš„å·®åˆ«"><a href="#2-getå’Œpostçš„å·®åˆ«" class="headerlink" title="2. getå’Œpostçš„å·®åˆ«"></a>2. getå’Œpostçš„å·®åˆ«</h1><ul><li>å‚æ•°ï¼šgeté€šè¿‡æ‹¼æ¥urlè¿›è¡Œå‚æ•°ä¼ é€’ï¼Œå‚æ•°å¯è§ï¼›posté€šè¿‡è¯·æ±‚å¤´ä¼ é€’å‚æ•°ï¼Œå‚æ•°ä¸å¯è§</li><li>æ•°æ®æºå¸¦é‡ï¼šgetè¯·æ±‚æºå¸¦çš„æ•°æ®ä¸è¶…è¿‡2~4kï¼Œ(æµè§ˆå™¨ä¸åŒï¼Œæºå¸¦é‡ä¸åŒï¼Œä½†ç›¸å·®ä¸å¤§)ï¼›postè¯·æ±‚æºå¸¦é‡æ ¹æ®é…ç½®æ–‡ä»¶è®¾å®šï¼Œæ— ä¸Šé™</li><li>åé€€é¡µé¢çš„ååº”ï¼š é¡µé¢åé€€ï¼Œgetè¯·æ±‚æ— å½±å“ï¼Œpostè¯·æ±‚éœ€è¦é‡æ–°æäº¤è¯·æ±‚</li><li>ç¼“å­˜æ€§ï¼šgetè¯·æ±‚å¯ä»¥ç¼“å­˜ï¼Œpostè¯·æ±‚ä¸å¯ç¼“å­˜</li><li>ä¼ è¾“é€Ÿåº¦ï¼šgetæ¯”postæ›´å¿«ã€‚(getäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›postäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…)</li><li>å®‰å…¨æ€§ï¼šåŸåˆ™ä¸Špostæ›´å®‰å…¨ï¼Œå› ä¸ºpostçš„æ•°æ®åœ¨urlä¸Šä¸å¯è§</li></ul><h1 id="ä¸ç†Ÿ-3-request-payload-å’Œ-form-dataä¹‹é—´çš„åŒºåˆ«"><a href="#ä¸ç†Ÿ-3-request-payload-å’Œ-form-dataä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="@ä¸ç†Ÿ 3. request payload å’Œ form dataä¹‹é—´çš„åŒºåˆ«"></a>@ä¸ç†Ÿ 3. request payload å’Œ form dataä¹‹é—´çš„åŒºåˆ«</h1><ul><li>FormDataå’ŒPayloadæ˜¯æµè§ˆå™¨ä¼ è¾“ç»™æ¥å£çš„ä¸¤ç§æ ¼å¼ï¼Œè¿™ä¸¤ç§æ–¹å¼æµè§ˆå™¨æ˜¯é€šè¿‡Content-Typeæ¥è¿›è¡ŒåŒºåˆ†çš„ã€‚</li><li>Content-Typeæ˜¯æŒ‡ HTTP è¯·æ±‚å‘é€ä¿¡æ¯è‡³æœåŠ¡å™¨æ—¶çš„å†…å®¹ç¼–ç ç±»å‹</li><li>RequestPayloadæ˜¯(HTTPè¯·æ±‚ä½“æ¨¡å¼)ï¼ŒFormDataæ˜¯(è¡¨å•è¯·æ±‚ä½“æ¨¡å¼)</li></ul><h1 id="4-HTTPã€HTTPsåè®®è¯¦ç»†ä»‹ç»"><a href="#4-HTTPã€HTTPsåè®®è¯¦ç»†ä»‹ç»" class="headerlink" title="4. HTTPã€HTTPsåè®®è¯¦ç»†ä»‹ç»"></a>4. HTTPã€HTTPsåè®®è¯¦ç»†ä»‹ç»</h1><h3 id="1-HTTPåè®®è¯¦ç»†ä¿¡æ¯"><a href="#1-HTTPåè®®è¯¦ç»†ä¿¡æ¯" class="headerlink" title="1. HTTPåè®®è¯¦ç»†ä¿¡æ¯"></a>1. HTTPåè®®è¯¦ç»†ä¿¡æ¯</h3><ul><li>HTTP(è¶…æ–‡æœ¬ä¼ è¾“åè®®)ï¼Œæ˜¯ä¸€ç§è¯¦ç»†è§„å®šäº†æµè§ˆå™¨å’Œä¸‡ç»´ç½‘æœåŠ¡å™¨ä¹‹é—´ç›¸äº’é€šä¿¡çš„è§„åˆ™ï¼Œé€šè¿‡å› ç‰¹ç½‘ä¼ é€ä¸‡ç»´ç½‘æ–‡æ¡£çš„æ•°æ®ä¼ è¾“åè®®</li><li>HTTPæ˜¯åŸºäºTCP&#x2F;IPçš„åº”ç”¨å±‚åè®®</li><li>HTTPä¸ä»…èƒ½åº”ç”¨äºç½‘é¡µæµè§ˆï¼Œåªè¦é€šä¿¡åŒæ–¹éƒ½éµå®ˆHTTPåè®®ï¼Œéƒ½èƒ½ä½¿ç”¨HTTPåè®®</li></ul><h3 id="2-HTTPåè®®çš„ç‰¹ç‚¹"><a href="#2-HTTPåè®®çš„ç‰¹ç‚¹" class="headerlink" title="2. HTTPåè®®çš„ç‰¹ç‚¹"></a>2. HTTPåè®®çš„ç‰¹ç‚¹</h3><ul><li>ç®€å•å¿«é€Ÿï¼šåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„</li><li>çµæ´»ï¼šå…è®¸ä¼ è¾“ä»»æ„ç±»å‹æ•°æ®å¯¹è±¡</li><li>æ— çŠ¶æ€ï¼šæŒ‡åè®®å¯¹äºäº‹ä»¶å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼Œç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯,åˆ™å®ƒå¿…é¡»é‡ä¼ ,è¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚</li><li>æ”¯æŒB&#x2F;Sã€C&#x2F;Sæ¨¡å¼</li></ul><h3 id="3-HTTPå·¥ä½œæµç¨‹"><a href="#3-HTTPå·¥ä½œæµç¨‹" class="headerlink" title="3. HTTPå·¥ä½œæµç¨‹"></a>3. HTTPå·¥ä½œæµç¨‹</h3><ul><li>æµè§ˆå™¨ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥</li><li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</li><li>æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œ</li><li>å‘æµè§ˆå™¨è¿”å›å“åº”</li><li>æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”ï¼Œæ¸²æŸ“é¡µé¢</li><li>æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥</li></ul><h3 id="4-HTTPåè®®è¯·æ±‚æ–¹å¼-å…±8ç§"><a href="#4-HTTPåè®®è¯·æ±‚æ–¹å¼-å…±8ç§" class="headerlink" title="4. HTTPåè®®è¯·æ±‚æ–¹å¼(å…±8ç§)"></a>4. HTTPåè®®è¯·æ±‚æ–¹å¼(å…±8ç§)</h3><blockquote><p>HTTP 1.0 å®šä¹‰äº†ä¸‰ç§(getã€postã€head)</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">get:è·å–,ä¸€èˆ¬ç”¨äºæŸ¥è¯¢æ•°æ®,åœ¨å¤„ç†æ•æ„Ÿæ•°æ®æ—¶ä¸ç”¨ï¼Œæˆ–è€…å‚æ•°åšåŠ å¯†å¤„ç†ã€‚è¯·æ±‚å‚æ•°æ‹¼æ¥åœ¨urlé‡Œ</span><br><span class="line"></span><br><span class="line">post:ä¸€èˆ¬ç”¨äºä¿®æ”¹æ•°æ®,æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ä»¥åˆ›å»ºæˆ–æ›´æ–°èµ„æºï¼Œä¾§é‡äºæ›´æ–°æ•°æ®ã€‚è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚bodyä¸­</span><br><span class="line"></span><br><span class="line">head:headæ–¹æ³•ä¸getæ–¹æ³•ç›¸åŒï¼Œä½†æ²¡æœ‰å“åº”ä½“ï¼Œä»…ä¼ è¾“çŠ¶æ€è¡Œå’Œæ ‡é¢˜éƒ¨åˆ†ã€‚è¿™å¯¹äºæ¢å¤ç›¸åº”å¤´éƒ¨ç¼–å†™çš„å…ƒæ•°æ®éå¸¸æœ‰ç”¨ï¼Œè€Œæ— éœ€ä¼ è¾“æ•´ä¸ªå†…å®¹ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>HTTP 1.1 æ–°å¢äº†6ç§(putã€deleteã€pacthã€optionsã€traceã€connect)</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">put:ä¸€èˆ¬ç”¨äºæ–°å¢æ•°æ®,æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ä»¥åˆ›å»ºæˆ–æ›´æ–°èµ„æºï¼Œä¾§é‡äºåˆ›å»ºæ•°æ®</span><br><span class="line"></span><br><span class="line">delete:ä¸€èˆ¬ç”¨äºåˆ é™¤æ•°æ®,ç”¨æ¥åˆ é™¤æŒ‡å®šçš„èµ„æºï¼Œå®ƒä¼šåˆ é™¤URIç»™å‡ºçš„ç›®æ ‡èµ„æºçš„æ‰€æœ‰å½“å‰å†…å®¹</span><br><span class="line"></span><br><span class="line">pacth:ç”¨äºèµ„æºçš„éƒ¨åˆ†å†…å®¹çš„æ›´æ–°ï¼›ä¼šåœ¨èµ„æºä¸å­˜åœ¨æ—¶å»åˆ›å»ºå®ƒ(æœ‰åˆ™ä¿®æ”¹ï¼Œæ— åˆ™æ·»åŠ )</span><br><span class="line"></span><br><span class="line">options:ç”¨æ¥æè¿°äº†ç›®æ ‡èµ„æºçš„é€šä¿¡é€‰é¡¹ï¼Œè¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å‘webæœåŠ¡å™¨å‘é€`*`çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§</span><br><span class="line"></span><br><span class="line">trace:ç”¨äºæ²¿ç€ç›®æ ‡èµ„æºçš„è·¯å¾„æ‰§è¡Œæ¶ˆæ¯ç¯å›æµ‹è¯•ï¼›å®ƒå›åº”æ”¶åˆ°çš„è¯·æ±‚ï¼Œä»¥ä¾¿å®¢æˆ·å¯ä»¥çœ‹åˆ°ä¸­é—´æœåŠ¡å™¨è¿›è¡Œäº†å“ªäº›ï¼ˆå‡è®¾ä»»ä½•ï¼‰è¿›åº¦æˆ–å¢é‡ã€‚</span><br><span class="line"></span><br><span class="line">connect:ç”¨æ¥å»ºç«‹åˆ°ç»™å®šURIæ ‡è¯†çš„æœåŠ¡å™¨çš„éš§é“ï¼›å®ƒé€šè¿‡ç®€å•çš„TCP / IPéš§é“æ›´æ”¹è¯·æ±‚è¿æ¥ï¼Œé€šå¸¸æ˜¯ä½¿ç”¨è§£ç çš„HTTPä»£ç†æ¥è¿›è¡ŒSSLç¼–ç çš„é€šä¿¡ï¼ˆHTTPSï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-HTTPåè®®çŠ¶æ€ç "><a href="#5-HTTPåè®®çŠ¶æ€ç " class="headerlink" title="5.HTTPåè®®çŠ¶æ€ç "></a>5.HTTPåè®®çŠ¶æ€ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">100~199: æä¾›ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">200~299: è¯·æ±‚è¢«æˆåŠŸæäº¤ã€‚</span><br><span class="line"></span><br><span class="line">300~399: å®¢æˆ·ç«¯è¢«é‡å®šå‘åˆ°å…¶ä»–èµ„æºã€‚</span><br><span class="line"></span><br><span class="line">400~499: è¯·æ±‚åŒ…å«æŸç§é”™è¯¯ã€‚</span><br><span class="line"></span><br><span class="line">500~599: æœåŠ¡å™¨æ‰§è¡Œè¯·æ±‚æ—¶é‡åˆ°é”™è¯¯ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-HTTPS"><a href="#6-HTTPS" class="headerlink" title="6.HTTPS"></a>6.HTTPS</h3><ul><li>ä¸httpçš„åŒºåˆ«ï¼šå®‰å…¨æ€§æ¯”httpé«˜ï¼Œæ˜¯HTTP çš„å®‰å…¨ç‰ˆ</li><li>ä¸»è¦ä½œç”¨ï¼šå»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ç¡®ä¿æ•°æ®çš„ä¼ è¾“ï¼Œç¡®ä¿ç½‘ç«™çš„çœŸå®æ€§</li><li>ä¼˜ç‚¹ï¼šç¡®ä¿æ•°æ®å‘é€åˆ°æ­£ç¡®çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¤§å¹…åº¦å¢åŠ äº†ä¸­é—´äººæ”»å‡»çš„æˆæœ¬</li><li>ç¼ºç‚¹ï¼šå¢å¤§äº†ä¸æœåŠ¡å™¨æ¡æ‰‹æ—¶é—´(å¤§çº¦å¢åŠ äº†50%)ï¼ŒSSLè¯ä¹¦éœ€è¦æ”¶è´¹</li></ul><h1 id="5-v8å¼•æ“çš„ASTæ˜¯ä»€ä¹ˆ"><a href="#5-v8å¼•æ“çš„ASTæ˜¯ä»€ä¹ˆ" class="headerlink" title="5.v8å¼•æ“çš„ASTæ˜¯ä»€ä¹ˆ"></a>5.v8å¼•æ“çš„ASTæ˜¯ä»€ä¹ˆ</h1><ul><li>V8å¼•æ“æ˜¯ä½¿ç”¨AST(æŠ½è±¡è¯­æ³•æ ‘)æ¥è§£æå’Œè½¬æ¢jsä»£ç çš„</li><li>ASTæ˜¯è§£æå’Œè½¬æ¢JavaScriptä»£ç çš„æ ‘çŠ¶ç»“æ„è¡¨ç¤ºï¼Œå®ƒæä¾›äº†ä¸€ç§ä¾¿æ·çš„æ–¹å¼æ¥åˆ†æã€ä¿®æ”¹å’Œè½¬æ¢ä»£ç ã€‚</li></ul><h1 id="6-BFC"><a href="#6-BFC" class="headerlink" title="6.BFC"></a>6.BFC</h1><ul><li>BFCæ˜¯å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æŠŠBFCçœ‹æˆä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨å†…çš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨å…ƒç´ </li><li>BFCçš„ç‰¹æ€§</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. BFCæ˜¯å—çº§å…ƒç´ ï¼Œåœ¨å‚ç›´æ–¹å‘ä¸Šä¾æ¬¡æ’åˆ—</span><br><span class="line">2. BFCæ˜¯ç‹¬ç«‹å®¹å™¨ï¼Œå†…éƒ¨å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨å…ƒç´ </span><br><span class="line">3. åŒä¸€ä¸ªBFCé‡Œé¢çš„ä¸¤ä¸ªç›’å­ï¼Œå¤–è¾¹è·ä¼šå‘ç”Ÿé‡å ï¼Œå¹¶å–æœ€å¤§å¤–è¾¹è·</span><br><span class="line">4. è®¡ç®—BFCé«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿè¦å‚ä¸è®¡ç®—</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºBFC</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. overflow:hidden      éšè—çš„å†…å®¹</span><br><span class="line">2. display:flex         è½¬å˜ä¸ºå¼¹æ€§ç›’å­ï¼Œå˜ç°ä¸ºå—çº§å…ƒç´ </span><br><span class="line">3. position:abssolute   ç»å¯¹å®šä½</span><br><span class="line">4. position:fixed       å›ºå®šå®šä½</span><br><span class="line">5. display:inline-flex  è½¬å˜ä¸ºå¼¹æ€§ç›’å­ï¼Œå˜ç°ä¸ºè¡Œå†…å—å…ƒç´ </span><br><span class="line">6. display:inline-block è½¬å˜ä¸ºè¡Œå†…å—å…ƒç´ </span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>BFCçš„ä½œç”¨ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. è§£å†³çˆ¶å…ƒç´ æœªè®¾ç½®é«˜åº¦ï¼Œå­å…ƒç´ æµ®åŠ¨é€ æˆçˆ¶å…ƒç´ é«˜åº¦å¡Œé™·çš„é—®é¢˜</span><br><span class="line">2. è§£å†³å­å…ƒç´ å¤–è¾¹è·é”™è¯¯çš„åŠ åˆ°çˆ¶å…ƒç´ ä¸Šçš„é—®é¢˜</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="7-æ–‡æ¡£æµ"><a href="#7-æ–‡æ¡£æµ" class="headerlink" title="7.æ–‡æ¡£æµ"></a>7.æ–‡æ¡£æµ</h1><p>CSS æœ‰ä¸‰ç§åŸºæœ¬çš„å®šä½æœºåˆ¶ï¼šæ™®é€šæµã€æµ®åŠ¨æµã€å®šä½æµã€‚</p><h3 id="æ–‡æ¡£æµ-æ ‡å‡†æµã€æ™®é€šæµ"><a href="#æ–‡æ¡£æµ-æ ‡å‡†æµã€æ™®é€šæµ" class="headerlink" title="æ–‡æ¡£æµ(æ ‡å‡†æµã€æ™®é€šæµ)"></a>æ–‡æ¡£æµ(æ ‡å‡†æµã€æ™®é€šæµ)</h3><ul><li>htmlçš„é»˜è®¤æ’ç‰ˆæ–¹å¼</li><li>ç‰¹ç‚¹ï¼šå—çº§å…ƒç´ ä¸Šä¸‹æ’åˆ—ï¼Œè¡Œå†…å—å…ƒç´ ã€è¡Œå†…å…ƒç´ å·¦å³æ’åˆ—</li></ul><h3 id="æµ®åŠ¨æµ"><a href="#æµ®åŠ¨æµ" class="headerlink" title="æµ®åŠ¨æµ"></a>æµ®åŠ¨æµ</h3><ul><li>è„±ç¦»æ ‡å‡†æµçš„æ’ç‰ˆæ–¹å¼ï¼Œä½¿ç”¨floatï¼šnone&#x2F;left&#x2F;rightå®ç°</li><li>ç‰¹ç‚¹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. æµ®åŠ¨åçš„å…ƒç´ åªæœ‰å±…å·¦ã€å±…å³ã€æ— ä¸‰ç§å±æ€§ï¼Œ</span><br><span class="line">2. æµ®åŠ¨åçš„å…ƒç´ å¯ä»¥è®¾ç½®å®½é«˜</span><br><span class="line">3. å…ƒç´ åªåœ¨çˆ¶å…ƒç´ å®½é«˜èŒƒå›´å†…æµ®åŠ¨</span><br><span class="line">4. æµ®åŠ¨åçš„å…ƒç´ ä¸å¯ä½¿ç”¨marginï¼š0 auto;</span><br><span class="line">5. å…ƒç´ æµ®åŠ¨åï¼Œåé¢çš„åŒçº§å…ƒç´ ä¼šå æ®ä»–åŸæœ¬çš„ä½ç½®</span><br><span class="line">6. å¦‚æœä¸¤ä¸ªæµ®åŠ¨çš„å…ƒç´ çš„å®½ä¹‹å’Œå°äºçˆ¶å…ƒç´ å®½ï¼Œå·¦å³æ’åˆ—</span><br><span class="line">7. å¦‚æœä¸¤ä¸ªæµ®åŠ¨çš„å…ƒç´ çš„å®½ä¹‹å’Œå¤§äºçˆ¶å…ƒç´ å®½ï¼Œä¸Šä¸‹æ’åˆ—</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å®šä½æµ"><a href="#å®šä½æµ" class="headerlink" title="å®šä½æµ"></a>å®šä½æµ</h3><ul><li>å®šä½åˆ†ä¸ºç›¸å¯¹å®šä½ã€ç»å¯¹å®šä½ã€å›ºå®šå®šä½ã€é™æ€å®šä½(æ–‡æ¡£æµé»˜è®¤å®šä½)</li><li>ç›¸å¯¹å®šä½ä¸è„±ç¦»æ–‡æ¡£æµï¼Œç»å¯¹å®šä½ã€å›ºå®šå®šä½ä¼šè„±ç¦»æ–‡æ¡£æµ</li><li>z-indexå±æ€§æ˜¯ä¸“é—¨æ§åˆ¶å®šä½æµå…ƒç´ çš„è¦†ç›–å…³ç³»</li></ul><h1 id="8-å¸ƒå±€æ–¹æ¡ˆ"><a href="#8-å¸ƒå±€æ–¹æ¡ˆ" class="headerlink" title="8.å¸ƒå±€æ–¹æ¡ˆ"></a>8.å¸ƒå±€æ–¹æ¡ˆ</h1><ol><li>å±…ä¸­å¸ƒå±€(æ°´å¹³å±…ä¸­ã€å‚ç›´å±…ä¸­ã€æ°´å¹³å‚ç›´å±…ä¸­)</li><li>åŒé£ç¿¼å¸ƒå±€(ä¾§è¾¹ä¸¤æ å®½åº¦å›ºå®šï¼Œä¸­é—´æ å®½åº¦è‡ªé€‚åº”)</li><li>åœ£æ¯å¸ƒå±€(ä¾§è¾¹ä¸¤æ å®½åº¦å›ºå®šï¼Œä¸­é—´æ å®½åº¦è‡ªé€‚åº”)</li><li>æ …æ ¼å¸ƒå±€</li></ol><h1 id="9-æµè§ˆå™¨ä»å‘å‡ºè¯·æ±‚åˆ°æ¥å—å“åº”-ä¸­é—´è¿‡ç¨‹"><a href="#9-æµè§ˆå™¨ä»å‘å‡ºè¯·æ±‚åˆ°æ¥å—å“åº”-ä¸­é—´è¿‡ç¨‹" class="headerlink" title="9.æµè§ˆå™¨ä»å‘å‡ºè¯·æ±‚åˆ°æ¥å—å“åº”,ä¸­é—´è¿‡ç¨‹"></a>9.æµè§ˆå™¨ä»å‘å‡ºè¯·æ±‚åˆ°æ¥å—å“åº”,ä¸­é—´è¿‡ç¨‹</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. ç”¨æˆ·è¾“å…¥urlï¼Œç”Ÿæˆhttpè¯·æ±‚</span><br><span class="line"></span><br><span class="line">2. è§£æåŸŸåï¼Œå¾—åˆ°IPåœ°å€ã€‚(æ ¹æ®urlåŸŸåä»æœ¬åœ°hostsæ–‡ä»¶æŸ¥æ‰¾æ˜¯å¦æœ‰æ˜ å°„IPï¼Œå¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œåˆ™å°†åŸŸåå‘é€ç»™ç”µè„‘æ‰€é…ç½®çš„DNSè¿›è¡ŒåŸŸåè§£æï¼Œå¾—åˆ°IPåœ°å€)</span><br><span class="line"></span><br><span class="line">3. å»ºç«‹TCPè¿æ¥(ä¸‰æ¬¡æ¡æ‰‹)</span><br><span class="line"></span><br><span class="line">4. å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚</span><br><span class="line"></span><br><span class="line">5. æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚</span><br><span class="line"></span><br><span class="line">6. servletå¤„ç†è¯·æ±‚</span><br><span class="line"></span><br><span class="line">7. å°†å“åº”ç»“æœå°è£…æˆ HTTP å“åº”çš„æ ¼å¼ï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œå…³é—­TCPè¿æ¥ï¼Œè¯·æ±‚å“åº”å®Œæˆ</span><br><span class="line"></span><br><span class="line">8. æµè§ˆå™¨æ”¶åˆ°å“åº”æ•°æ®ï¼Œè§£æå¹¶æ¸²æŸ“å“åº”é¡µé¢</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="10-å‰ç«¯å­˜å‚¨"><a href="#10-å‰ç«¯å­˜å‚¨" class="headerlink" title="10.å‰ç«¯å­˜å‚¨"></a>10.å‰ç«¯å­˜å‚¨</h1><h3 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><ol><li>æ–¹ä¾¿ç½‘é¡µåŠ è½½ï¼Œé¿å…äº†åœ¨å‘é€è¯·æ±‚æ”¶åˆ°å“åº”å‰çš„ç©ºç™½æœŸ</li><li>å‡å°‘å‘æœåŠ¡å™¨çš„è¯·æ±‚æ¬¡æ•°ï¼ŒåŠ å¿«æ¸²æŸ“é€Ÿåº¦</li><li>åœ¨ç½‘ç»œä¸ä½³æˆ–æ— ç½‘ç»œæ—¶ï¼Œä¹Ÿå¯ä»¥ç¦»çº¿æµè§ˆç½‘é¡µ</li></ol><h3 id="å­˜å‚¨æ–¹å¼"><a href="#å­˜å‚¨æ–¹å¼" class="headerlink" title="å­˜å‚¨æ–¹å¼"></a>å­˜å‚¨æ–¹å¼</h3><p>åˆ†ä¸ºå­˜å‚¨ç±»(cookieã€localStroageã€sessionStroage)ã€ç¼“å­˜ç±»(Cache Storageã€Application Cache)</p><h4 id="å­˜å‚¨ç±»"><a href="#å­˜å‚¨ç±»" class="headerlink" title="å­˜å‚¨ç±»"></a>å­˜å‚¨ç±»</h4><h5 id="1ã€2-Web-Storage-localStorageã€sessionStorage"><a href="#1ã€2-Web-Storage-localStorageã€sessionStorage" class="headerlink" title="1ã€2. Web Storage(localStorageã€sessionStorage)"></a>1ã€2. Web Storage(localStorageã€sessionStorage)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">  <span class="title class_">HTML5</span>æå‡ºçš„å­˜å‚¨æ–¹å¼ï¼Œå®¹é‡5M</span><br><span class="line"></span><br><span class="line">  ä¼˜ç‚¹ï¼š</span><br><span class="line">    <span class="number">1.</span> å…‹æœäº†cookieçš„é™åˆ¶ï¼ŒåŒæ—¶å­˜å‚¨ä¸€äº›è¦ä¸¥æ ¼æ§åˆ¶åœ¨å®¢æˆ·ç«¯ï¼Œä¸éœ€è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®</span><br><span class="line">    <span class="number">2.</span> æä¾›äº†é™¤cookieä¹‹å¤–çš„å­˜å‚¨ä¼šè¯é€”å¾„</span><br><span class="line">    <span class="number">3.</span> å­˜å‚¨å®¹é‡å¤§ï¼Œè·¨ä¼šè¯å­˜å‚¨æ•°æ®</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">``</span>js</span><br><span class="line">  <span class="variable language_">localStorage</span>ï¼š</span><br><span class="line">    <span class="number">1.</span> æ°¸ä¹…å­˜å‚¨ï¼Œé™¤éè‡ªåŠ¨åˆ é™¤</span><br><span class="line">    <span class="number">2.</span> ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’é€šä¿¡</span><br><span class="line">    <span class="number">3.</span> åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹ï¼Œå¤æ‚æ•°æ®ç±»å‹ä¼šè½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ä¿å­˜</span><br><span class="line">    <span class="number">4.</span> åº”ç”¨åœºæ™¯ï¼šé€‚åˆé•¿æœŸä¿å­˜åœ¨æœ¬åœ°çš„æ•°æ®</span><br><span class="line">    <span class="number">5.</span> æ“ä½œ<span class="variable language_">localStorage</span></span><br><span class="line">      <span class="comment">//è®¾ç½®localStorage,æœ‰åˆ™ä¿®æ”¹ï¼Œæ— åˆ™æ·»åŠ </span></span><br><span class="line">      <span class="comment">//å°†é”®å€¼å¯¹å­˜å‚¨åœ¨localStorageä¸­</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è·å–localStorage</span></span><br><span class="line">      <span class="keyword">var</span> value = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//åˆ é™¤localStorage</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ¸…ç©ºlocalStorage</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">``</span>js</span><br><span class="line">  <span class="variable language_">sessionStorage</span>ï¼š</span><br><span class="line">    <span class="number">1.</span> å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­æµè§ˆå™¨ï¼Œæ•°æ®æ¸…é™¤</span><br><span class="line">    <span class="number">2.</span> ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’é€šä¿¡</span><br><span class="line">    <span class="number">3.</span> åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹ï¼Œå¤æ‚æ•°æ®ç±»å‹ä¼šè½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ä¿å­˜</span><br><span class="line">    <span class="number">4.</span> åº”ç”¨åœºæ™¯ï¼šæ•æ„Ÿè´¦å·ã€ä¸€æ¬¡æ€§ç™»å½•</span><br><span class="line">    <span class="number">5.</span> æ“ä½œ<span class="variable language_">sessionStorage</span></span><br><span class="line">      <span class="comment">//è®¾ç½®localStorage,æœ‰åˆ™ä¿®æ”¹ï¼Œæ— åˆ™æ·»åŠ </span></span><br><span class="line">      <span class="comment">//å°†é”®å€¼å¯¹å­˜å‚¨åœ¨localStorageä¸­</span></span><br><span class="line">      <span class="variable language_">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è·å–localStorage</span></span><br><span class="line">      <span class="keyword">var</span> value = <span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//åˆ é™¤localStorage</span></span><br><span class="line">      <span class="variable language_">sessionStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ¸…ç©ºlocalStorage</span></span><br><span class="line">      <span class="variable language_">sessionStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-cookie"><a href="#3-cookie" class="headerlink" title="3.cookie"></a>3.cookie</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">  åŸºäº<span class="variable constant_">HTTP</span>åè®®çš„å­˜å‚¨æ–¹å¼ï¼Œæµè§ˆå™¨æ™®éæ”¯æŒï¼Œå®¹é‡4k</span><br><span class="line">  é™åˆ¶æ€§ï¼šéœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸè‡ªåŠ¨æ¸…é™¤ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œæµè§ˆå™¨å…³é—­å°±æ¸…é™¤</span><br><span class="line">  ä¼˜ç‚¹ï¼š</span><br><span class="line">    <span class="number">1.</span> å¯ä»¥æ§åˆ¶è¿‡æœŸæ—¶é—´ï¼Œæœ‰ä¸€å®šçš„å®‰å…¨ä¿éšœ</span><br><span class="line">    <span class="number">2.</span> å¯è¿›è¡Œæ‰©å±•ï¼Œå¯è·¨åŸŸå…±äº«</span><br><span class="line">    <span class="number">3.</span> é€šè¿‡åŠ å¯†ä¸å®‰å…¨ä¼ è¾“æŠ€æœ¯(<span class="variable constant_">SSL</span>)ï¼Œå¯é™ä½cookieè¢«ç ´è§£çš„é£é™©</span><br><span class="line">    <span class="number">4.</span> æœ‰è¾ƒé«˜çš„å…¼å®¹æ€§</span><br><span class="line">  ç¼ºç‚¹ï¼š</span><br><span class="line">    <span class="number">1.</span> æœ‰æ•°é‡å’Œé•¿åº¦é™åˆ¶ï¼Œæ¯ä¸ªcookieé•¿åº¦ä¸èƒ½è¶…è¿‡4kbï¼Œè¶…è¿‡éƒ¨åˆ†ä¼šè¢«æˆªæ‰</span><br><span class="line">    <span class="number">2.</span> è¯·æ±‚å¤´ä¸Šçš„æ•°æ®å®¹æ˜“è¢«æ‹¦æˆªæ”»å‡»</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">``</span>js</span><br><span class="line">  <span class="comment">//æ“ä½œcookie</span></span><br><span class="line">    <span class="comment">//è·å–cookieï¼š</span></span><br><span class="line">      <span class="comment">//è·å–æ‰€æœ‰cookie</span></span><br><span class="line">        <span class="keyword">var</span> cookies = <span class="variable language_">document</span>.<span class="property">cookie</span>;</span><br><span class="line">        <span class="comment">//è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½¢å¦‚&quot;cookie1=value1; cookie2=value2&quot;</span></span><br><span class="line">        <span class="comment">//ä½¿ç”¨splice(;)æ–¹æ³•å°†å­—ç¬¦ä¸²æˆªå¹¶å­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œæ–¹ä¾¿æå–æ•°æ®</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä¿®æ”¹cookieï¼šæœ‰åˆ™ä¿®æ”¹ï¼Œæ— åˆ™æ·»åŠ </span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;name=value; expires=expiration_date; path=path; domain=domain; secure&quot;</span>;</span><br><span class="line">    <span class="comment">//nameæ˜¯Cookieçš„åç§°ï¼Œvalueæ˜¯Cookieçš„å€¼ã€‚</span></span><br><span class="line">    <span class="comment">//expiresæ˜¯å¤±æ•ˆæ—¥æœŸï¼Œæ ¼å¼ä¸º&quot;Mon, 28 Jun 2023 13:24:25 GMT&quot;ã€‚</span></span><br><span class="line">    <span class="comment">//pathæ˜¯å¯è®¿é—®è¯¥Cookieçš„è·¯å¾„ï¼Œé»˜è®¤æ˜¯å½“å‰æ–‡ä»¶è·¯å¾„ã€‚</span></span><br><span class="line">    <span class="comment">//domainæ˜¯å¯è®¿é—®Cookieçš„åŸŸåï¼Œé»˜è®¤æ˜¯å½“å‰åŸŸåã€‚</span></span><br><span class="line">    <span class="comment">//secureæŒ‡å®šCookieåªåœ¨ä½¿ç”¨HTTPSè¿æ¥çš„æƒ…å†µä¸‹æ‰å‘é€ã€‚</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤cookieï¼š</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">cookie</span>=<span class="string">&quot;è¦åˆ é™¤çš„é”®å=éšä¾¿; expires=ä¸€ä¸ªè¿‡å»æ—¶é—´çš„GMTæ ¼å¼&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">``</span>js</span><br><span class="line">  <span class="variable language_">sessionStorage</span>ã€<span class="variable language_">localStorage</span>ä¸cookieçš„åŒºåˆ«</span><br><span class="line"></span><br><span class="line">  <span class="number">1.</span> å­˜å‚¨ç©ºé—´æ›´å¤§</span><br><span class="line"></span><br><span class="line">  <span class="number">2.</span> èŠ‚çœç½‘ç»œæµé‡</span><br><span class="line"></span><br><span class="line">  <span class="number">3.</span> å®‰å…¨æ€§æ›´é«˜ï¼Œä¸ç”¨æ‹…å¿ƒè¢«æˆªå–</span><br><span class="line"></span><br><span class="line">  <span class="number">4.</span> ä¸‰è€…éƒ½æ˜¯åªèƒ½å‚¨å­˜å­—ç¬¦ä¸²ï¼Œå¦‚æœç”¨<span class="title class_">WebStorage</span>(<span class="variable language_">sessionStorage</span>ã€<span class="variable language_">localStorage</span>)å­˜å‚¨å¯¹è±¡ï¼Œä¼šå‡ºç° [<span class="title class_">Object</span> <span class="title class_">Object</span>], å¯ä»¥ç”¨ <span class="title class_">JSON</span>.<span class="property">stringify</span> ä¸ <span class="title class_">JSON</span>.<span class="property">parse</span>æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line">  <span class="number">5.</span> <span class="variable language_">sessionStorage</span>ã€<span class="variable language_">localStorage</span>ä»¥(key,value)çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œcookieä»¥é”®<span class="number">1</span>=å€¼<span class="number">1</span>çš„å½¢å¼å­˜å‚¨æ•°æ®</span><br><span class="line"></span><br><span class="line">  <span class="number">6.</span> <span class="variable language_">sessionStorage</span>ã€<span class="variable language_">localStorage</span>æ˜¯ä½œä¸º<span class="variable language_">window</span>å¯¹è±¡çš„å±æ€§å­˜åœ¨ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<span class="variable language_">window</span>.<span class="property">sessionstorage</span>ã€<span class="variable language_">window</span>.<span class="property">sessionstorage</span>æ¥è®¿é—®</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="4-IndexDB"><a href="#4-IndexDB" class="headerlink" title="4. IndexDB"></a>4. IndexDB</h5><h5 id="5-Web-SQL"><a href="#5-Web-SQL" class="headerlink" title="5. Web SQL"></a>5. Web SQL</h5><h4 id="ç¼“å­˜ç±»"><a href="#ç¼“å­˜ç±»" class="headerlink" title="ç¼“å­˜ç±»"></a>ç¼“å­˜ç±»</h4><h5 id="1-Cache-Storage"><a href="#1-Cache-Storage" class="headerlink" title="1. Cache Storage"></a>1. Cache Storage</h5><h5 id="2-Application-Cache"><a href="#2-Application-Cache" class="headerlink" title="2. Application Cache"></a>2. Application Cache</h5><h1 id="11-viteå’Œwebpackçš„åŒºåˆ«"><a href="#11-viteå’Œwebpackçš„åŒºåˆ«" class="headerlink" title="11.viteå’Œwebpackçš„åŒºåˆ«"></a>11.viteå’Œwebpackçš„åŒºåˆ«</h1><ul><li>Viteå’ŒWebpackéƒ½æ˜¯ç°ä»£åŒ–çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œç”¨äºæ‰“åŒ…ã€ç¼–è¯‘ã€å‹ç¼©å’Œä¼˜åŒ–å‰ç«¯ä»£ç ã€‚</li><li>ä¸»è¦ç›®çš„æ˜¯å°†å¤šä¸ªæºæ–‡ä»¶ï¼ˆä¾‹å¦‚JavaScriptï¼ŒCSSå’ŒHTMLæ–‡ä»¶ï¼‰æ‰“åŒ…æˆæ›´å°‘çš„æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­åŠ è½½æ›´å¿«ï¼ŒåŒæ—¶æä¾›è®¸å¤šå…¶ä»–åŠŸèƒ½ã€‚</li><li>ç›¸åŒç‚¹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> éƒ½å¯ä»¥å¤„ç†å„ç§é™æ€èµ„æºï¼Œä¾‹å¦‚<span class="variable constant_">HTML</span>ã€<span class="variable constant_">CSS</span>ã€<span class="title class_">JavaScript</span>ã€å›¾ç‰‡å’Œå­—ä½“ç­‰</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> éƒ½æ”¯æŒæ¨¡å—åŒ–å¼€å‘ï¼Œå¯ä»¥ä½¿ç”¨<span class="variable constant_">ES</span> <span class="title class_">Modules</span>ã€<span class="title class_">CommonJS</span>ã€<span class="variable constant_">AMD</span>ç­‰æ¨¡å—è§„èŒƒ</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> éƒ½æ”¯æŒå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼ï¼Œå¯ä»¥å¯¹ä»£ç è¿›è¡Œå‹ç¼©ã€æ··æ·†å’Œä¼˜åŒ–ç­‰å¤„ç†</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> éƒ½æ”¯æŒæ’ä»¶æœºåˆ¶ï¼Œå¯ä»¥æ‰©å±•å’Œå®šåˆ¶æ„å»ºæµç¨‹</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> éƒ½å¯ä»¥å¤„ç†çƒ­æ¨¡å—æ›¿æ¢(<span class="variable constant_">HMR</span>)ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¿«é€Ÿæ›´æ–°ä¿®æ”¹çš„ä»£ç </span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ä¸åŒç‚¹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> æ„å»ºæ–¹å¼ä¸åŒ</span><br><span class="line">  <span class="title class_">Webpack</span>é‡‡ç”¨é™æ€ä¾èµ–å…³ç³»ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜å…¥å£æ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶ï¼Œå¹¶é€šè¿‡loaderå’Œpluginè¿›è¡Œé…ç½®ã€‚<span class="title class_">Webpack</span>çš„æ„å»ºæ–¹å¼æ¯”è¾ƒå¤æ‚</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Vite</span>é‡‡ç”¨åŠ¨æ€å¯¼å…¥æ–¹å¼ï¼Œé€šè¿‡æœ¬åœ°æœåŠ¡å™¨å®ç°å¿«é€Ÿæ„å»ºå’Œå¯åŠ¨ã€‚<span class="title class_">Vite</span>çš„æ„å»ºæ–¹å¼æ¯”è¾ƒç®€å•ï¼Œæ— éœ€é…ç½®å¤šä¸ªå…¥å£æ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶ï¼ŒåŒæ—¶å¯ä»¥è‡ªåŠ¨è¯†åˆ«æ¨¡å—ä¾èµ–å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> é€Ÿåº¦ä¸åŒ</span><br><span class="line">  <span class="title class_">Webpack</span>åœ¨å¤„ç†å¤§å‹é¡¹ç›®æ—¶ï¼Œæ„å»ºé€Ÿåº¦å¯èƒ½ä¼šå˜æ…¢ã€‚è¿™æ˜¯å› ä¸º<span class="title class_">Webpack</span>åœ¨è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œéœ€è¦å¤„ç†æ‰€æœ‰çš„æ¨¡å—ï¼ŒåŒ…æ‹¬æœªä½¿ç”¨çš„æ¨¡å—ã€‚è¿™ä½¿å¾—<span class="title class_">Webpack</span>çš„æ„å»ºé€Ÿåº¦å˜æ…¢</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Vite</span>é‡‡ç”¨äº†æŒ‰éœ€ç¼–è¯‘æ–¹å¼ï¼Œåªä¼šç¼–è¯‘å½“å‰é¡µé¢çš„ç›¸å…³æ¨¡å—ï¼Œè€Œä¸ä¼šå¤„ç†æœªä½¿ç”¨çš„æ¨¡å—ã€‚è¿™ä½¿å¾—<span class="title class_">Vite</span>çš„æ„å»ºé€Ÿåº¦æ›´å¿«ï¼Œå¯ä»¥å¿«é€Ÿå¯åŠ¨é¡¹ç›®å’Œè¿›è¡Œçƒ­æ›´æ–°</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> é€‚ç”¨èŒƒå›´ä¸åŒ</span><br><span class="line">  <span class="title class_">Webpack</span>é€‚ç”¨äºå¤§å‹å¤æ‚çš„<span class="title class_">Web</span>åº”ç”¨ç¨‹åºï¼Œå¯ä»¥å¤„ç†å„ç§ç±»å‹çš„é™æ€èµ„æºï¼Œå¹¶æä¾›äº†å¼ºå¤§çš„æ’ä»¶æœºåˆ¶ï¼Œå¯ä»¥æ»¡è¶³å„ç§å¤æ‚çš„æ„å»ºéœ€æ±‚</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Vite</span>é€‚ç”¨äºä¸­å°å‹<span class="title class_">Web</span>åº”ç”¨ç¨‹åºï¼Œä»¥åŠéœ€è¦å¿«é€Ÿå¯åŠ¨å’Œçƒ­æ›´æ–°çš„å¼€å‘åœºæ™¯ã€‚<span class="title class_">Vite</span>æä¾›äº†å¿«é€Ÿæ„å»ºå’Œå¯åŠ¨çš„èƒ½åŠ›ï¼Œå¯ä»¥è®©å¼€å‘è€…æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å¼€å‘</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æ€»ç»“</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>å¦‚æœéœ€è¦æ„å»ºå¤§å‹é¡¹ç›®æˆ–å¯¹æ¨¡å—åŒ–æ”¯æŒæœ‰è¾ƒé«˜è¦æ±‚ï¼Œé‚£ä¹ˆ<span class="title class_">Webpack</span>æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>è€Œå¦‚æœæ˜¯åœ¨å¼€å‘æ¨¡å¼ä¸‹éœ€è¦å¿«é€Ÿè¿­ä»£ï¼Œå¹¶ä¸”å¯¹æ€§èƒ½æœ‰è¦æ±‚ï¼Œé‚£ä¹ˆ<span class="title class_">Vite</span>åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="12-çŠ¶æ€ç®¡ç†å­˜å‚¨-localstorage"><a href="#12-çŠ¶æ€ç®¡ç†å­˜å‚¨-localstorage" class="headerlink" title="12.çŠ¶æ€ç®¡ç†å­˜å‚¨ , localstorage"></a>12.çŠ¶æ€ç®¡ç†å­˜å‚¨ , localstorage</h1><h1 id="ä¸ç†Ÿ-13-H5æ–°ç‰¹æ–°-Web-Workerã€WebSocket"><a href="#ä¸ç†Ÿ-13-H5æ–°ç‰¹æ–°-Web-Workerã€WebSocket" class="headerlink" title="@ä¸ç†Ÿ 13.H5æ–°ç‰¹æ–°:Web Workerã€WebSocket"></a>@ä¸ç†Ÿ 13.H5æ–°ç‰¹æ–°:Web Workerã€WebSocket</h1><ul><li>Web Worker</li><li>WebSocket</li></ul><h1 id="14-Vue-ç”Ÿå‘½å‘¨æœŸçš„ç†è§£"><a href="#14-Vue-ç”Ÿå‘½å‘¨æœŸçš„ç†è§£" class="headerlink" title="14.Vue ç”Ÿå‘½å‘¨æœŸçš„ç†è§£"></a>14.Vue ç”Ÿå‘½å‘¨æœŸçš„ç†è§£</h1><h3 id="vue2"><a href="#vue2" class="headerlink" title="vue2"></a>vue2</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="title function_">beforeCreate</span>()</span><br><span class="line">å®ä¾‹å®Œå…¨è¢«åˆ›å»ºä¹‹å‰ï¼Œä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span><br><span class="line"><span class="title function_">beforeCreate</span>()æ‰§è¡Œæ—¶ï¼Œdataå’Œmethodsä¸­çš„æ•°æ®è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> <span class="title function_">created</span>() </span><br><span class="line">åœ¨createdä¸­ï¼Œdataå’Œmethodséƒ½å·²ç»è¢«åˆå§‹åŒ–å¥½äº†</span><br><span class="line">å¦‚æœè¦è°ƒç”¨methodsä¸­çš„æ–¹æ³•ï¼Œæˆ–è€…æ“ä½œdataä¸­çš„æ•°æ®ï¼Œæœ€æ—©åªèƒ½åœ¨createdä¸­æ“ä½œ</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> <span class="title function_">beforeMount</span>()</span><br><span class="line">æ¨¡æ¿å·²ç»åœ¨å†…å­˜ä¸­ç¼–è¯‘å®Œæˆï¼Œä½†æ˜¯å°šæœªæŠŠæ¨¡æ¿æ¸²æŸ“åˆ°é¡µé¢ä¸­</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> <span class="title function_">mounted</span>()</span><br><span class="line">å†…å­˜ä¸­çš„æ¨¡æ¿å·²ç»çœŸå®çš„æŒ‚è½½åˆ°é¡µé¢ä¸­ï¼Œç”¨æˆ·å·²ç»å¯ä»¥çœ‹åˆ°æ¸²æŸ“å¥½çš„é¡µé¢</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> <span class="title function_">beforeUpdate</span>()</span><br><span class="line">å½“æ‰§è¡ŒbeforeUpdateçš„æ—¶å€™ï¼Œé¡µé¢ä¸­çš„æ˜¾ç¤ºçš„æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œä½†dataæ•°æ®æ˜¯æœ€æ–°çš„ï¼Œé¡µé¢å°šæœªå’Œæœ€æ–°çš„æ•°æ®ä¿æŒåŒæ­¥</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> <span class="title function_">updated</span>()</span><br><span class="line">updatedäº‹ä»¶æ‰§è¡Œçš„æ—¶å€™ï¼Œé¡µé¢å’Œdataæ•°æ®å·²ç»ä¿æŒåŒæ­¥äº†ï¼Œéƒ½æ˜¯æœ€æ–°çš„</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> <span class="title function_">beforeDestroy</span>() </span><br><span class="line">å®ä¾‹é”€æ¯å‰è°ƒç”¨vm.$destroy()æ—¶è§¦å‘ï¼Œå®ä¾‹è¢«é”€æ¯çš„å‰å¤•</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span> <span class="title function_">destroyed</span>()</span><br><span class="line">å®ä¾‹é”€æ¯å®Œæ¯•ï¼Œè¯¥é’©å­è¢«è°ƒç”¨åï¼Œå¯¹åº”<span class="title class_">Vue</span>å®ä¾‹çš„æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£ç»‘ï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨è¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿéƒ½è¢«é”€æ¯ã€‚ï¼ˆä»¥åé¡µé¢å°±æ— æ³•åŠ¨æ€æ›´æ–°æ•°æ®äº†ã€‚ä¹Ÿå°±æ˜¯è¯´æ— æ³•æ•°æ®é©±åŠ¨è§†å›¾ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>vue2å¸¸ç”¨çš„ç”Ÿå‘½é’©å­</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="title function_">mounted</span>(æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ):å‘é€ajaxè¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯</span><br><span class="line"><span class="number">2.</span> <span class="title function_">beforeDestroy</span>(æ‰§è¡Œä¸€äº›æ”¶å°¾å·¥ä½œ)ï¼šæ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å…³äºé”€æ¯vueå®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> é”€æ¯åå€ŸåŠ©<span class="title class_">Vue</span>å¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯ã€‚</span><br><span class="line"><span class="number">2.</span> é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”Ÿ<span class="variable constant_">DOM</span>äº‹ä»¶ä¾ç„¶æœ‰æ•ˆã€‚</span><br><span class="line"><span class="number">3.</span> ä¸€èˆ¬ä¸ä¼šåœ¨beforeDestroyæ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹äº†ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vue3é€‰é¡¹å¼"><a href="#vue3é€‰é¡¹å¼" class="headerlink" title="vue3é€‰é¡¹å¼"></a>vue3é€‰é¡¹å¼</h3><ul><li>vue3é€‰é¡¹APIï¼Œç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯è¢«æš´éœ²Vueå®ä¾‹ä¸Šçš„é€‰é¡¹ï¼Œåªéœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•å¹¶ä¸ºè¿™ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ç¼–å†™ä»£ç ã€‚</li><li>vue3é€‰é¡¹å¼APIç”Ÿå‘½å‘¨æœŸä¸vue2å¤§è‡´ç›¸åŒï¼ŒbeforeDestroy()ã€destroyed()æ”¹ä¸ºbeforeUnmount()ã€unmounted(),å®é™…ä¸Šä½œç”¨å’Œç”¨æ³•æ˜¯ä¸€æ ·çš„</li></ul><h3 id="vue3ç»„åˆå¼"><a href="#vue3ç»„åˆå¼" class="headerlink" title="vue3ç»„åˆå¼"></a>vue3ç»„åˆå¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> steup åˆ›å»ºå®ä¾‹å‰</span><br><span class="line"><span class="number">2.</span> onBeforeMount æŒ‚è½½<span class="variable constant_">DOM</span>å‰</span><br><span class="line"><span class="number">3.</span> onMounted æŒ‚è½½<span class="variable constant_">DOM</span>å</span><br><span class="line"><span class="number">4.</span> onBeforeUpdate æ›´æ–°ç»„ä»¶å‰</span><br><span class="line"><span class="number">5.</span> onUpdate æ›´æ–°ç»„ä»¶å</span><br><span class="line"><span class="number">6.</span> onBeforeUnmount å¸è½½é”€æ¯å‰</span><br><span class="line"><span class="number">7.</span> onUnmounted å¸è½½é”€æ¯å </span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æ€»ç»“</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ä¸vue2ã€vueé€‰é¡¹å¼æƒ³æ¯”ï¼Œå»æ‰äº†ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ<span class="title function_">API</span>(beforeCreateã€created)ï¼Œæ·»åŠ äº†setup</span><br><span class="line"><span class="number">2.</span> æ–¹æ³•åå‘ç”Ÿå˜åŒ–ï¼Œåç§°å‰å¤šäº†onï¼Œä¸­é—´ä½¿ç”¨é©¼å³°å¼å‘½å</span><br><span class="line"><span class="number">3.</span> å¸è½½ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼šonBeforeUnmount ã€onUnmounted</span><br><span class="line"><span class="number">4.</span> åŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå¯ä»¥è§¦å‘å¤šæ¬¡</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="15-è°ˆä¸€è°ˆå¯¹-MVVM-çš„ç†è§£ï¼Ÿ"><a href="#15-è°ˆä¸€è°ˆå¯¹-MVVM-çš„ç†è§£ï¼Ÿ" class="headerlink" title="15.è°ˆä¸€è°ˆå¯¹ MVVM çš„ç†è§£ï¼Ÿ"></a>15.è°ˆä¸€è°ˆå¯¹ MVVM çš„ç†è§£ï¼Ÿ</h1><ul><li>MVVMæ˜¯ Model-View-ViewModel çš„ç¼©å†™</li></ul><blockquote><p>Modelï¼šæ•°æ®æ¨¡å‹<br>Viewï¼šuiç»„ä»¶<br>ViewModelï¼šä¸€ä¸ªåŒæ­¥View å’Œ Modelçš„å¯¹è±¡ï¼Œè¿æ¥Modelå’ŒView</p></blockquote><ul><li>åœ¨MVVMæ¶æ„ä¸‹ï¼Œviewmodelé€šè¿‡åŒå‘æ•°æ®ç»‘å®šæŠŠmodelä¸viewè¿æ¥èµ·æ¥ï¼Œmodelä¸viewæ²¡æœ‰ç›´æ¥è”ç³»ï¼Œ</li><li>modelä¸viewä¹‹é—´çš„äº¤æ˜¯ç›¸äº’çš„ï¼Œå› æ­¤viewæ•°æ®çš„å˜åŒ–ä¼šåŒæ­¥åˆ°modelä¸­ï¼Œmodelæ•°æ®çš„å˜åŒ–ä¹Ÿä¼šç«‹å³ååº”åˆ°viewä¸Š</li><li>modelå’Œviewä¹‹é—´çš„åŒæ­¥å·¥ä½œæ˜¯å®Œå…¨è‡ªåŠ¨çš„ï¼Œæ— éœ€äººä¸ºæ“ä½œ</li></ul><h1 id="16-Vue-å®ç°åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Ÿ"><a href="#16-Vue-å®ç°åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Ÿ" class="headerlink" title="16.Vue å®ç°åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Ÿ"></a>16.Vue å®ç°åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Ÿ</h1><h3 id="vue2-1"><a href="#vue2-1" class="headerlink" title="vue2"></a>vue2</h3><ul><li>åœ¨ç»„ä»¶åˆ›å»ºæ—¶ï¼Œvueä¼šå¯¹å¯¹ç»„ä»¶çš„dataä¸­çš„æ¯ä¸ªå±æ€§è¿›è¡Œä»£ç†</li><li>å½“ç»„ä»¶ä¸­ä»»ä½•ä¸€ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œvueä¼šé€šè¿‡Object.defineProperty()æ–¹æ³•é‡æ–°å®šä¹‰è¯¥å±æ€§çš„setteræ–¹æ³•ï¼Œä»è€Œåœ¨å±æ€§è¢«é‡æ–°èµ‹å€¼æ—¶è§¦å‘å¯¹åº”çš„watheræ›´æ–°å¯¹åº”çš„DOMèŠ‚ç‚¹</li></ul><h3 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h3><ul><li>Vue3çš„åŒå‘æ•°æ®ç»‘å®šåº•å±‚ä½¿ç”¨äº†Proxy APIæ¥è¿›è¡Œä»£ç†ã€‚</li><li>åœ¨ç»„ä»¶åˆ›å»ºæ—¶ï¼ŒVue3ä¼šå¯¹ç»„ä»¶çš„dataä¸­çš„æ¯ä¸ªå±æ€§è¿›è¡Œä»£ç†ï¼Œä½¿ç”¨äº†Proxyä¸­çš„handlerä¸­çš„setæ–¹æ³•ï¼Œå½“ç»„ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘setæ–¹æ³•ï¼Œä»è€Œæ›´æ–°å¯¹åº”çš„DOMèŠ‚ç‚¹ã€‚</li></ul><h1 id="17-Vue2-x-ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„çš„å˜åŒ–ï¼Ÿ"><a href="#17-Vue2-x-ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„çš„å˜åŒ–ï¼Ÿ" class="headerlink" title="17.Vue2.x ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„çš„å˜åŒ–ï¼Ÿ"></a>17.Vue2.x ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„çš„å˜åŒ–ï¼Ÿ</h1><ul><li>é€šè¿‡vueé‡å†™åçš„7ä¸ªæ•°ç»„æ–¹æ³•(pushï¼Œpopï¼Œshiftï¼Œunshiftï¼Œsortï¼Œspliceï¼Œreverse)æ£€æµ‹æ•°ç»„çš„å˜åŒ–</li><li>vueå°†dataä¸­çš„æ•°ç»„ï¼Œè¿›è¡Œäº†åŸå‹é“¾é‡å†™ã€‚é€šè¿‡åŸå‹é“¾æŒ‡å‘äº†é‡æ–°å®šä¹‰åçš„æ•°ç»„æ–¹æ³•ï¼Œå½“è°ƒç”¨æ•°ç»„apiæ—¶ï¼Œå¯ä»¥é€šçŸ¥ä¾èµ–æ›´æ–°ã€‚å¦‚æœæ•°ç»„ä¸­åŒ…å«å¼•ç”¨ç±»å‹ï¼Œä¼šå¯¹æ•°ç»„å†…çš„å¼•ç”¨ç±»å‹å†æ¬¡ç›‘æ§</li></ul><h1 id="ä¸ç†Ÿ-18-vue2-x-å’Œ-vuex3-x-æ¸²æŸ“å™¨çš„-diff-ç®—æ³•åˆ†åˆ«è¯´ä¸€ä¸‹ï¼Ÿ"><a href="#ä¸ç†Ÿ-18-vue2-x-å’Œ-vuex3-x-æ¸²æŸ“å™¨çš„-diff-ç®—æ³•åˆ†åˆ«è¯´ä¸€ä¸‹ï¼Ÿ" class="headerlink" title="ä¸ç†Ÿ@ 18.vue2.x å’Œ vuex3.x æ¸²æŸ“å™¨çš„ diff ç®—æ³•åˆ†åˆ«è¯´ä¸€ä¸‹ï¼Ÿ"></a>ä¸ç†Ÿ@ 18.vue2.x å’Œ vuex3.x æ¸²æŸ“å™¨çš„ diff ç®—æ³•åˆ†åˆ«è¯´ä¸€ä¸‹ï¼Ÿ</h1><h3 id="vue2-2"><a href="#vue2-2" class="headerlink" title="vue2"></a>vue2</h3><h3 id="vue3-1"><a href="#vue3-1" class="headerlink" title="vue3"></a>vue3</h3><h1 id="19-Vue-çš„è·¯ç”±å®ç°"><a href="#19-Vue-çš„è·¯ç”±å®ç°" class="headerlink" title="19.Vue çš„è·¯ç”±å®ç°"></a>19.Vue çš„è·¯ç”±å®ç°</h1><ul><li>è·¯ç”±çš„åŸç†ï¼š é€šè¿‡æ”¹å˜URLï¼Œåœ¨ä¸é‡æ–°è¯·æ±‚é¡µé¢çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°é¡µé¢è§†å›¾</li><li>æœ‰ä¸¤ç§ï¼šHashHistoryè·¯ç”±ã€historyè·¯ç”±</li></ul><h3 id="HashHistoryè·¯ç”±"><a href="#HashHistoryè·¯ç”±" class="headerlink" title="HashHistoryè·¯ç”±"></a>HashHistoryè·¯ç”±</h3><ul><li>vueé»˜è®¤ä½¿ç”¨hashè·¯ç”±</li><li>hash(â€˜#â€™)çš„ä½œç”¨æ˜¯åŠ è½½urlä¸­æŒ‡ç¤ºçš„ç½‘é¡µçš„ä½ç½®</li><li>HashHistoryè·¯ç”±çš„ç‰¹ç‚¹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> è·¯ç”±åœ°å€ä¼šæœ‰#</span><br><span class="line"><span class="number">2.</span> <span class="string">`#`</span>åé¢çš„å†…å®¹ä¸ä¼šä¼ ç»™æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šé‡æ–°åˆ·æ–°é¡µé¢ï¼Œè·¯ç”±åˆ‡æ¢ä¹Ÿä¸ä¼šé‡æ–°åŠ è½½é¡µé¢</span><br><span class="line"><span class="number">3.</span> æ¯æ¬¡æ”¹å˜<span class="title function_">hash</span>(<span class="variable language_">window</span>.<span class="property">localtion</span>.<span class="property">hash</span>),éƒ½ä¼šåœ¨æµè§ˆå™¨å¢åŠ ä¸€ä¸ªå†å²è®°å½•</span><br><span class="line">  ä¸¾ä¾‹ï¼š</span><br><span class="line">  <span class="attr">http</span>:<span class="comment">//localhost:8080/#/a </span></span><br><span class="line">  <span class="comment">//å˜ä¸º å¦‚ä¸‹åœ°å€ï¼Œæµè§ˆå™¨è®¿é—®å†å²ä¸­ä¼šå¢åŠ ä¸€ä¸ªè®°å½•</span></span><br><span class="line">  <span class="attr">http</span>:<span class="comment">//localhost:8080/#/b </span></span><br><span class="line"><span class="number">4.</span> å¯ä»¥ä¸ºhashçš„æ”¹å˜æ·»åŠ ç›‘å¬äº‹ä»¶<span class="string">`window.addEventListener(&quot;hashchange&quot;,funcRef,false)`</span>ã€€ã€€</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>HashHistoryè·¯ç”±çš„ä¸¤ä¸ªæ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> hashHistory.<span class="title function_">push</span>() å°†è·¯ç”±æ·»åŠ åˆ°æµè§ˆå™¨è®¿é—®å†å²çš„æ ˆé¡¶,ä¹‹å‰çš„è·¯ç”±è¿˜å­˜åœ¨ï¼Œå¯ä»¥è¿”å›ä¹‹å‰è·¯ç”±</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> hashHistory.<span class="title function_">replice</span>()  å°†è·¯ç”±æ›¿æ¢æ‰å½“å‰è·¯ç”±ï¼Œå½“å‰è·¯ç”±ä¼šæˆä¸ºæœ€æ–°è·¯ç”±,ä¹‹å‰çš„è·¯ç”±ä¼šè¢«è¦†ç›–ï¼Œæ— æ³•è¿”å›ä¹‹å‰è·¯ç”±</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="historyè·¯ç”±"><a href="#historyè·¯ç”±" class="headerlink" title="historyè·¯ç”±"></a>historyè·¯ç”±</h3><ul><li><code>HIstory interface</code>æ˜¯æµè§ˆå™¨å†å²è®°å½•æ ˆæä¾›çš„æ¥å£ï¼Œé€šè¿‡back()ã€forward()ã€go()ç­‰æ–¹æ³•ï¼Œå¯ä»¥è¯»å–æµè§ˆå™¨å†å²è®°å½•æ ˆçš„ä¿¡æ¯ï¼Œè¿›è¡Œå„ç§è·³è½¬æ“ä½œ</li><li>historyè·¯ç”±åŸç†</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆ©ç”¨History interfaceåœ¨H5ä¸­æ–°å¢æ–¹æ³•pushState()ã€replaceState(),å¯¹æµè§ˆå™¨å†å²è®°å½•æ ˆè¿›è¡Œä¿®æ”¹</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ç‰¹ç‚¹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> historyè·¯ç”±æ¨¡å¼ï¼Œå®ç°å•é¡µé¢çš„urlä¸­æ²¡æœ‰#,å½“ç”¨æˆ·æ”¹å˜è·¯ç”±æ—¶ï¼Œä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚</span><br><span class="line"><span class="number">2.</span> ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥historyè·¯ç”±å®ç°æ–¹å¼éœ€è¦æœåŠ¡å™¨çš„æ”¯æŒï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„è·¯ç”±éƒ½å®šå‘åˆ°æ ¹é¡µé¢</span><br><span class="line"><span class="number">3.</span> åœ¨<span class="title class_">HTML5</span> <span class="title class_">History</span> çš„æ„é€ å‡½æ•°ä¸­ç›‘å¬ä½¿ç”¨<span class="title function_">popState</span>(<span class="variable language_">window</span>.<span class="property">onpopstate</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>historyè·¯ç”±çš„ä¸¤ä¸ªæ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stateObject:å½“æµè§ˆå™¨è·³è½¬åˆ°æ–°çš„çŠ¶æ€æ—¶ï¼Œå°†è§¦å‘Popstateäº‹ä»¶ï¼Œè¯¥äº‹ä»¶å°†æºå¸¦è¿™ä¸ªstateObjectå‚æ•°çš„å‰¯æœ¬</span></span><br><span class="line"><span class="comment">// title:æ‰€æ·»åŠ è®°å½•çš„æ ‡é¢˜</span></span><br><span class="line"><span class="comment">// url:æ‰€æ·»åŠ è®°å½•çš„url</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å’ŒhashHistory.push()åŠŸèƒ½ç›¸ä¼¼ï¼Œå°†è·¯ç”±æ·»åŠ åˆ°æµè§ˆå™¨è®¿é—®å†å²çš„æ ˆé¡¶,ä¹‹å‰çš„è·¯ç”±è¿˜å­˜åœ¨ï¼Œå¯ä»¥è¿”å›ä¹‹å‰è·¯ç”±</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">history</span>.<span class="title function_">pushState</span>(stateObject,title,url) </span><br><span class="line"></span><br><span class="line"><span class="comment">//å’ŒhashHistory.replace()åŠŸèƒ½ç›¸ä¼¼ï¼Œå°†è·¯ç”±æ›¿æ¢æ‰å½“å‰è·¯ç”±ï¼Œå½“å‰è·¯ç”±ä¼šæˆä¸ºæœ€æ–°è·¯ç”±,ä¹‹å‰çš„è·¯ç”±ä¼šè¢«è¦†ç›–ï¼Œæ— æ³•è¿”å›ä¹‹å‰è·¯ç”±</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">history</span>,<span class="title function_">replaceState</span>(stateObject,title,url)  </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸¤ç§è·¯ç”±æ¨¡å¼çš„åŒºåˆ«"><a href="#ä¸¤ç§è·¯ç”±æ¨¡å¼çš„åŒºåˆ«" class="headerlink" title="ä¸¤ç§è·¯ç”±æ¨¡å¼çš„åŒºåˆ«"></a>ä¸¤ç§è·¯ç”±æ¨¡å¼çš„åŒºåˆ«</h3><ol><li>historyæ¨¡å¼è®¾ç½®çš„æ–°çš„URLå¯ä»¥æ˜¯ä¸å½“å‰URLåŒæºçš„ä»»æ„URL<br>hashæ¨¡å¼åªå¯ä¿®æ”¹#åè¾¹çš„éƒ¨åˆ†ï¼Œæ•…åªå¯è®¾ç½®ä¸å½“å‰æ–‡æ¡£åŒæ–‡æ¡£çš„URL</li><li>historyæ¨¡å¼é€šè¿‡stateObjectå¯ä»¥æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°è®°å½•ä¸­<br>hashæ¨¡å¼åªå¯æ·»åŠ çŸ­å­—ç¬¦ä¸²</li><li>historyæ¨¡å¼å¯é¢å¤–è®¾ç½®titleå±æ€§åä¾›åç»­ä½¿ç”¨<br>hashæ¨¡å¼æ²¡æœ‰è¯¥åŠŸèƒ½</li><li>historyæ¨¡å¼ä¼šå°†URLä¿®æ”¹å¾—å°±å’Œæ­£å¸¸è¯·æ±‚åç«¯çš„URLä¸€æ ·ï¼Œå¦‚åç«¯æ²¡æœ‰é…ç½®å¯¹åº”çš„è·¯ç”±å¤„ç†ï¼Œåˆ™ä¼šè¿”å›404é”™è¯¯<br>hashæ¨¡å¼åªæ”¹å˜#åé¢çš„å†…å®¹ï¼Œè·³è½¬è·¯ç”±ä¸åˆ·æ–°é¡µé¢ï¼Œæ•…ä¸ä¼šå‘åç«¯å‘é€è¯·æ±‚</li></ol><h3 id="ä¸¤ç§è·¯ç”±æ¨¡å¼è·³è½¬APIçš„åŒºåˆ«"><a href="#ä¸¤ç§è·¯ç”±æ¨¡å¼è·³è½¬APIçš„åŒºåˆ«" class="headerlink" title="ä¸¤ç§è·¯ç”±æ¨¡å¼è·³è½¬APIçš„åŒºåˆ«"></a>ä¸¤ç§è·¯ç”±æ¨¡å¼è·³è½¬APIçš„åŒºåˆ«</h3><p>API</p><p>hashæ¨¡å¼</p><p>historyæ¨¡å¼</p><p>push</p><p>hashHistory.push()</p><p>window.history.pushState()</p><p>replice</p><p>hashHistory.replice()</p><p>window.history,replaceState()</p><p>go</p><p>window.history.go</p><p>window.history.go</p><p>back</p><p>window.history.go(-1)</p><p>window.history.go(-1)</p><p>forward</p><p>window.history.go(1)</p><p>window.history.go(1)</p><h1 id="20-vuexå’Œpinaçš„åŒºåˆ«"><a href="#20-vuexå’Œpinaçš„åŒºåˆ«" class="headerlink" title="20.vuexå’Œpinaçš„åŒºåˆ«?"></a>20.vuexå’Œpinaçš„åŒºåˆ«?</h1><h3 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h3><ul><li>æ ¸å¿ƒå±æ€§ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="attr">state</span>:å•ä¸€çŠ¶æ€æ ‘ï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„å…±äº«æ•°æ®</span><br><span class="line">   <span class="comment">//è°ƒç”¨æ–¹æ³•ï¼š</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.å…¨å±€æ•°æ®åç§°</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> <span class="attr">getters</span>:çŠ¶æ€è·å–ï¼Œç›¸å½“äº<span class="string">`state`</span>çš„è®¡ç®—å±æ€§,å…·æœ‰è¿”å›å€¼çš„æ–¹æ³•</span><br><span class="line">   <span class="comment">//è°ƒç”¨æ–¹æ³•ï¼š</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>.æ–¹æ³•å</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> <span class="attr">mutation</span>:è§¦å‘åŒæ­¥äº‹ä»¶ï¼Œç”¨äºä¿®æ”¹stateä¸­å­˜å‚¨çš„æ•°æ®</span><br><span class="line">   <span class="comment">//å»ºè®®é€šè¿‡mutationæ“ä½œstateä¸­çš„æ•°æ®ï¼Œè™½ç„¶æ“ä½œå¤æ‚ï¼Œä½†å¯ä»¥é›†ä¸­ç›‘æ§stateé‡Œæ‰€æœ‰æ•°æ®çš„å˜åŒ–</span></span><br><span class="line">   <span class="comment">//ç›´æ¥æ“ä½œstateï¼Œstateé‡Œçš„æ•°æ®æ˜¯æ— æ³•ç›‘æ§çš„</span></span><br><span class="line">   <span class="comment">//Mutationä¸­ä¸å¯ä»¥æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œå¦‚éœ€å¼‚æ­¥ï¼Œåœ¨Actionä¸­å¤„ç†</span></span><br><span class="line">   <span class="comment">//è°ƒç”¨æ–¹æ³•ï¼š</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;æ–¹æ³•å&#x27;</span>,å€¼)</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> <span class="attr">actions</span>:è§¦å‘å¼‚æ­¥äº‹ä»¶ï¼Œç”¨äºå¤„ç†å¼‚æ­¥ä»»åŠ¡çš„ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ç­‰</span><br><span class="line">   <span class="comment">//è°ƒç”¨æ–¹æ³•ï¼š</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;æ–¹æ³•å&#x27;</span>,å€¼)</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> <span class="attr">module</span>:å°†vuexè¿›è¡Œæ¨¡å—æ‹†åˆ†</span><br><span class="line">   <span class="comment">//æ¨¡å—åŒ–vuexï¼Œå¯ä»¥è®©æ¯ä¸€ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„stateã€mutationã€actionã€getters,ä½¿å¾—ç»“æ„éå¸¸æ¸…æ™°ï¼Œæ–¹ä¾¿ç®¡ç†</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æ€»ç»“</li></ul><ol><li>ä¿®æ”¹stateçŠ¶æ€å¿…é¡»é€šè¿‡mutations</li><li>mutationsåªèƒ½æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç±»ä¼¼ajaxã€å®šæ—¶å™¨ä¹‹ç±»çš„ä»£ç ä¸èƒ½åœ¨mutationsä¸­æ‰§è¡Œ</li><li>æ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œè¦é€šè¿‡actionsï¼Œç„¶åå°†æ•°æ®æäº¤ç»™mutationsæ‰å¯ä»¥å®Œæˆ</li><li>stateçš„çŠ¶æ€å³å…±äº«æ•°æ®å¯ä»¥åœ¨ç»„ä»¶ä¸­å¼•ç”¨</li><li>ç»„ä»¶ä¸­å¯ä»¥è°ƒç”¨action</li></ol><h3 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h3><ul><li>æ ¸å¿ƒå±æ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> stateï¼šç”¨æ¥å‚¨å­˜å…¨å±€çš„æ•°æ®</span><br><span class="line">   <span class="comment">//è®¿é—®stateï¼š</span></span><br><span class="line">   <span class="keyword">const</span> store=<span class="title function_">useStore</span>()</span><br><span class="line">   store.å˜é‡å</span><br><span class="line">   <span class="comment">//é‡ç½®stateï¼š</span></span><br><span class="line">   <span class="keyword">const</span> store=<span class="title function_">useStore</span>()</span><br><span class="line">   store.$reset()</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> getterï¼šç›‘è§†è®¡ç®—çŠ¶æ€çš„å˜åŒ–ï¼Œæœ‰ç¼“å­˜åŠŸèƒ½</span><br><span class="line">   <span class="comment">//Getter ç­‰åŒäº store çš„ state çš„è®¡ç®—å€¼</span></span><br><span class="line">   <span class="comment">//è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">   <span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line">   store.æ–¹æ³•å</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> actionï¼šä¿®æ”¹stateå†…çš„å…¨å±€çŠ¶æ€æ•°æ®</span><br><span class="line">   <span class="comment">//è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">   <span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line">   store.æ–¹æ³•å</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vuexä¸piniaçš„åŒºåˆ«"><a href="#vuexä¸piniaçš„åŒºåˆ«" class="headerlink" title="vuexä¸piniaçš„åŒºåˆ«"></a>vuexä¸piniaçš„åŒºåˆ«</h3><ul><li>Vuexå’ŒPiniaéƒ½æ˜¯Vue.jsçš„çŠ¶æ€ç®¡ç†åº“</li><li>åŒºåˆ«</li></ul><blockquote><ol><li>vuexæ˜¯vue.jså®˜æ–¹æä¾›çš„çŠ¶æ€ç®¡ç†åº“<code>&lt;br&gt;</code><br>piniaæ˜¯åŸºäºvue3ä¸”ä½¿ç”¨TSç¼–å†™çš„è½»é‡çº§çŠ¶æ€ç®¡ç†åº“</li><li>vuexæä¾›äº†æ›´å®Œæ•´ã€æ›´å¤æ‚çš„æ¥å£å’ŒåŠŸèƒ½é›†ï¼Œå¦‚æ¨¡å—ã€æ’ä»¶ç­‰<code>&lt;br&gt;</code><br>piniaåªæä¾›äº†ç‰‡æ®µå¼ç»„è£…storeç­‰æ ¸å¿ƒéœ€æ±‚</li><li>vuexç›¸å¯¹ç¨³å®šï¼Œæ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒå®Œå–„<code>&lt;br&gt;</code><br>piniaä¾§é‡äºTSé£æ ¼çš„å¼€å‘æ–¹å¼ï¼Œæœªæ¥å¯èƒ½ä¼šæä¾›æ›´å¥½çš„ç»´æŠ¤æ€§å’Œæ˜“è¯»æ€§</li></ol></blockquote><h1 id="21-nextTick-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä»–çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#21-nextTick-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä»–çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="21.nextTick çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä»–çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>21.<code>nextTick</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä»–çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h1><ul><li>vueä¸­DOMæ›´æ–°æ˜¯å¼‚æ­¥çš„</li><li>vueå®ç°å“åº”å¼ä¸æ˜¯æ•°æ®å‘ç”Ÿå˜åŒ–åï¼ŒDOMç«‹å³å˜åŒ–ï¼Œè€Œæ˜¯æŒ‰ä¸€å®šçš„ç­–ç•¥è¿›è¡ŒDOMæ›´æ–°çš„</li><li>ä½œç”¨</li></ul><blockquote><p>ç”¨äºä¸‹æ¬¡DOMæ›´æ–°å¾ªç¯ç»“æŸåæ‰§è¡Œå›è°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åä½¿ç”¨ <code>nextTick</code>ï¼Œåˆ™å¯ä»¥åœ¨å›è°ƒä¸­è·å–æ›´æ–°åçš„DOM</p></blockquote><ul><li>åº”ç”¨åœºæ™¯</li></ul><blockquote><ol><li>åœ¨Vueç”Ÿå‘½å‘¨æœŸçš„created()é’©å­å‡½æ•°è¿›è¡Œçš„DOMæ“ä½œä¸€å®šè¦æ”¾åœ¨Vue.nextTick()çš„å›è°ƒå‡½æ•°ä¸­<code>&lt;br&gt;</code><br>åŸå› :åœ¨created()é’©å­å‡½æ•°æ‰§è¡Œçš„æ—¶å€™DOM å…¶å®å¹¶æœªè¿›è¡Œä»»ä½•æ¸²æŸ“ï¼Œè€Œæ­¤æ—¶è¿›è¡ŒDOMæ“ä½œæ— å¼‚äºå¾’åŠ³ï¼Œæ‰€ä»¥æ­¤å¤„ä¸€å®šè¦å°†DOMæ“ä½œçš„ js ä»£ç æ”¾è¿›Vue.nextTick()çš„å›è°ƒå‡½æ•°ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯mounted()é’©å­å‡½æ•°ï¼Œå› ä¸ºè¯¥é’©å­å‡½æ•°æ‰§è¡Œæ—¶æ‰€æœ‰çš„DOMæŒ‚è½½å’Œæ¸²æŸ“éƒ½å·²å®Œæˆï¼Œæ­¤æ—¶åœ¨è¯¥é’©å­å‡½æ•°ä¸­è¿›è¡Œä»»ä½•DOMæ“ä½œéƒ½ä¸ä¼šæœ‰é—®é¢˜</li><li>åœ¨æ•°æ®å˜åŒ–åè¦æ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®æ”¹å˜è€Œæ”¹å˜çš„DOMç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œéƒ½åº”è¯¥æ”¾è¿›Vue.nextTick()çš„å›è°ƒå‡½æ•°ä¸­ã€‚<code>&lt;br&gt;</code></li><li>éœ€è¦åœ¨è§†å›¾æ›´æ–°åï¼ŒåŸºäºæ–°çš„è§†å›¾è¿›è¡Œæ“ä½œ</li></ol></blockquote><ul><li>å®ç°åŸç†</li></ul><blockquote><p><code>nextTick</code>ä¸»è¦æ˜¯ä½¿ç”¨äº†å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¤šæ¬¡è°ƒç”¨ <code>nextTick</code>ä¼šå°†æ–¹æ³•å­˜å…¥é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è¿™ä¸ªå¼‚æ­¥æ–¹æ³•æƒ…å†µé˜Ÿåˆ—</p></blockquote><h1 id="22-çƒ­æ›´æ–°"><a href="#22-çƒ­æ›´æ–°" class="headerlink" title="22.çƒ­æ›´æ–°"></a>22.çƒ­æ›´æ–°</h1><ul><li>å½“ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé¡µé¢ä¼šæ ¹æ®æ›´æ–°åçš„ä»£ç å‘ç”Ÿå˜åŒ–ï¼Œæ— éœ€é‡æ–°åŠ è½½é¡µé¢</li></ul><h1 id="23-æœåŠ¡ç«¯æ¸²æŸ“-SSR"><a href="#23-æœåŠ¡ç«¯æ¸²æŸ“-SSR" class="headerlink" title="23.æœåŠ¡ç«¯æ¸²æŸ“(SSR)"></a>23.æœåŠ¡ç«¯æ¸²æŸ“(SSR)</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="variable constant_">SSR</span>ï¼ˆserver side renderï¼‰æœåŠ¡ç«¯æ¸²æŸ“</span><br><span class="line"><span class="number">2.</span> <span class="variable constant_">CSR</span>ï¼ˆclient side renderï¼‰å®¢æˆ·ç«¯æ¸²æŸ“</span><br><span class="line"><span class="number">3.</span> <span class="variable constant_">SPA</span>ï¼ˆsingle page applicationï¼‰å•é¡µé¢åº”ç”¨</span><br><span class="line"><span class="number">4.</span> <span class="variable constant_">SEO</span>ï¼ˆsearch engine optimizationï¼‰æœç´¢å¼•æ“ä¼˜åŒ–</span><br><span class="line"><span class="number">5.</span> <span class="variable constant_">SSG</span>ï¼ˆ<span class="keyword">static</span> side generateï¼‰é¢„æ¸²æŸ“</span><br><span class="line"><span class="number">6.</span> <span class="variable constant_">AJAX</span>ï¼ˆ<span class="title class_">Asynchronous</span> <span class="title class_">Javascript</span> <span class="title class_">And</span> <span class="variable constant_">XML</span>ï¼‰åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„å±€éƒ¨æ•°æ®è¿›è¡Œæ›´æ–°</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“"></a>ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“</h3><blockquote><p>æœåŠ¡å™¨ç«¯å®Œæˆé¡µé¢çš„DOMç»“æœæ‹¼æ¥ï¼Œç„¶åå‘é€åˆ°æµè§ˆå™¨ï¼Œä¸ºå…¶ç»‘å®šçŠ¶æ€å’Œäº‹ä»¶ï¼Œæˆä¸ºå®Œå…¨å¯äº¤äº’çš„è¿‡ç¨‹</p></blockquote><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><blockquote><ol><li>å‰ç«¯è€—æ—¶å°‘ï¼Œå› ä¸ºåç«¯æ‹¼æ¥å®Œhtmlï¼Œå‰ç«¯åªéœ€ç›´æ¥æ¸²æŸ“å‡ºæ¥</li><li>æœ‰åˆ©äºSEOï¼Œå› ä¸ºåœ¨åç«¯æœ‰å®Œæ•´çš„htmlé¡µé¢ï¼Œæœ‰åˆ©äºçˆ¬è™«çˆ¬å–ä¿¡æ¯ï¼Œæ›´åˆ©äºSEO</li><li>é™ä½å ç”¨å®¢æˆ·ç«¯èµ„æºï¼Œå› ä¸ºè§£ææ¨¡æ¿çš„å·¥ä½œå®Œå…¨äº¤ç»™åç«¯ï¼Œå®¢æˆ·ç«¯åªéœ€è§£ææ ‡å‡†çš„htmlé¡µé¢å³å¯ï¼Œå¯¹å®¢æˆ·ç«¯çš„èµ„æºå ç”¨æ›´å°‘ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨ç«¯ï¼Œæ›´çœç”µ</li><li>åç«¯ç”Ÿæˆé™æ€åŒ–æ–‡ä»¶ï¼Œå¯ä»¥é™ä½æ•°æ®æŸ¥è¯¢æµªè´¹çš„æ—¶é—´ï¼Œå¯¹äºæ•°æ®å˜åŒ–ä¸å¤§çš„é¡µé¢éå¸¸é«˜æ•ˆ</li></ol></blockquote><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><blockquote><ol><li>ä¸åˆ©äºå‰åç«¯åˆ†ç¦»ï¼Œå¼€å‘æ•ˆç‡ä½</li><li>å ç”¨æœåŠ¡å™¨ç«¯èµ„æº</li></ol></blockquote><h3 id="æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ–¹å¼"><a href="#æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ–¹å¼" class="headerlink" title="æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ–¹å¼"></a>æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ–¹å¼</h3><blockquote><ol><li>JSPï¼ˆJavaServer Pagesï¼‰</li><li>express + ejs</li><li>express + react</li><li>vue + nuxt</li></ol></blockquote><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><ul><li>é€‚ç”¨äºå®¢æˆ·ç«¯æ¸²æŸ“çš„é¡¹ç›®</li></ul><blockquote><ol><li>ä¼ä¸šå†…éƒ¨é¡¹ç›®ï¼Œç®¡ç†å¹³å°è¿™ç±»ä¸éœ€è¦SEOçš„é¡¹ç›®ï¼Œä½¿ç”¨å®¢æˆ·ç«¯æ¸²æŸ“èƒ½èƒ½å¤Ÿæé«˜å¼€å‘æ•ˆç‡ï¼Œå‡å°‘æœåŠ¡å™¨èµ„æºå ç”¨ï¼›</li><li>å¼ºäº¤äº’é¡¹ç›®ï¼šå¯¹äºäº¤äº’æ¯”è¾ƒå¤šï¼Œæ•°æ®ä¸æ˜¯å¾ˆå›ºå®šçš„é¡¹ç›®ï¼Œä½¿ç”¨å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·æ›´ä¸´è¿‘äºåŸç”ŸAPPä½“éªŒï¼›</li></ol></blockquote><ul><li>é€‚ç”¨äºæœåŠ¡ç«¯æ¸²æŸ“çš„é¡¹ç›®</li></ul><blockquote><ol><li>å®˜ç½‘ã€åšå®¢ç½‘ç«™ã€è¥é”€ç±»ç½‘ç«™ï¼šè¿™äº›ç½‘ç«™å¯¹SEOå’Œé¦–å±æ¸²æŸ“é€Ÿåº¦æ›´åŠ æ³¨é‡ï¼Œæ‰€ä»¥æœåŠ¡ç«¯æ¸²æŸ“ä¼šæ˜¯è¾ƒå¥½çš„é€‰æ‹©ï¼›</li></ol></blockquote><h1 id="24-react-hooks"><a href="#24-react-hooks" class="headerlink" title="24.react-hooks"></a>24.react-hooks</h1><ul><li>ä»€ä¹ˆæ˜¯hooks</li></ul><blockquote><p>hooksæ„æ€æ˜¯é’©å­ï¼Œreact hookså°±æ˜¯ä¸€å †é’©å­å‡½æ•°</p></blockquote><ul><li>ä½œç”¨</li></ul><blockquote><p>å¯¹å‡½æ•°å‹è¿›è¡Œå¢å¼ºï¼Œè®©å‡½æ•°ç»„ä»¶å¯ä»¥å­˜å‚¨çŠ¶æ€ï¼Œå¯ä»¥ç”¨æœ‰å¤„ç†å‰¯ä½œç”¨çš„èƒ½åŠ›ï¼Œè®©å¼€å‘å¯ä»¥åœ¨ä¸ä½¿ç”¨ç±»ç»„ä»¶çš„iæƒ…å†µä¸‹ï¼Œå®ç°ç›¸åŒåŠŸèƒ½</p></blockquote><ul><li>å‰¯ä½œç”¨</li></ul><blockquote><ol><li>ä»£ç ä¸­åªè¦ä¸æ˜¯æŠŠæ•°æ®è½¬æ¢æˆè§†å›¾çš„ä»£ç ä»–å°±å±äºå‰¯ä½œç”¨</li><li>å‰¯ä½œç”¨ä»£ç ï¼šå‘é€ajaxè¯·æ±‚ï¼Œè·å–domï¼Œæ·»åŠ ç‚¹å‡»äº‹ä»¶</li><li>åœ¨ç±»å‹ç»„ä»¶ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°å»å¤„ç†å‰¯ä½œç”¨ï¼Œè€Œåœ¨è¿™äº›å‡½æ•°å‹ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨hookså»å¤„ç†è¿™äº›å‡½æ•°</li></ol></blockquote><ul><li>å¸¸è§çš„react hooks</li></ul><h3 id="1-useState"><a href="#1-useState" class="headerlink" title="1. useState()"></a>1. useState()</h3><blockquote><ul><li>ä½œç”¨ï¼šç”¨äºå‡½æ•°ç»„ä»¶å¼•å…¥çŠ¶æ€</li><li>useState()æ–¹æ³•å†…éƒ¨æ˜¯ä½¿ç”¨é—­åŒ…ä¿å­˜çŠ¶æ€æ•°æ®çš„</li><li>ä½¿ç”¨ç»†èŠ‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> æ¥æ”¶å”¯ä¸€çš„å‚æ•°å³çŠ¶æ€åˆå§‹å€¼ã€‚åˆå§‹å€¼å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹</span><br><span class="line"><span class="number">2.</span> è¿”å›å€¼ä¸ºæ•°ç»„ã€‚æ•°ç»„ä¸­å­˜å‚¨çŠ¶æ€å€¼å’Œæ›´æ”¹çŠ¶æ€å€¼çš„æ–¹æ³•ã€‚æ–¹æ³•åç§°çº¦å®šä»¥setå¼€å¤´ã€‚åé¢åŠ ä¸ŠçŠ¶æ€åç§° </span><br><span class="line"><span class="number">3.</span> æ–¹æ³•å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œç”¨ä»¥ä¿å­˜ä¸åŒçš„çŠ¶æ€å€¼</span><br><span class="line"><span class="number">4.</span> å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›ä»€ä¹ˆï¼Œåˆå§‹å€¼å°±æ˜¯ä»€ä¹ˆï¼Œå‡½æ•°åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨åœ¨åˆå§‹å€¼æ˜¯åŠ¨æ€å€¼çš„æƒ…å†µ</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><h3 id="2-useReducer"><a href="#2-useReducer" class="headerlink" title="2. useReducer()"></a>2. useReducer()</h3><blockquote><ul><li>ä½œç”¨ï¼šè®©å‡½æ•°ç»„ä»¶ä¿å­˜çŠ¶æ€</li></ul><blockquote><ul><li>ä½¿ç”¨æ–¹å¼å’Œruduxçš„reducerç›¸ä¼¼,çŠ¶æ€éƒ½è¢«ä¿å­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„åœ°æ–¹</li><li>ä½¿ç”¨ç»†èŠ‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯reducerå‡½æ•°ï¼Œæˆ‘ä»¬åˆ›å»ºreducerå‡½æ•°å»è¿›è¡Œå¯¹æ•°æ®çš„å¤„ç†ï¼Œ</span><br><span class="line">ç¬¬äºŒä¸ªå‚æ•°ä¸ºçŠ¶æ€çš„åˆå§‹å€¼</span><br><span class="line"></span><br><span class="line">å‡½æ•°çš„è¿”å›å€¼è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œé¢æœ‰ä¸¤ä¸ªå€¼ä¸€ä¸ªæ˜¯å­˜å‚¨çš„çŠ¶æ€ï¼Œç¬¬äºŒä¸ªæ˜¯è§¦å‘actionçš„dispatchæ–¹æ³•</span><br><span class="line"></span><br><span class="line">è‡ªå·±åˆ›å»ºçš„reducerå‡½æ•°æ¥å—ä¸¤ä¸ªå€¼ï¼Œä¸€ä¸ªæ˜¯å­˜å‚¨çš„çŠ¶æ€å¦å¤–ä¸€ä¸ªå°±æ˜¯è§¦å‘çš„action</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote></blockquote><h3 id="3-useContext"><a href="#3-useContext" class="headerlink" title="3. useContext()"></a>3. useContext()</h3><blockquote><ul><li>ä½œç”¨ï¼šåœ¨è·¨ç»„ä»¶å±‚çº§è·å–æ•°æ®æ—¶ç®€åŒ–ä»£ç </li></ul></blockquote><h3 id="4-useEffect"><a href="#4-useEffect" class="headerlink" title="4. useEffect()"></a>4. useEffect()</h3><blockquote><ul><li>ä½œç”¨ï¼šè®©å‡½æ•°å‹ç»„ä»¶æ‹¥æœ‰å¤„ç†å‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li></ul></blockquote><h3 id="5-useMemo"><a href="#5-useMemo" class="headerlink" title="5. useMemo()"></a>5. useMemo()</h3><blockquote><ul><li>ä½œç”¨ï¼šç±»ä¼¼Vueä¸­çš„è®¡ç®—å±æ€§ï¼Œå¯ä»¥æ£€æµ‹æŸä¸ªå€¼å¾—å˜åŒ–ï¼Œæ ¹æ®å˜åŒ–å€¼è®¡ç®—æ–°å€¼</li><li>useMemoä¼šç¼“å­˜è®¡ç®—ç»“æœã€‚å¦‚æœæ£€æµ‹å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå³ä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¹Ÿä¸ä¼šé‡æ–°è®¡ç®—</li><li>æœ‰åŠ©äºé¿å…åœ¨æ¯ä¸ªæ¸²æŸ“ä¸Šè¿›è¡Œæ˜‚è´µçš„è®¡ç®—</li></ul></blockquote><h3 id="6-useCallBack"><a href="#6-useCallBack" class="headerlink" title="6. useCallBack()"></a>6. useCallBack()</h3><blockquote><ul><li>ä½œç”¨ï¼šæ€§èƒ½ä¼˜åŒ–ï¼Œç¼“å­˜å‡½æ•°ï¼Œä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶å¾—åˆ°ç›¸åŒçš„å‡½æ•°å®ä¾‹</li><li>ä½¿ç”¨åœºæ™¯ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å½“å­ç»„ä»¶é€šçŸ¥çˆ¶ç»„ä»¶çš„æ—¶å€™ï¼Œå­ç»„ä»¶å†…éƒ¨çŠ¶æ€æ²¡æœ‰å‘ç”Ÿæ”¹å˜ä½†æ˜¯è¿˜æ˜¯è¿›è¡Œäº†é‡æ–°æ¸²æŸ“ï¼Œmemoè™½ç„¶è§£å†³</span><br><span class="line">å­ç»„ä»¶å†…éƒ¨çŠ¶æ€æ²¡æœ‰å˜é˜»æ­¢å­ç»„ä»¶é‡æ–°æ¸²æŸ“é—®é¢˜ï¼Œä½†æ˜¯å½“çˆ¶ç»„ä»¶çŠ¶æ€æ”¹å˜ï¼Œç»„ä»¶å‘ç”Ÿäº†é‡æ–°æ¸²æŸ“ï¼Œ</span><br><span class="line">æ–°æ¸²æŸ“è¿‡åæ¯ä¸€æ¬¡ç”Ÿæˆçš„æ”¹å˜çŠ¶æ€çš„å‡½æ•°çš„å®ä¾‹éƒ½å˜äº†ï¼Œå¯¼è‡´ä¼ é€’ç»™å­ç»„ä»¶çš„æ–¹æ³•ä¸­çš„å®ä¾‹å˜äº†ï¼Œ</span><br><span class="line">ä¼ å…¥çš„å‡½æ•°å®ä¾‹æ”¹å˜ï¼Œå­ç»„ä»¶å°±ä¼šè®¤ä¸ºç»„ä»¶å†…éƒ¨çš„çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œä»–å°±ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚è§£å†³è¿™</span><br><span class="line">é—®é¢˜çš„æ–¹æ³•å°±æ˜¯è®©ä¼ ç»™å­ç»„ä»¶çš„å‡½æ•°å®ä¾‹éƒ½æ˜¯åŒä¸€ä¸ªè¿™é‡Œå°±è¦ç”¨åˆ°<span class="title function_">useCallBack</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><h3 id="7-useRef"><a href="#7-useRef" class="headerlink" title="7. useRef()"></a>7. useRef()</h3><blockquote><ul><li>ä½œç”¨ï¼šè·å–domå…ƒç´ å¯¹è±¡,ä¿å­˜æ•°æ®ï¼ˆè·¨ç»„ä»¶å‘¨æœŸï¼‰</li></ul></blockquote><h3 id="8-è‡ªå®šä¹‰hooks"><a href="#8-è‡ªå®šä¹‰hooks" class="headerlink" title="8. è‡ªå®šä¹‰hooks"></a>8. è‡ªå®šä¹‰hooks</h3><blockquote><ul><li>è‡ªå®šä¹‰hookæ˜¯æ ‡å‡†çš„å°è£…å’Œå…±äº«é€»è¾‘çš„æ–¹å¼</li><li>è‡ªå®šä¹‰hookæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥useå¼€å¤´</li><li>è‡ªå®šä¹‰hookå…¶å®å°±æ˜¯é€»è¾‘å’Œå†…ç½®Hookçš„ç»„åˆ</li></ul></blockquote><h3 id="9-Reactè·¯ç”±Hooks"><a href="#9-Reactè·¯ç”±Hooks" class="headerlink" title="9. Reactè·¯ç”±Hooks"></a>9. Reactè·¯ç”±Hooks</h3><ul><li>åŒ…å«äº†å››ä¸ªé’©å­å‡½æ•°</li></ul><blockquote><p>useHistory()<br>useLocation()<br>useRouteMatch()<br>useParams()</p></blockquote><ul><li>ä½œç”¨ï¼šè·å–ç›¸å…³çš„è·¯ç”±ä¿¡æ¯</li></ul><h1 id="25-redux"><a href="#25-redux" class="headerlink" title="25.redux"></a>25.redux</h1><ol><li>ç›¸å½“äºvueä¸­çš„vuex</li><li>redux æ˜¯ä¸€ä¸ªç‹¬ç«‹ä¸“é—¨ç”¨äºåšçŠ¶æ€ç®¡ç†çš„ JS åº“(ä¸æ˜¯ react æ’ä»¶åº“)</li><li>å®ƒå¯ä»¥ç”¨åœ¨ react, angular, vue ç­‰é¡¹ç›®ä¸­, ä½†åŸºæœ¬ä¸ react é…åˆä½¿ç”¨</li><li>ä½œç”¨: é›†ä¸­å¼ç®¡ç† react åº”ç”¨ä¸­å¤šä¸ªç»„ä»¶å…±äº«çš„çŠ¶æ€</li><li>æ ¸å¿ƒæ¦‚å¿µ</li></ol><blockquote><ul><li>Store</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> åœ¨ redux é‡Œé¢ï¼Œåªæœ‰ä¸€ä¸ª<span class="title class_">Store</span>ï¼Œæ•´ä¸ªåº”ç”¨éœ€è¦ç®¡ç†çš„æ•°æ®éƒ½åœ¨è¿™ä¸ª<span class="title class_">Store</span>é‡Œé¢ã€‚</span><br><span class="line"><span class="number">2.</span> ä¸èƒ½ç›´æ¥æ”¹å˜<span class="title class_">Store</span>çš„æ•°æ®ï¼Œåªèƒ½é€šè¿‡è¿”å›ä¸€ä¸ªæ–°çš„<span class="title class_">Store</span>å»æ›´æ”¹å®ƒã€‚</span><br><span class="line"><span class="number">3.</span> reduxæä¾›äº†ä¸€ä¸ª<span class="title function_">createStore</span>()æ–¹æ³•æ¥åˆ›å»ºstate</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>action</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è§†å›¾å±‚å‘èµ·çš„ä¸€ä¸ªæ“ä½œ,é€šè¿‡actionæ”¹å˜storeå†…çš„æ•°æ®</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>Reducer</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½œç”¨ï¼šè°ƒç”¨actioné‡Œçš„æ–¹æ³•</span><br><span class="line">åœ¨reduxé‡Œé¢ï¼Œstore.<span class="title function_">dispatch</span>()æ˜¯ <span class="title class_">View</span>å‘å‡º <span class="title class_">Action</span> çš„å”¯ä¸€æ–¹æ³•</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><h1 id="26-callã€applyã€bindçš„ä½œç”¨å’ŒåŒºåˆ«"><a href="#26-callã€applyã€bindçš„ä½œç”¨å’ŒåŒºåˆ«" class="headerlink" title="26.callã€applyã€bindçš„ä½œç”¨å’ŒåŒºåˆ«"></a>26.callã€applyã€bindçš„ä½œç”¨å’ŒåŒºåˆ«</h1><h3 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h3><ul><li>éƒ½å¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘</li></ul><h3 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h3><ol><li>callå’Œapplyä¼šè°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¸”æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘ã€‚</li><li>callå’Œapplyä¼ é€’çš„å‚æ•°ä¸ä¸€æ ·ï¼Œcallä¼ é€’å‚æ•°arg1,arg2â€¦å½¢å¼applyå¿…é¡»æ•°ç»„å½¢å¼[arg]</li><li>bindä¸å›è°ƒç”¨å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘ã€‚</li></ol><h3 id="call-æ–¹æ³•"><a href="#call-æ–¹æ³•" class="headerlink" title="call()æ–¹æ³•"></a>call()æ–¹æ³•</h3><ol><li>æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘,åŒæ—¶è°ƒç”¨è¯¥å‡½æ•°</li><li>è¯­æ³•ï¼š</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fun.<span class="title function_">call</span>(thisArg,arg1,arg2,...)</span><br><span class="line"><span class="comment">//thisArgä¸ºæƒ³è¦æŒ‡å‘çš„å¯¹è±¡ï¼Œarg1,arg2ä¸ºå‚æ•°</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>åº”ç”¨åœºæ™¯ï¼šå®ç°ç»§æ‰¿</li></ol><h3 id="apply-æ–¹æ³•"><a href="#apply-æ–¹æ³•" class="headerlink" title="apply()æ–¹æ³•"></a>apply()æ–¹æ³•</h3><ol><li>æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘,åŒæ—¶è°ƒç”¨è¯¥å‡½æ•°</li><li>è¯­æ³•</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">un.<span class="title function_">apply</span>(thisArg,[argsArray])</span><br><span class="line"><span class="comment">//thisArg:åœ¨funå‡½æ•°å…è®¸æ—¶æŒ‡å®šçš„thiså€¼</span></span><br><span class="line"><span class="comment">//argsArray:ä¼ é€’çš„å€¼ï¼Œå‚æ•°å¿…é¡»æ”¾åœ¨æ•°ç»„é‡Œé¢</span></span><br><span class="line"><span class="comment">//è¿”å›å€¼å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>åº”ç”¨åœºæ™¯ï¼šæ±‚æ•°ç»„ä¸­æœ€å¤§å€¼</li></ol><h3 id="bind-æ–¹æ³•"><a href="#bind-æ–¹æ³•" class="headerlink" title="bind()æ–¹æ³•"></a>bind()æ–¹æ³•</h3><ol><li>æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘,ä¸ä¼šè°ƒç”¨è¯¥å‡½æ•°</li><li>è¯­æ³•</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fun.<span class="title function_">bind</span>(thisArg,arg1,arg2,...)</span><br><span class="line"><span class="comment">//thisArg:åœ¨funå‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„thiså€¼</span></span><br><span class="line"><span class="comment">//arg1,arg2:ä¼ é€’çš„å…¶ä»–å‚æ•°</span></span><br><span class="line"><span class="comment">//è¿”å›ç”±æŒ‡å®šçš„thiså€¼å’Œåˆå§‹åŒ–å‚æ•°æ”¹é€ çš„åŸå‡½æ•°æ‹·è´</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>åº”ç”¨åœºæ™¯ï¼šæœ‰çš„å‡½æ•°æˆ‘ä»¬ä¸éœ€è¦ç«‹å³è°ƒç”¨ï¼Œä½†æ˜¯åˆéœ€è¦æ”¹å˜è¿™ä¸ªå‡½æ•°çš„thisæŒ‡å‘ï¼Œæ­¤æ—¶ç”¨bindå†åˆé€‚ä¸è¿‡äº†</li></ol><h1 id="27-thisæŒ‡å‘"><a href="#27-thisæŒ‡å‘" class="headerlink" title="27.thisæŒ‡å‘"></a>27.thisæŒ‡å‘</h1><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><blockquote><p>åœ¨jsä¸­ï¼Œthisæ˜¯ä¸€ä¸ªæŒ‡é’ˆå‹å˜é‡ï¼Œå®ƒåŠ¨æ€æŒ‡å‘å½“å‰å‡½æ•°çš„è¿è¡Œç¯å¢ƒ<br>åœ¨ä¸åŒçš„åœºæ™¯ä¸­è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°ï¼Œthisçš„æŒ‡å‘ä¹Ÿå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œ<br>æ°¸è¿œæŒ‡å‘å…¶æ‰€åœ¨å‡½æ•°çš„çœŸå®è°ƒç”¨è€…ï¼›å¦‚æœæ²¡æœ‰è°ƒç”¨è€…ï¼Œå°±æŒ‡å‘å…¨å±€å¯¹è±¡window</p></blockquote><h3 id="thisçš„æŒ‡å‘"><a href="#thisçš„æŒ‡å‘" class="headerlink" title="thisçš„æŒ‡å‘"></a>thisçš„æŒ‡å‘</h3><ol><li>æ™®é€šå‡½æ•°ï¼š</li></ol><ul><li>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¿…é¡»è¦å†™è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œæœ‰åˆ™thisæŒ‡å‘è¯¥å¯¹è±¡ï¼Œæ— åˆ™undefined</li><li>éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¯¹ä»£ç çš„çš„è°ƒç”¨å¿…é¡»ä¸¥æ ¼çš„å†™å‡ºè¢«è°ƒç”¨çš„å‡½æ•°çš„å¯¹è±¡ï¼Œä¸å¯ä»¥æœ‰çœç•¥æˆ–è€…è¯´ç®€å†™ã€‚</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="string">&quot;use strict&quot;</span>  <span class="comment">//ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">fn</span>()ï¼›  <span class="comment">//è¾“å‡ºundefined</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">fn</span>()ï¼› <span class="comment">//è¾“å‡ºwindow</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œé€šè¿‡test()å’Œwindow.test()è°ƒç”¨å‡½æ•°å¯¹è±¡ï¼Œthiséƒ½æŒ‡å‘windowã€‚</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">fn</span>()ï¼›  <span class="comment">//è¾“å‡ºwindow</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">fn</span>()ï¼› <span class="comment">//è¾“å‡ºwindow</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>ç®­å¤´å‡½æ•°ï¼šç®­å¤´å‡½æ•°çš„thisæŒ‡å‘äºå‡½æ•°ä½œç”¨åŸŸæ‰€ç”¨çš„å¯¹è±¡</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> åˆ›å»ºç®­å¤´å‡½æ•°æ—¶ï¼Œå°±å·²ç»ç¡®å®šäº†å®ƒçš„ <span class="variable language_">this</span> æŒ‡å‘ã€‚</span><br><span class="line"><span class="number">2.</span> ç®­å¤´å‡½æ•°å†…çš„ <span class="variable language_">this</span> æŒ‡å‘å¤–å±‚çš„ <span class="variable language_">this</span>ã€‚æ‰€ä»¥è¦çŸ¥é“ç®­å¤´å‡½æ•°çš„ <span class="variable language_">this</span> å°±å¾—å…ˆçŸ¥é“å¤–å±‚ <span class="variable language_">this</span> çš„æŒ‡å‘</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œthiså§‹ç»ˆæŒ‡å‘å…¨å±€å¯¹è±¡windowï¼Œæ— è®ºæ˜¯å¦æ˜¯ä¸¥æ ¼æ¨¡å¼</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€ä½œç”¨åŸŸä¸‹çš„thisæŒ‡å‘</span></span><br><span class="line"><span class="comment">//console.log()å®Œæ•´çš„å†™æ³•æ˜¯window.console.log(),windowå¯ä»¥çœç•¥</span></span><br><span class="line"><span class="comment">//windowè°ƒç”¨äº†console.log()æ–¹æ³•ï¼Œæ‰€ä»¥æ­¤æ—¶thisæŒ‡å‘window</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">//è¾“å‡ºwindow</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>å¯¹è±¡ä¸­çš„å‡½æ•°ï¼š</li></ol><ul><li>æ™®é€šå‡½æ•°ï¼šthisæŒ‡å‘å¯¹è±¡</li><li>ç®­å¤´å‡½æ•°ï¼šthisæŒ‡å‘window</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">  <span class="attr">a</span>:<span class="function">()=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>),</span><br><span class="line">  <span class="title function_">fn</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_">a</span>()  <span class="comment">//è¾“å‡ºwindow</span></span><br><span class="line">obj.<span class="title function_">fn</span>() <span class="comment">//è¾“å‡º&#123;a: Æ’, fn: Æ’&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="5"><li>æ„é€ å‡½æ•°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> å½“ä½¿ç”¨ <span class="keyword">new</span> å…³é”®å­—è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¸­çš„ <span class="variable language_">this</span> æŒ‡å‘å®ä¾‹æ–°å¯¹è±¡</span><br><span class="line"><span class="number">2.</span> ç›´æ¥è°ƒç”¨ï¼Œ<span class="variable language_">this</span>æŒ‡å‘è°ƒç”¨è€…</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="6"><li>äº‹ä»¶ç»‘å®šä¸­çš„this</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> è¡Œå†…ç»‘å®š,<span class="variable language_">this</span>æŒ‡å‘<span class="variable language_">window</span></span><br><span class="line"><span class="number">2.</span> åŠ¨æ€ç»‘å®šä¸äº‹ä»¶ç›‘å¬,<span class="variable language_">this</span>æŒ‡å‘èŠ‚ç‚¹å¯¹è±¡</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="7"><li>æ”¹å˜thisæŒ‡å‘çš„æ–¹æ³•:call()ã€apply()ã€bind()</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//call()æ–¹æ³•ï¼Œæ”¹å˜thisåŒæ—¶è°ƒç”¨å‡½æ•°</span></span><br><span class="line">å‡½æ•°åç§°.<span class="title function_">call</span>(obj,arg1,arg2â€¦argN);</span><br><span class="line"></span><br><span class="line"><span class="comment">//apply()æ–¹æ³•ï¼Œå‚æ•°äºŒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ”¹å˜thisåŒæ—¶è°ƒç”¨å‡½æ•°</span></span><br><span class="line">å‡½æ•°åç§°.<span class="title function_">apply</span>(obj,[arg1,arg2â€¦,argN]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//bind()æ–¹æ³•ï¼Œå’Œcallç±»ä¼¼ï¼Œæ”¹å˜thisï¼Œä½†ä¸ä¼šè°ƒç”¨å‡½æ•°</span></span><br><span class="line">å‡½æ•°åç§°..<span class="title function_">bind</span>(obj);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="28-åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#28-åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="28.åƒåœ¾å›æ”¶æœºåˆ¶"></a>28.åƒåœ¾å›æ”¶æœºåˆ¶</h1><ul><li>ä»€ä¹ˆæ˜¯åƒåœ¾</li></ul><blockquote><ol><li>æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡æˆ–å˜é‡</li><li>æ— æ³•è®¿é—®åˆ°çš„å¯¹è±¡(å¤šä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨æˆç¯)</li></ol></blockquote><ul><li>åƒåœ¾å›æ”¶æœºåˆ¶</li></ul><blockquote><p>é—´æ­‡çš„ä¸å®šæœŸçš„å¯»æ‰¾é‚£äº›ä¸å†ä½¿ç”¨çš„å¯¹è±¡æˆ–å˜é‡ï¼Œå¹¶é‡Šæ”¾æ‰ä»–ä»¬å ç”¨çš„å†…å­˜<br>ç›®çš„ï¼šé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œå‡å°æµè§ˆå™¨å†…å­˜å‹åŠ›</p></blockquote><ul><li>æ£€æµ‹åƒåœ¾çš„æ–¹å¼ï¼šæ ‡è®°æ¸…é™¤æ³•ã€å¼•ç”¨è®¡æ•°æ³•</li></ul><h3 id="æ ‡è®°æ¸…é™¤æ³•"><a href="#æ ‡è®°æ¸…é™¤æ³•" class="headerlink" title="æ ‡è®°æ¸…é™¤æ³•"></a>æ ‡è®°æ¸…é™¤æ³•</h3><p>å½“å‡½æ•°æ‰§è¡Œå¼€å§‹ï¼Œç»™å‡½æ•°å†…çš„å˜é‡æ‰“ä¸Šâ€œè¿›å…¥ç¯å¢ƒâ€çš„æ ‡è®°ï¼Œå½“å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œä¸å†è¢«å¼•ç”¨çš„å˜é‡æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€,å°†è¿™äº›æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€çš„å˜é‡åˆ é™¤</p><h1 id="29-EventLoop-äº‹ä»¶å¾ªç¯"><a href="#29-EventLoop-äº‹ä»¶å¾ªç¯" class="headerlink" title="29.EventLoop(äº‹ä»¶å¾ªç¯)"></a>29.EventLoop(äº‹ä»¶å¾ªç¯)</h1><blockquote><ol><li>åŒæ­¥ä»»åŠ¡ &gt; nextTick &gt; å…¶ä»–å¾®ä»»åŠ¡ &gt; å®ä»»åŠ¡</li><li>å®ä»»åŠ¡ï¼šI&#x2F;Oã€å®šæ—¶å™¨ã€äº‹ä»¶ç»‘å®šã€ajax</li><li>å¾®ä»»åŠ¡ï¼šPromiseçš„thenã€catchã€finallyå’Œprocessçš„nextTick</li><li>Promiseçš„thenç­‰æ–¹æ³•æ˜¯å¾®ä»»åŠ¡ï¼Œè€ŒPromiseä¸­çš„ä»£ç æ˜¯åŒæ­¥ä»»åŠ¡</li></ol></blockquote><h1 id="30-å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼"><a href="#30-å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼" class="headerlink" title="30.å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼"></a>30.å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼</h1><h3 id="å†…å­˜æ³„éœ²"><a href="#å†…å­˜æ³„éœ²" class="headerlink" title="å†…å­˜æ³„éœ²"></a>å†…å­˜æ³„éœ²</h3><blockquote><ul><li>ç”¨åŠ¨æ€å‚¨å­˜åˆ†é…å‡½æ•°å†…å­˜ç©ºé—´ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•åæœªé‡Šæ”¾ï¼Œå¯¼è‡´ä¸€ç›´å æ®è¯¥å†…å­˜å•å…ƒ,ç›´åˆ°ç¨‹åºç»“æŸã€‚</li><li>å¸¸è§çš„å†…å­˜æ³„æ¼ï¼šé—­åŒ…ã€è®¡æ—¶å™¨ã€å›è°ƒã€äº‹ä»¶ç›‘å¬</li><li>æ— ç”¨çš„å˜é‡å æ®äº†æœ‰ç”¨çš„å†…å­˜</li></ul></blockquote><h3 id="å†…å­˜æº¢å‡º"><a href="#å†…å­˜æº¢å‡º" class="headerlink" title="å†…å­˜æº¢å‡º"></a>å†…å­˜æº¢å‡º</h3><blockquote><ul><li>ä¸é¡¾å †æ ˆåˆ†é…çš„å±€éƒ¨æ•°æ®å—å¤§å°,å‘æ•°æ®å—ä¸­å†™å…¥è¿‡å¤šæ•°æ®ï¼Œå¯¼è‡´æ•°æ®è¶Šç•Œ,ç»“æœè¦†ç›–äº†åˆ«çš„æ•°æ®ã€‚å¸¸åœ¨é€’å½’ä¸­å‘ç”Ÿã€‚</li><li>å†…å­˜æº¢å‡ºä¸€èˆ¬æ˜¯å†…å­˜æ³„æ¼é€ æˆçš„ï¼Œä¼šé€ æˆæµè§ˆå™¨å†…å­˜ä¸è¶³ï¼Œå´©æºƒæ‰</li></ul></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>hexoåšå®¢éƒ¨ç½²github</title>
      <link href="/post/b2004f8f.html"/>
      <url>/post/b2004f8f.html</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäº-Hexo-ä»é›¶å¼€å§‹æ­å»ºä¸ªäººåšå®¢ï¼ˆäºŒï¼‰"><a href="#åŸºäº-Hexo-ä»é›¶å¼€å§‹æ­å»ºä¸ªäººåšå®¢ï¼ˆäºŒï¼‰" class="headerlink" title="åŸºäº Hexo ä»é›¶å¼€å§‹æ­å»ºä¸ªäººåšå®¢ï¼ˆäºŒï¼‰"></a>åŸºäº Hexo ä»é›¶å¼€å§‹æ­å»ºä¸ªäººåšå®¢ï¼ˆäºŒï¼‰</h1><h2 id="å°†é™æ€åšå®¢æŒ‚è½½åˆ°-GitHub-Pages"><a href="#å°†é™æ€åšå®¢æŒ‚è½½åˆ°-GitHub-Pages" class="headerlink" title="å°†é™æ€åšå®¢æŒ‚è½½åˆ° GitHub Pages"></a><a href="#%E5%B0%86%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%82%E8%BD%BD%E5%88%B0-GitHub-Pages" title="å°†é™æ€åšå®¢æŒ‚è½½åˆ° GitHub Pages"></a>å°†é™æ€åšå®¢æŒ‚è½½åˆ° GitHub Pages</h2><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å¯¹ GitHub è´¦æˆ·çš„æ³¨å†Œä»¥åŠ Github Pages çš„åˆ›å»ºï¼Œå¹¶ä¸”ä¸º GitHub é…ç½®äº† SSH key, æˆ‘ä»¬å°†åšå®¢éƒ¨ç½²åˆ° GitHub Pages ä¸Šå³å¯ã€‚</p><h3 id="å®‰è£…-hexo-deployer-git"><a href="#å®‰è£…-hexo-deployer-git" class="headerlink" title="å®‰è£… hexo-deployer-git"></a><a href="#%E5%AE%89%E8%A3%85-hexo-deployer-git" title="å®‰è£… hexo-deployer-git"></a>å®‰è£… hexo-deployer-git</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-config-yml-æ–‡ä»¶"><a href="#ä¿®æ”¹-config-yml-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ _config.yml æ–‡ä»¶"></a><a href="#%E4%BF%AE%E6%94%B9-config-yml-%E6%96%87%E4%BB%B6" title="ä¿®æ”¹ _config.yml æ–‡ä»¶"></a>ä¿®æ”¹ _config.yml æ–‡ä»¶</h3><p>åœ¨<code>blog-demo</code>ç›®å½•ä¸‹çš„<code>_config.yml</code>ï¼Œå°±æ˜¯æ•´ä¸ª<code>Hexoæ¡†æ¶</code>çš„é…ç½®æ–‡ä»¶äº†ã€‚å¯ä»¥åœ¨é‡Œé¢ä¿®æ”¹å¤§éƒ¨åˆ†çš„é…ç½®ã€‚è¯¦ç»†å¯å‚è€ƒå®˜æ–¹çš„<a href="https://hexo.io/zh-cn/docs/configuration">é…ç½®æè¿°</a>ã€‚</p><p>ä¿®æ”¹æœ€åä¸€è¡Œçš„é…ç½®ï¼Œå°†repositoryä¿®æ”¹ä¸ºä½ è‡ªå·±çš„githubé¡¹ç›®åœ°å€å³å¯ã€‚</p><blockquote><p>è¯·æ£€æŸ¥è‡ªå·±çš„é»˜è®¤åˆ†æ”¯æ˜¯ä¸æ˜¯<code>master</code>ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:tzy13755126023/tzy13755126023.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²é¡¹ç›®åˆ°-GitHub"><a href="#éƒ¨ç½²é¡¹ç›®åˆ°-GitHub" class="headerlink" title="éƒ¨ç½²é¡¹ç›®åˆ° GitHub"></a><a href="#%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E5%88%B0-GitHub" title="éƒ¨ç½²é¡¹ç›®åˆ° GitHub"></a>éƒ¨ç½²é¡¹ç›®åˆ° GitHub</h3><p>ä¿®æ”¹å¥½é…ç½®åï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°†ä»£ç éƒ¨ç½²åˆ° GitHubã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>hexo cleanï¼šåˆ é™¤ä¹‹å‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè‹¥æœªç”Ÿæˆè¿‡é™æ€æ–‡ä»¶ï¼Œå¯å¿½ç•¥æ­¤å‘½ä»¤ã€‚</li><li>hexo generateï¼šç”Ÿæˆé™æ€æ–‡ç« ï¼Œå¯ä»¥ç”¨<code>hexo g</code>ç¼©å†™</li><li>hexo deployï¼šéƒ¨ç½²æ–‡ç« ï¼Œå¯ä»¥ç”¨<code>hexo d</code>ç¼©å†™</li></ul><p><img src="https://bu.dusays.com/2022/05/26/628e5ef06d42a.jpg" alt="null"></p><blockquote><p>æ³¨æ„ï¼šdeployæ—¶å¯èƒ½è¦ä½ è¾“å…¥ username å’Œ passwordã€‚</p></blockquote><p>å¦‚æœå‡ºç°<code>Deploy done</code>ï¼Œåˆ™è¯´æ˜éƒ¨ç½²æˆåŠŸäº†ã€‚</p><p><img src="https://bu.dusays.com/2022/05/26/628e5f017030e.jpg" alt="null"></p><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š<a href="https://tzy13755126023.github.io/">https://tzy13755126023.github.io</a> ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°åšå®¢å†…å®¹äº†ã€‚</p><p><img src="https://bu.dusays.com/2022/05/26/628e5f7360e9c.webp" alt="null"></p><blockquote><p>å¦‚æœå‡ºç°äº†æœ¬åœ° css æ ·å¼æ­£å¸¸ï¼Œéƒ¨ç½²åˆ° github ä¸Šæ ·å¼é”™ä¹±ï¼Œè¯·ç§»æ­¥ <a href="https://fe32.top/articles/hexo1612/">Hexo + Butterfly ä¸€äº›å¸¸è§é—®é¢˜</a> ä¸€æ–‡ï¼Œå…¶ä¸­æåˆ°è¿‡å…³äº æœ¬åœ°æ ·å¼æ­£å¸¸ï¼Œéƒ¨ç½²åå°±æ ·å¼é”™ä¹±çš„é—®é¢˜ã€‚</p></blockquote><h2 id="è®¾ç½®ä¸ªäººåŸŸå"><a href="#è®¾ç½®ä¸ªäººåŸŸå" class="headerlink" title="è®¾ç½®ä¸ªäººåŸŸå"></a><a href="#%E8%AE%BE%E7%BD%AE%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D" title="è®¾ç½®ä¸ªäººåŸŸå"></a>è®¾ç½®ä¸ªäººåŸŸå</h2><p>ç°åœ¨ä½ çš„ä¸ªäººç½‘ç«™çš„åœ°å€æ˜¯ <code>yourname.github.io</code>ã€‚å¦‚æœè§‰å¾—ä¸å¤Ÿå®šåˆ¶åŒ–ï¼Œå¯ä»¥è´­ä¹°ä¸€ä¸ªä¸“å±åŸŸåã€‚</p><blockquote><p>è¿™ä¸€æ­¥ä¸æ˜¯å¿…è¦çš„ï¼Œå¦‚æœç›®å‰è¿˜ä¸æƒ³ä¹°åŸŸåå¯ä»¥å…ˆè·³è¿‡ã€‚</p></blockquote><p>è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ç­‰éƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œåšä¸»é€‰æ‹©çš„é˜¿é‡Œäº‘çš„<code>.com</code>ã€‚è´­ä¹°åŸŸååï¼Œå®åè®¤è¯è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œç‚¹äº‘è§£æè¿›å»ï¼Œæ‰¾åˆ°ä½ åˆšä¹°çš„åŸŸåï¼Œç‚¹è¿›å»æ·»åŠ ä¸¤æ¡è§£æè®°å½•ï¼Œè®°å½•å€¼ è¯·å¡«å†™<code>&lt;ç”¨æˆ·å&gt;.github.io</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://bu.dusays.com/2022/05/26/628e6464cee7b.jpg" alt="null"></p><p>ä»¥æˆ‘çš„åŸŸå<code>fe32.top</code>ä¸ºä¾‹ï¼Œè¿›è¡Œå¦‚ä¸‹è¯´æ˜ï¼š</p><p>ä¸»æœºè®°å½•</p><p>è§£é‡Š</p><p>www</p><p>è§£æåçš„åŸŸåä¸º <a href="http://www.fe32.top/">www.fe32.top</a></p><p>@</p><p>ç›´æ¥è§£æä¸»åŸŸå yafine-blog.cn</p><p>*</p><p>æ³›è§£æï¼ŒåŒ¹é…å…¶ä»–æ‰€æœ‰åŸŸå *.yafine-blog.cn</p><p>mail</p><p>å°†åŸŸåè§£æä¸º mail.yafine-blog.cnï¼Œé€šå¸¸ç”¨äºè§£æé‚®ç®±æœåŠ¡å™¨</p><p>äºŒçº§åŸŸå</p><p>å¦‚ abc.yafine-blog.cnï¼Œå¡«å†™ abc</p><p>æ‰‹æœºç½‘ç«™</p><p>å¦‚ m.yafine-blog.cnï¼Œå¡«å†™ m</p><p>æ˜¾æ€§URL</p><p>ä¸æ”¯æŒæ³›è§£æï¼ˆæ³›è§£æï¼šå°†æ‰€æœ‰å­åŸŸåè§£æåˆ°åŒä¸€åœ°å€ï¼‰</p><blockquote><p>å°†åŸŸåæŒ‡å‘äº‘æœåŠ¡å™¨ï¼Œè¯·é€‰æ‹©ã€ŒAã€ï¼› å°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼Œè¯·é€‰æ‹©ã€ŒCNAMEã€ï¼› å»ºç«‹é‚®ç®±è¯·é€‰æ‹©ã€ŒMXã€ï¼Œæ ¹æ®é‚®ç®±æœåŠ¡å•†æä¾›çš„ MX è®°å½•å¡«å†™ã€‚</p></blockquote><p>è®°å½•ç±»å‹</p><p>è§£é‡Š</p><p>A</p><p>ç”¨æ¥æŒ‡å®šåŸŸåçš„ IPv4 åœ°å€ï¼ˆå¦‚ 8.8.8.8ï¼‰ï¼Œå¦‚æœéœ€è¦å°†åŸŸåæŒ‡å‘ä¸€ä¸ª IP åœ°å€ï¼Œå°±éœ€è¦æ·»åŠ  A è®°å½•ã€‚</p><p>CNAME</p><p>å¦‚æœéœ€è¦å°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼Œå†ç”±å¦ä¸€ä¸ªåŸŸåæä¾› IP åœ°å€ï¼Œå°±éœ€è¦æ·»åŠ  CNAME è®°å½•ã€‚</p><p>MX</p><p>å¦‚æœéœ€è¦è®¾ç½®é‚®ç®±ï¼Œè®©é‚®ç®±èƒ½æ”¶åˆ°é‚®ä»¶ï¼Œå°±éœ€è¦æ·»åŠ  MX è®°å½•ã€‚</p><p>TXT</p><p>åœ¨è¿™é‡Œå¯ä»¥å¡«å†™ä»»ä½•ä¸œè¥¿ï¼Œé•¿åº¦é™åˆ¶ 255ã€‚ç»å¤§å¤šæ•°çš„ TXT è®°å½•æ˜¯ç”¨æ¥åš SPF è®°å½•ï¼ˆååƒåœ¾é‚®ä»¶ï¼‰</p><p>NS</p><p>åŸŸåæœåŠ¡å™¨è®°å½•ï¼Œå¦‚æœéœ€è¦å°†å­åŸŸåäº¤ç»™å…¶ä»– DNS æœåŠ¡å•†è§£æï¼Œå°±éœ€è¦æ·»åŠ  NS è®°å½•ã€‚</p><p>AAAA</p><p>ç”¨æ¥æŒ‡å®šä¸»æœºåï¼ˆæˆ–åŸŸåï¼‰å¯¹åº”çš„ IPv6 åœ°å€ï¼ˆä¾‹å¦‚ï¼šff06:0:0:0:0:0:0:c3ï¼‰è®°å½•ã€‚</p><p>SRV</p><p>è®°å½•äº†å“ªå°è®¡ç®—æœºæä¾›äº†å“ªä¸ªæœåŠ¡ã€‚æ ¼å¼ä¸ºï¼šæœåŠ¡çš„åå­—ã€ç‚¹ã€åè®®çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š_xmpp-server_tcpã€‚</p><p>æ˜¾æ€§ URL</p><p>ä»ä¸€ä¸ªåœ°å€ 301 é‡å®šå‘åˆ°å¦ä¸€ä¸ªåœ°å€çš„æ—¶å€™ï¼Œå°±éœ€è¦æ·»åŠ æ˜¾æ€§ URL è®°å½•ï¼ˆæ³¨ï¼šDNSPod ç›®å‰åªæ”¯æŒ 301 é‡å®šå‘ï¼‰ã€‚</p><p>éšæ€§ URL</p><p>ç±»ä¼¼äºæ˜¾æ€§ URLï¼ŒåŒºåˆ«åœ¨äºéšæ€§ URL ä¸ä¼šæ”¹å˜åœ°å€æ çš„åŸŸåã€‚</p><blockquote><p>è¿™æ—¶å€™ä½ çš„é¡¹ç›®æ ¹ç›®å½•åº”è¯¥ä¼šå‡ºç°ä¸€ä¸ªåä¸º<code>CNAME</code>çš„æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œæ‰“å¼€åšå®¢<code>/source</code>ç›®å½•ï¼Œæˆ‘çš„æ˜¯<code>G:/hexo-blog/blog-demo/source</code>ï¼Œæ–°å»º<code>CNAME</code>æ–‡ä»¶ï¼Œæ³¨æ„æ²¡æœ‰åç¼€ã€‚ç„¶ååœ¨é‡Œé¢å†™ä¸Šä½ çš„åŸŸå(ä¾‹å¦‚ï¼šfe32.top)ï¼Œä¿å­˜ã€‚æœ€åè¿è¡Œ<code>hexo g</code>ã€<code>hexo d</code>ä¸Šä¼ åˆ°<code>github</code>ã€‚è¿™æ ·åˆ°æœ€åå½“ä½ åœ¨åœ°å€æ è¾“å…¥<code>xxx.github.io</code>æ—¶ï¼Œæ‰ä¼šè‡ªåŠ¨è·³è½¬åˆ°ä½ çš„åŸŸåã€‚</p></blockquote><p>æ‰“å¼€ä½ çš„<code>github</code>åšå®¢é¡¹ç›®ï¼Œç‚¹å‡»<code>settings</code>ï¼Œç‚¹å‡»<code>Pages</code>ï¼Œæ‹‰åˆ°ä¸‹é¢<code>Custom domain</code>å¤„ï¼Œå¡«ä¸Šä½ è‡ªå·±çš„åŸŸå ï¼Œä¿å­˜ã€‚</p><p><img src="https://bu.dusays.com/2022/05/26/628e66b35afc6.webp" alt="null"></p><p>éƒ¨ç½²æˆåŠŸåï¼Œå†æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè¾“å…¥ä½ è‡ªå·±çš„ä¸“å±åŸŸåï¼Œå³å¯çœ‹åˆ°ä½ çš„åšå®¢ç½‘ç«™ï¼</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>tsæ¦‚è¿°</title>
      <link href="/post/e75fe64f.html"/>
      <url>/post/e75fe64f.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ¥å§ï¼Œä¸€èµ·å¯¹-TypeScript-æ‰«ç›²å§ï¼"><a href="#æ¥å§ï¼Œä¸€èµ·å¯¹-TypeScript-æ‰«ç›²å§ï¼" class="headerlink" title="æ¥å§ï¼Œä¸€èµ·å¯¹ TypeScript æ‰«ç›²å§ï¼"></a>æ¥å§ï¼Œä¸€èµ·å¯¹ TypeScript æ‰«ç›²å§ï¼</h1><p>å¯¹äºå‰ç«¯å°ä¼™ä¼´æ¥è¯´ï¼ŒTypeScript è‚¯å®šéƒ½ä¸é™Œç”Ÿï¼Œä½†æœ¬äººä¹‹å‰ä¸€ç›´å¯¹ TypeScript äº†è§£çš„ä¸å¤šï¼Œè¿™æ¬¡å†³å®šå…¨é¢å­¦ä¹ ä¸€ä¸‹ TypeScript å¹¶æ€»ç»“æˆåšå®¢æ–‡ç« </p><p>åºŸè¯ä¸å¤šè¯´ï¼Œå’±ç›´æ¥å°±å¼€å§‹å§ ğŸ‘Š</p><h3 id="TypeScript-æ¦‚è§ˆ"><a href="#TypeScript-æ¦‚è§ˆ" class="headerlink" title="TypeScript æ¦‚è§ˆ"></a>TypeScript æ¦‚è§ˆ</h3><ol><li><p><strong>TypeScript æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>ç®€å•ç†è§£å°±æ˜¯ TypeScript æ˜¯å¢åŠ äº†ç±»å‹çº¦æŸçš„ JavaScriptï¼Œå¹¶ä¸”å¯ä»¥è¢«ç¼–è¯‘æˆåŸç”Ÿ JavaScriptã€‚</p></li><li><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ TypeScriptï¼Ÿ</strong></p><p>a. ä¸å¼±ç±»å‹çš„ JS ç»“åˆï¼Œåœ¨ç¼–è¯‘æœŸé—´å¢å¼ºç±»å‹æ£€æŸ¥ï¼Œæå‰å‘ç°å¯èƒ½çš„ç¼ºé™·</p><p>b. é€šè¿‡å¼ºç±»å‹çº¦æŸå¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œå¤šäººåä½œå¼€å‘ï¼Œä¿è¯é¡¹ç›®çš„å¯ç»´æŠ¤æ€§</p><p>c. ä¸ä»£ç ç¼–è¾‘å™¨é›†æˆï¼Œæä¾›è‡ªåŠ¨è¡¥å…¨ã€å¼•ç”¨è·³è½¬ç­‰å®ç”¨åŠŸèƒ½ï¼Œæå‡å¼€å‘æ•ˆç‡</p></li></ol><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ä¸‹é¢æ¥çœ‹çœ‹ TypeScript çš„åŸºæœ¬ç”¨æ³•</p><h4 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h4><h5 id="ç®€å•ç±»å‹ä»‹ç»"><a href="#ç®€å•ç±»å‹ä»‹ç»" class="headerlink" title="ç®€å•ç±»å‹ä»‹ç»"></a>ç®€å•ç±»å‹ä»‹ç»</h5><p>å¯¹äºç®€å•ç±»å‹å‘¢ï¼Œå°±æ˜¯ stringã€numberã€booleanã€undefined å’Œ nullï¼Œæ¯”è¾ƒåŸºç¡€:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">str</span>: <span class="built_in">string</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">num</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">isAfternoon</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">result</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">variable</span>: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="è‡ªåŠ¨æ¨æ–­ç±»å‹"><a href="#è‡ªåŠ¨æ¨æ–­ç±»å‹" class="headerlink" title="è‡ªåŠ¨æ¨æ–­ç±»å‹"></a>è‡ªåŠ¨æ¨æ–­ç±»å‹</h5><p>åœ¨æŸäº›åœºæ™¯ï¼Œts æ˜¯å¯ä»¥è‡ªå·±æ¨æ–­å‡ºç±»å‹çš„ï¼Œæ¯”å¦‚:</p><ul><li>åˆå§‹åŒ–èµ‹å€¼çš„æ—¶å€™</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myName = <span class="string">&#x27;Daniel Yang&#x27;</span>;</span><br><span class="line"></span><br><span class="line">myName = <span class="number">123</span>; <span class="comment">// è®©æˆ‘ä»¬çœ‹çœ‹å°†æ•°å­—ç±»å‹èµ‹å€¼ç»™ myName ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>duang~ ts å‘å‡ºäº†æŠ¥é”™:</code>ğŸ‘‡</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3ed5af315e94c5a95b4eb9ee3ffd7f1~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><ul><li>å¯¹å‡½æ•°çš„è¿”å›å€¼</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hi, My name is <span class="subst">$&#123;name&#125;</span>.`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ts ä¼šè‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹:</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2e079b1994b4b60b849916d7b52e991~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><ul><li>å­˜åœ¨æ¯”è¾ƒæ˜æ˜¾çš„ä¸Šä¸‹æ–‡æ¨æ–­</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ map æ–¹æ³•ä¸­ ts èƒ½æ¨æ–­å‡ºéå†å…ƒç´ çš„ç±»å‹:</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2f9ab26f35e408abf01af85410a80e3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>åœ¨è¿™äº›åœºæ™¯ä¸‹ç”±äº ts èƒ½æ¨æ–­å‡ºå…·ä½“ç±»å‹ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥çœç•¥ç±»å‹æ³¨é‡Šçš„ï¼Œè¿˜èƒ½å‡å°‘ä»£ç çš„é•¿åº¦ğŸ˜¬</p><h5 id="ç‰¹åˆ«çš„ç±»å‹"><a href="#ç‰¹åˆ«çš„ç±»å‹" class="headerlink" title="ç‰¹åˆ«çš„ç±»å‹"></a>ç‰¹åˆ«çš„ç±»å‹</h5><p>ä¸‹é¢ä»‹ç»ä¸€äº›ç‰¹åˆ«çš„ç±»å‹</p><p><strong>1. any</strong></p><p>åœ¨ ts é‡Œ æœ‰ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„ <code>any</code> ç±»å‹ï¼Œå¯¹äºä¸çŸ¥é“å…·ä½“ç±»å‹ æˆ–è€…å°±æ˜¯ä¸æƒ³å†™ç±»å‹çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ <code>any</code> æ¥å£°æ˜</p><p>ä¸è¿‡è¿™æ ·ä¼šå¯¼è‡´ ts å¯¹è¯¥å˜é‡ç¦ç”¨æ£€æŸ¥ï¼Œä¸¢å¤±æ‰ ts è¯¥æœ‰çš„ä½œç”¨ï¼Œæ‰€ä»¥éœ€è¦é¿å…è¿‡åº¦ä½¿ç”¨ <code>any</code></p><p><strong>2. unknown</strong></p><p><code>unknown</code> ä»£è¡¨ç€ä»»æ„çš„å€¼ï¼Œå®ƒå’Œ <code>any</code> éå¸¸åƒï¼Œä½†ç”±äºå¯¹ unknown è¿›è¡Œä»»æ„æ“ä½œéƒ½æ˜¯ä¸åˆæ³•çš„ï¼Œæ‰€ä»¥å®ƒæ¯”ç›´æ¥ä½¿ç”¨ <code>any</code> æ›´å®‰å…¨</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fnWithAny</span>(<span class="params">a: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    a.<span class="title function_">b</span>(); <span class="comment">// âœ… it&#x27;s OK.</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fnWithUnknown</span>(<span class="params">a: <span class="built_in">unknown</span></span>) &#123;</span><br><span class="line">    a.<span class="title function_">b</span>(); <span class="comment">// âŒ error: a is of type &#x27;unknown&#x27;.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>3. never</strong></p><p><code>never</code> æ„å‘³ç€æ°¸è¿œä¸ä¼šå‘ç”Ÿï¼Œå°±åƒé‚£å¹´ç§‹å¤©ï¼Œå’³å’³ï¼Œæ‰¯è¿œäº†ã€‚ã€‚ã€‚ğŸ¤·â€â™‚ï¸</p><p>å¯¹äºæŠ›å‡ºå¼‚å¸¸ä¼šæå‰ç»ˆæ­¢æ‰§è¡Œçš„å‡½æ•°æ¥è¯´ï¼Œé€‚åˆå¯¹å…¶è¿”å›ç±»å‹å£°æ˜ä¸º neverï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fail</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;oops&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥å¥½åƒæ²¡å•¥ç”¨ğŸ¤</p><p>ä½†å…¶å® <code>never</code> éå¸¸é€‚åˆç”¨äºé˜²æ­¢å¯¹è”åˆç±»å‹æœ‰é—æ¼ä½¿ç”¨çš„æƒ…å†µï¼Œä¾‹å¦‚:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Shape</span> = <span class="string">&#x27;circle&#x27;</span> | <span class="string">&#x27;square&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">shape</span>: <span class="title class_">Shape</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;circle&#x27;</span>:</span><br><span class="line">        <span class="comment">// some logic</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;square&#x27;</span>:</span><br><span class="line">        <span class="comment">// some logic</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>: <span class="comment">// æŒ‰ç…§æ­£å¸¸é€»è¾‘æ˜¯èµ°ä¸åˆ° default åˆ†æ”¯çš„</span></span><br><span class="line">        <span class="keyword">const</span> <span class="attr">val</span>: <span class="built_in">never</span> = shape; <span class="comment">// æ­¤æ—¶ shape ä¸º never ç±»å‹</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>æœ‰æ„æ€çš„åœ°æ–¹æ¥äº†</code>ï¼Œå¦‚æœæœ‰ä¸€å¤©å¤§å®¶å¯¹ Shape å¢åŠ äº†æ–°ç±»å‹ <code>star</code>ï¼Œä½†æ˜¯å¿˜è®°å»æ–°å¢ switch çš„ case åˆ†æ”¯ï¼Œæ­¤æ—¶ default åˆ†æ”¯é‡Œ ts ä¼šæŠ¥é”™å¯¼è‡´ä»£ç ç¼–è¯‘ä¸é€šè¿‡ï¼Œå°†è¿™ä¸ªé—æ¼ case åˆ†æ”¯çš„éšæ‚£æš´éœ²å‡ºæ¥ï¼</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb500b6faa734bdcb48fc598a77290c0~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"> <img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/692e531d3e424c68b6f0d55d539230f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>ç» <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/473e2fc69da448afa2b08cc31f9960a3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><p><strong>4. void</strong></p><p><code>void</code> æ„å‘³ç€å‡½æ•°æ²¡æœ‰è¿”å›å€¼æˆ–ä¸è¿”å›ä»»ä½•æ˜ç¡®çš„å€¼ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">noop1</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;noop&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">noop2</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Just nothing.&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¤æ‚ç±»å‹"><a href="#å¤æ‚ç±»å‹" class="headerlink" title="å¤æ‚ç±»å‹"></a>å¤æ‚ç±»å‹</h4><p>æ¥ä¸‹æ¥å’±ä»¬æ¥çœ‹ä¸‹å¦‚ä½•åœ¨ ts é‡Œç»™å¤æ‚å¯¹è±¡æ·»åŠ ç±»å‹å£°æ˜</p><p>é¦–å…ˆæ¥è®¤è¯†ä¸€ä¸‹ <code>type</code> å’Œ <code>interface</code> å…³é”®å­—</p><h5 id="1-type-ç±»å‹åˆ«å"><a href="#1-type-ç±»å‹åˆ«å" class="headerlink" title="1. type ç±»å‹åˆ«å"></a>1. type ç±»å‹åˆ«å</h5><p>åœ¨ ts é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>type</code> å…³é”®è¯æ¥ç»™ä»»æ„ç±»å‹æ·»åŠ å‘½åï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿å¼•ç”¨å’Œå¤ç”¨:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ  Point çš„ç±»å‹åˆ«å</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Point</span> = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">y</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printCoord</span>(<span class="params">pt: Point</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;coordinate&#x27;s x and y is: &quot;</span>, pt.<span class="property">x</span>, pt.<span class="property">y</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>&amp;</code> ç¬¦å·å°†å¤šä¸ª type è¿›è¡Œ<strong>ç»„åˆ</strong>:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Animal</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">eat</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DogAction</span> = &#123;</span><br><span class="line">    <span class="attr">bark</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    <span class="attr">walk</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Dog</span> = <span class="title class_">Animal</span> &amp; <span class="title class_">DogAction</span>; <span class="comment">// ç»„åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">dog</span>: <span class="title class_">Dog</span>;</span><br><span class="line">dog.<span class="title function_">walk</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-interface-æ¥å£ç±»å‹"><a href="#2-interface-æ¥å£ç±»å‹" class="headerlink" title="2. interface æ¥å£ç±»å‹"></a>2. interface æ¥å£ç±»å‹</h5><p><code>interface</code> æ˜¯å¦ä¸€ç§ç”¨æ¥å£°æ˜å¯¹è±¡ç±»å‹çš„æ–¹å¼:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">y</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printCoord</span>(<span class="params">pt: Point</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;coordinate&#x27;s x and y is: &quot;</span>, pt.<span class="property">x</span>, pt.<span class="property">y</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>extends</code> å…³é”®å­—å¯¹ interface è¿›è¡Œ<strong>ç»§æ‰¿</strong>:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">eat</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123; <span class="comment">// ç»§æ‰¿</span></span><br><span class="line">    <span class="attr">bark</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    <span class="attr">walk</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">dog</span>: <span class="title class_">Dog</span>;</span><br><span class="line">dog.<span class="title function_">walk</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ—¢ç„¶æœ‰ä¸¤ç§ç±»å‹å£°æ˜çš„æ–¹å¼ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<code>type</code> å’Œ <code>interface</code> æœ‰å•¥åŒºåˆ«å‘¢ï¼ŸğŸ¤”</p><h5 id="type-å’Œ-interface-çš„åŒºåˆ«"><a href="#type-å’Œ-interface-çš„åŒºåˆ«" class="headerlink" title="type å’Œ interface çš„åŒºåˆ«"></a>type å’Œ interface çš„åŒºåˆ«</h5><p><code>type</code> å’Œ <code>interface</code> ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«:</p><ol><li><p>interface åªèƒ½å£°æ˜å¯¹è±¡ç±»å‹ï¼Œä½† type é™¤äº†å¯¹è±¡ç±»å‹ä»¥å¤–ï¼Œè¿˜å¯ä»¥å£°æ˜ç®€å•ç±»å‹å’Œ union è”åˆç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡ç±»å‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Info</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// type è¿˜å¯ä»¥å£°æ˜ç®€å•ç±»å‹å’Œè”åˆç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> name = <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> value = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>interface çš„é‡å¤å£°æ˜å¯ä»¥åˆå¹¶ï¼Œç„¶è€Œ type ä¸èƒ½é‡å¤å£°æ˜:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// interface å¯ä»¥é‡å¤å£°æ˜ï¼Œå£°æ˜çš„å±æ€§ä¼šè¿›è¡Œåˆå¹¶</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Info</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Info</span> = &#123; <span class="comment">// âŒ Error: type ä¸èƒ½é‡å¤å£°æ˜</span></span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>type å’Œ interface å®ç°ç±»å‹æ‰©å±•çš„æ–¹å¼ä¸åŒ</p><p>type é€šè¿‡ <code>&amp;</code> ç¬¦å·è¿›è¡Œç±»å‹åˆå¹¶ï¼Œè€Œ interface é€šè¿‡ <code>extends</code> å…³é”®è¯å®ç°ç»§æ‰¿</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ğŸ¤— <span class="comment">// interface B =&gt; &#123; a: string; b: number; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> A = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B = A &amp; &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ğŸ¤— <span class="comment">// type B =&gt; &#123; a: string; b: number; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h5 id="3-å¯¹è±¡"><a href="#3-å¯¹è±¡" class="headerlink" title="3. å¯¹è±¡"></a>3. å¯¹è±¡</h5><p>è®²å®Œäº†ç±»å‹å£°æ˜çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨ ts é‡Œå¦‚ä½•å¯¹å¯¹è±¡è¿›è¡Œç±»å‹å£°æ˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºğŸ‘‡:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ—¶æˆ‘ä»¬å¯ä»¥ç”¨ <code>?</code> å’Œ <code>readonly</code> ä¿®é¥°ç¬¦æ¥ä¿®é¥°å¯¹è±¡å±æ€§:</p><ul><li><p><code>?</code> æ˜¯å¯é€‰ä¿®é¥°ç¬¦ï¼Œæ„å‘³ç€è¯¥å±æ€§å¯ä»¥ä¸èµ‹å€¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Info</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    phone?: <span class="built_in">string</span>; <span class="comment">// phone =&gt; string | undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>readonly</code> æ˜¯åªè¯»ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¯¥å±æ€§åˆå§‹åŒ–åä¸èƒ½å†æ¬¡ä¿®æ”¹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Info</span> = &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">info</span>: <span class="title class_">Info</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Daniel&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">info.<span class="property">name</span> = <span class="string">&#x27;Tom&#x27;</span>; <span class="comment">// âŒ Error: Cannot assign to &#x27;name&#x27; because it is a read-only property.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>åœ¨ä½¿ç”¨å¯é€‰å±æ€§å‰éœ€è¦æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™ ts ä¼šäº§ç”ŸæŠ¥é”™æç¤º:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printName</span>(<span class="params">obj: &#123; first: <span class="built_in">string</span>, last?: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">last</span>.<span class="title function_">toUpperCase</span>()); <span class="comment">// âŒ Error: &#x27;obj.last&#x27; is possibly &#x27;undefined&#x27;.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="property">last</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">last</span>.<span class="title function_">toUpperCase</span>()); <span class="comment">// âœ… OK.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">last</span>?.<span class="title function_">toUpperCase</span>()); <span class="comment">// æˆ–è€…ä½¿ç”¨ JS çš„ ?. è¯­æ³•ç³– âœ…</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äº <code>readonly</code> æ¥è¯´è™½ç„¶ä¸ä¼šçœŸçš„æ”¹å˜å±æ€§çš„æ€§è´¨ï¼Œä½†ä¼šåœ¨ç¼–è¯‘æœŸçš„ç±»å‹æ£€æŸ¥æœŸé—´ç¦æ­¢å±æ€§çš„é‡æ–°å†™å…¥:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">obj: &#123; <span class="keyword">readonly</span> message: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">    obj.<span class="property">message</span> = <span class="string">&#x27;hello&#x27;</span>; <span class="comment">// âŒ Error: Cannot assign to &#x27;message&#x27; because it is a read-only property.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>readonly</code> ä¿®é¥°ç¬¦ä¸ <code>const</code> å£°æ˜æŒºç±»ä¼¼çš„ï¼Œå®ƒå¹¶ä¸æ„å‘³ç€å±æ€§çš„å€¼å®Œå…¨ä¸èƒ½ä¿®æ”¹ï¼Œè€Œæ˜¯æŒ‡ä¸èƒ½å†é‡æ–°æ›´æ–°å±æ€§çš„å¼•ç”¨:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PersonalInfo</span> = &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">baseInfo</span>: &#123; <span class="comment">// baseInfo æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">        <span class="attr">gender</span>: <span class="built_in">string</span>;</span><br><span class="line">        <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPersonalInfo</span>(<span class="params">person: PersonalInfo</span>) &#123;</span><br><span class="line">    person.<span class="property">baseInfo</span>.<span class="property">age</span> ++; <span class="comment">// âœ… å¯ä»¥æ›´æ–°å®ƒçš„å±æ€§å€¼</span></span><br><span class="line"></span><br><span class="line">    person.<span class="property">baseInfo</span> = &#123; <span class="comment">// âŒ ä½†ä¸èƒ½æ›´æ–°å®ƒçš„å¼•ç”¨</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Yang&#x27;</span>,</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="4-æ•°ç»„"><a href="#4-æ•°ç»„" class="headerlink" title="4. æ•°ç»„"></a>4. æ•°ç»„</h5><p>å¯¹æ•°ç»„æ¥è¯´ï¼Œå®ƒçš„ç±»å‹å£°æ˜æœ‰ä¸¤ç§æ–¹å¼ï¼Œä»¥å­—ç¬¦ä¸²æ•°ç»„ä¸ºä¾‹:</p><ul><li><code>string[]</code></li><li><code>Array&lt;string&gt;</code></li></ul><p>è¿™ä¸¤ç§å†™æ³•çš„ç»“æœæ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯ç¬¬äºŒç§æ˜¯æ³›å‹ <code>U&lt;T&gt;</code> çš„å†™æ³•ï¼Œæˆ‘ä»¬ç¨åå†è¯¦ç»†ä»‹ç»æ³›å‹ğŸ˜Œ</p><p>ä¸å¯¹è±¡å±æ€§ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ•°ç»„å£°æ˜ä¸ºåªè¯»æ•°ç»„ï¼ŒåŒæ ·æœ‰ä¸¤ç§æ–¹å¼:</p><ul><li><code>ReadonlyArray&lt;string&gt;</code></li><li><code>readonly string[]</code></li></ul><p>è¿™æ ·ä½¿å¾—æ•°ç»„å†…å®¹ä¸å¯æ›´æ”¹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>: <span class="keyword">readonly</span> <span class="built_in">string</span>[] = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>];</span><br><span class="line"></span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">&#x27;orange&#x27;</span>; <span class="comment">// âŒ Error: Index signature in type &#x27;readonly string[]&#x27; only permits reading.</span></span><br><span class="line">arr1.<span class="title function_">push</span>(<span class="string">&#x27;orange&#x27;</span>); <span class="comment">// âŒ Error: Property &#x27;push&#x27; does not exist on type &#x27;readonly string[]&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="5-å‡½æ•°"><a href="#5-å‡½æ•°" class="headerlink" title="5. å‡½æ•°"></a>5. å‡½æ•°</h5><p>å¯¹å‡½æ•°æ¥è¯´ï¼Œéœ€è¦å£°æ˜ç±»å‹çš„åœ°æ–¹æœ‰ <code>å‡½æ•°å‚æ•°</code> å’Œ <code>å‡½æ•°è¿”å›å€¼</code>ï¼Œä¾‹å¦‚:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getMax</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`The max is <span class="subst">$&#123;<span class="built_in">Math</span>.max(a, b)&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å£°æ˜å¯é€‰å‚æ•°å’Œåªè¯»å‚æ•°:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fixed</span>(<span class="params">n: <span class="built_in">number</span>, digit?: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (digit !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n.<span class="title function_">toFixed</span>(digit);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n.<span class="title function_">toFixed</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">obj: &#123; <span class="keyword">readonly</span> a: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj.a is: &#x27;</span>, obj.<span class="property">a</span>);</span><br><span class="line"></span><br><span class="line">    obj.<span class="property">a</span> ++; <span class="comment">// âŒ Error: Cannot assign to &#x27;a&#x27; because it is a read-only property.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¸¸ç”¨ç±»å‹"><a href="#å¸¸ç”¨ç±»å‹" class="headerlink" title="å¸¸ç”¨ç±»å‹"></a>å¸¸ç”¨ç±»å‹</h4><p>æ¥ä¸‹æ¥ä»‹ç»å‡ ç§å¸¸ç”¨çš„ç±»å‹</p><h5 id="union-è”åˆç±»å‹"><a href="#union-è”åˆç±»å‹" class="headerlink" title="union è”åˆç±»å‹"></a>union è”åˆç±»å‹</h5><p>è”åˆç±»å‹æ˜¯å°†ä¸¤ä¸ªä»¥ä¸Šçš„ç±»å‹ç»„åˆèµ·æ¥çš„å½¢å¼ï¼Œè¡¨ç¤ºæŸä¸ªå€¼å¯ä»¥æ˜¯å…¶ä¸­ä»»æ„ä¸€ä¸ªç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printId</span>(<span class="params">id: <span class="built_in">number</span> | <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Your ID is: &#x27;</span>, id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printId</span>(<span class="number">101</span>); <span class="comment">// âœ… OK.</span></span><br><span class="line"><span class="title function_">printId</span>(<span class="string">&#x27;202&#x27;</span>); <span class="comment">// âœ… OK.</span></span><br><span class="line"><span class="title function_">printId</span>(&#123; <span class="attr">id</span>: <span class="number">303</span> &#125;); <span class="comment">// âŒ Error: Argument of type &#x27;&#123; id: number; &#125;&#x27; is not assignable to parameter of type &#x27;string | number&#x27;.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é™¤äº†ç±»å‹è”åˆå¤–ï¼Œå’±ä»¬è¿˜å¯ä»¥è”åˆå…·ä½“çš„å€¼ï¼Œè¿™æ ·åœ¨ä»£ç ç¼–è¾‘å™¨é‡Œè¿˜èƒ½æ–¹ä¾¿åœ°å¢åŠ æç¤º:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printText</span>(<span class="params">s: <span class="built_in">string</span>, alignment: <span class="string">&#x27;left&#x27;</span> | <span class="string">&#x27;right&#x27;</span> | <span class="string">&#x27;center&#x27;</span></span>) &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91178b1d452d444a8da56f5e78c2feaa~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>ğŸ’£ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ ts é‡Œä½¿ç”¨è”åˆç±»å‹æ—¶ï¼Œåªæœ‰å½“æŸä¸ªå±æ€§æ˜¯æ‰€æœ‰ç±»å‹æ‰€å…±æœ‰çš„æ‰å¯ä»¥ç›´æ¥ç”¨</p><p>æ¯”å¦‚æŸä¸ªè”åˆç±»å‹æ˜¯ <code>string | number</code>ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨åªå­˜åœ¨äº <code>string</code> ç±»å‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•æ˜¯ä¼šå–œææŠ¥é”™çš„ ğŸ™ƒ:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">val: <span class="built_in">string</span> | <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> val.<span class="property">split</span> === <span class="string">&#x27;function&#x27;</span>) &#123; <span class="comment">// âŒ Error: Property &#x27;split&#x27; does not exist on type &#x27;number&#x27;.</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(val.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å’±å°±æ˜¯è¯´åœ¨ä½¿ç”¨æŸä¸€ç±»å‹ç‰¹æœ‰çš„å±æ€§ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡æ˜ç¡®çš„ç±»å‹åˆ¤æ–­è®© ts çŸ¥é“å˜é‡å…·ä½“çš„ç±»å‹ï¼Œè¿™æ ·å°±èƒ½æ­£å¸¸ä½¿ç”¨ç±»å‹æ‰€å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•äº†</p><p>å¶æ€»ç»“äº†ä¸‹ &#x3D;&gt; è‡³å°‘æœ‰ä»¥ä¸‹ <strong>å‡ ç§æ–¹å¼</strong> å¯ä»¥ç”¨æ¥æ›´æ˜ç¡®åœ°åˆ¤æ–­å˜é‡çš„ç±»å‹:</p><ol><li><p>ä½¿ç”¨ <code>typeof</code> æ“ä½œç¬¦</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">padLeft</span>(<span class="params">padding: <span class="built_in">number</span> | <span class="built_in">string</span>, input: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&#x27;number&#x27;</span>) &#123; <span class="comment">// ä½¿ç”¨ typeof æ˜ç¡®å˜é‡çš„ç±»å‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.<span class="title function_">repeat</span>(padding) + input;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;padding&#125;</span><span class="subst">$&#123;input&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>in</code> æ“ä½œç¬¦</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Fish</span> = &#123; <span class="attr">swim</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Bird</span> = &#123; <span class="attr">fly</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params">animal: Fish | Bird</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&#x27;swim&#x27;</span> <span class="keyword">in</span> animal) &#123; <span class="comment">// æ£€æŸ¥ swim æ˜¯å¦å­˜åœ¨äº animal åŸå‹é“¾ä¸Šï¼Œå³æ˜¯å¦ä¸º Fish ç±»å‹</span></span><br><span class="line">        animal.<span class="title function_">swim</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        animal.<span class="title function_">fly</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>instanceof</code> æ“ä½œç¬¦</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logValue</span>(<span class="params">x: <span class="built_in">Date</span> | <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="title class_">Date</span>) &#123; <span class="comment">// æ˜¯å¦ä¸º Date ç±»å‹å®ä¾‹</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="title function_">toUTCString</span>());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹é¢„æµ‹æ–¹æ³•</p><p>é™¤äº†ä½¿ç”¨ JS æœ¬èº«çš„è¯­è¨€èƒ½åŠ›æ¥åšï¼Œå’±ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€äº›ç±»å‹åˆ¤æ–­æ–¹æ³•</p><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦åˆ¤æ–­ä¸€ä¸ªå˜é‡ç©¶ç«Ÿæ˜¯ <code>Fish</code> ç±»å‹è¿˜æ˜¯ <code>Bird</code> ç±»å‹ï¼Œå¯ä»¥è¿™æ ·å†™:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isFish</span>(<span class="params">pet: Fish | Bird</span>): pet is <span class="title class_">Fish</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (pet <span class="keyword">as</span> <span class="title class_">Fish</span>).<span class="property">swim</span> !== <span class="literal">undefined</span>; <span class="comment">// éªŒè¯ä¸‹ pet å˜é‡ä¸Šæ˜¯å¦å­˜åœ¨ swim å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åæ”¾åœ¨æ¡ä»¶åˆ¤æ–­é‡Œå°±å¥½äº†:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_">isFish</span>(pet)) &#123;</span><br><span class="line">    pet.<span class="title function_">swim</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    pet.<span class="title function_">fly</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h5 id="enum-æšä¸¾"><a href="#enum-æšä¸¾" class="headerlink" title="enum æšä¸¾"></a>enum æšä¸¾</h5><p>enum æšä¸¾æ˜¯ ts åœ¨ js è¯­æ³•ä¹‹å¤–æ–°å¢çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸å’±ä»¬å®šä¹‰ä¸€ç»„å‘½åå¸¸é‡ï¼Œæ¯”å¦‚:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">NumericDirection</span> &#123;</span><br><span class="line">    <span class="title class_">Up</span>, <span class="comment">// é»˜è®¤ä» 0 å¼€å§‹ï¼Œåé¢çš„å˜é‡å¦‚æœæ²¡æœ‰èµ‹å€¼åˆ™ç»§ç»­åŠ  1</span></span><br><span class="line">    <span class="title class_">Down</span>, <span class="comment">// 1</span></span><br><span class="line">    <span class="title class_">Left</span>, <span class="comment">// 2</span></span><br><span class="line">    <span class="title class_">Right</span>, <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">StringDirection</span> &#123;</span><br><span class="line">    <span class="variable constant_">UP</span> = <span class="string">&#x27;UP&#x27;</span>,</span><br><span class="line">    <span class="title class_">Down</span> = <span class="string">&#x27;Down&#x27;</span>,</span><br><span class="line">    <span class="title class_">Left</span> = <span class="string">&#x27;Left&#x27;</span>,</span><br><span class="line">    <span class="title class_">Right</span> = <span class="string">&#x27;Right&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´å°±æ˜¯:</p><ul><li><p>æ•°å­—ç±»å‹çš„æšä¸¾é»˜è®¤å€¼ä¸º 0ï¼Œåé¢çš„æˆå‘˜å¦‚æœæ²¡æœ‰èµ‹å€¼åˆ™ç»§ç»­ç´¯åŠ  1</p></li><li><p>å­—ç¬¦ç±»å‹çš„æšä¸¾å¿…é¡»è¦èµ‹å€¼</p></li></ul><p>æšä¸¾æˆå‘˜ä¹Ÿå¯ä»¥æ˜¯æ··åˆç±»å‹ï¼Œä¾‹å¦‚è¿™æ ·:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">MixedType</span> &#123;</span><br><span class="line">    A, <span class="comment">// 0</span></span><br><span class="line">    <span class="attr">B</span>: <span class="string">&#x27;B&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯æšä¸¾å…¶å®æ˜¯çœŸå®çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ä»£ç é‡Œå¯ä»¥ä½œä¸ºå€¼ç›´æ¥ä½¿ç”¨:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Response</span> &#123;</span><br><span class="line">    <span class="variable constant_">NO</span>, <span class="comment">// 0</span></span><br><span class="line">    <span class="variable constant_">YES</span>, <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½œä¸ºç±»å‹çš„å€¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleResponse</span>(<span class="params"><span class="keyword">type</span>: Response, message: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line"><span class="title function_">handleResponse</span>(<span class="title class_">Response</span>.<span class="property">YES</span>, <span class="string">&#x27;success&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ é€’ç»™å‡½æ•°å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">n: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n === <span class="title class_">Response</span>.<span class="property">YES</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fn</span>(<span class="title class_">Response</span>.<span class="property">NO</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£é—®é¢˜åˆæ¥äº†: <code>ts çš„æšä¸¾å’Œ js çš„å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?</code> ğŸ‘»</p><p>emmâ€¦ æšä¸¾ä¸å¯¹è±¡ä¸»è¦æœ‰ä¸¤ç‚¹ä¸åŒ:</p><ul><li><p>æ•°å­—ç±»å‹çš„æšä¸¾ä¼šç”Ÿæˆ <code>åå‘æ˜ å°„</code>ï¼Œå¯ä»¥é€šè¿‡æšä¸¾çš„å€¼è·å–åˆ°å¯¹åº”çš„é”® key:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">NumericEnum</span> &#123;</span><br><span class="line">    <span class="variable constant_">LEFT</span> = <span class="number">1</span>,</span><br><span class="line">    <span class="variable constant_">RIGHT</span> = <span class="number">2</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">NumericEnum</span>[<span class="title class_">NumericEnum</span>.<span class="property">LEFT</span>]; <span class="comment">// &#x27;LEFT&#x27;</span></span><br><span class="line"><span class="title class_">NumericEnum</span>[<span class="number">1</span>]; <span class="comment">// &#x27;LEFT&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®©æˆ‘ä»¬æ‰“å°ä¸‹ NumericEnum çš„ key</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">NumericEnum</span>)) <span class="variable language_">console</span>.<span class="title function_">log</span>(key)</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;2&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;LEFT&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;RIGHT&#x27;</span></span><br><span class="line"><span class="comment">// ã€‚ã€‚ã€‚ä¸æ˜¯å¾ˆæ˜ç™½ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼ŸğŸ¤·â€â™‚ï¸</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æšä¸¾æˆå‘˜æ˜¯åªè¯»ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">NumericEnum</span>[<span class="string">&#x27;LEFT&#x27;</span>] = <span class="number">3</span>; <span class="comment">// âŒ Error: Cannot assign to &#x27;LEFT&#x27; because it is a read-only property.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h5 id="Tuple-å…ƒç»„"><a href="#Tuple-å…ƒç»„" class="headerlink" title="Tuple å…ƒç»„"></a>Tuple å…ƒç»„</h5><p>ä»‹ç»å®Œæšä¸¾ï¼Œæˆ‘ä»¬æ¥è®¤è¯†ä¸‹ Tuple å…ƒç»„</p><p>è¿™åå­—å¬èµ·æ¥å¾ˆé«˜å¤§ä¸Šï¼Œä½†å…¶å®ã€‚ã€‚ã€‚å®ƒå°±æ˜¯æ•°ç»„è€Œå·²</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e582020c1d7f4015b5f4d1f610e471a9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><p>ä¸è¿‡åœ¨å…ƒç»„é‡Œå¯ä»¥æ··åˆç€ä¸åŒç±»å‹ï¼Œæ¯”å¦‚: <code>pair: [string, number]</code> è¿™æ ·å­ï¼Œå®ƒå°±å±äºå…ƒç»„</p><p>ç”±äºå…ƒç»„ä¸€èˆ¬æ˜¯çŸ¥é“å…ƒç´ æ•°é‡å’Œå¯¹åº”çš„ç±»å‹ï¼Œæ‰€ä»¥ ts å¯ä»¥å¯¹å…ƒç»„çš„ä¸‹æ ‡è®¿é—®æ˜¯å¦è¶Šç•Œå’Œå…·ä½“å…ƒç´ çš„æ“ä½œæ˜¯å¦åˆæ³•åšæ£€æŸ¥:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">pair: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;first value is: &#x27;</span>, pair[<span class="number">0</span>]); <span class="comment">// âœ… It&#x27;s OK.</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;third value is: &#x27;</span>, pair[<span class="number">2</span>]); <span class="comment">// âŒ Error: Tuple type &#x27;[string, number]&#x27; of length &#x27;2&#x27; has no element at index &#x27;2&#x27;.</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(pair[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)); <span class="comment">// âŒ Error: Property &#x27;split&#x27; does not exist on type &#x27;number&#x27;.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸€èˆ¬å‘¢ï¼Œå› ä¸ºå…ƒç»„é‡Œå¯ä»¥æœ‰å¯é€‰å…ƒç´ å’Œæ‰©å±•å…ƒç´ ï¼Œå®ƒä»¬ä¼šé€ æˆå…ƒç»„çš„å®é™…é•¿åº¦ä¸ç¡®å®š</p><ul><li><p>å¯é€‰å…ƒç´ ï¼šå’±å¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢å¢åŠ  ? è¡¨ç¤ºå…¶ä¸ºå¯é€‰å…ƒç´ ï¼Œéœ€è¦æ³¨æ„å¯é€‰å…ƒç´ åªèƒ½å‡ºç°åœ¨é˜Ÿå°¾&#96;&#96;&#96;typescript<br>type TupleArray &#x3D; [number, string, boolean?];<br>const arr1: TupleArray &#x3D; [1, â€˜2â€™]; &#x2F;&#x2F; âœ… OK.<br>const arr2: TupleArray &#x3D; [1, â€˜2â€™, true]; &#x2F;&#x2F; âœ… OK.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>æ‰©å±•å…ƒç´ ï¼šå’Œ js è¯­æ³•ä¸€æ ·ï¼Œå’±å¯ä»¥ç”¨åœ¨ç±»å‹å‰æ·»åŠ  â€¦ è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªæ‰©å±•å…ƒç´ :&#96;&#96;&#96;typescript<br>type StringNumberBooleans &#x3D; [string, number, â€¦boolean[]]; &#x2F;&#x2F; è¡¨ç¤ºå‰ä¸¤ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯å­—ç¬¦å’Œæ•°å­—ç±»å‹ï¼Œå‰©ä¸‹çš„å…ƒç´ éƒ½æ˜¯å¸ƒå°”ç±»å‹<br>type StringBooleansNumber &#x3D; [string, â€¦boolean[], number]; &#x2F;&#x2F; è¡¨ç¤ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯å­—ç¬¦å’Œæ•°å­—ç±»å‹ï¼Œä¸­é—´çš„å…ƒç´ éƒ½æ˜¯å¸ƒå°”ç±»å‹<br>type BooleansStringNumber &#x3D; [â€¦boolean[], string, number]; &#x2F;&#x2F;  è¡¨ç¤ºæœ€åä¸¤ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯å­—ç¬¦å’Œæ•°å­—ç±»å‹ï¼Œå‰é¢çš„å…ƒç´ éƒ½æ˜¯å¸ƒå°”ç±»å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li></ul><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2a2cefdd90c4112a3d07060de28a849~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h3 id="è¿›é˜¶ç”¨æ³•"><a href="#è¿›é˜¶ç”¨æ³•" class="headerlink" title="è¿›é˜¶ç”¨æ³•"></a>è¿›é˜¶ç”¨æ³•</h3><blockquote><p>æ­å–œä½ ï¼Œèƒ½çœ‹åˆ°è¿™é‡Œçš„äººéƒ½æ˜¯å¤§ä½¬ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥å­¦ä¸€äº› ts çš„è¿›é˜¶ç”¨æ³•ğŸ˜</p></blockquote><h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><h5 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h5><p>å¦‚æœæŸä¸ªå‡½æ•°èƒ½å¤Ÿä»¥ä¸åŒçš„å‚æ•°æ•°é‡å’Œå‚æ•°ç±»å‹æ¥è°ƒç”¨ï¼Œé‚£åœ¨ ts é‡Œè¯¥å¦‚ä½•å¯¹è¯¥å‡½æ•°è¿›è¡Œç±»å‹å£°æ˜å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ &#x3D;&gt; æˆ‘ä»¬å¯ä»¥ <strong>å®šä¹‰å¤šä¸ªå‡½æ•°ç­¾å</strong></p><p>æ¯”å¦‚æˆ‘ä»¬è¦å†™ä¸€ä¸ªå±•ç¤ºæ—¥æœŸçš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ¥æ”¶ä¸€ä¸ª<code>æ•°å­—ç±»å‹çš„æ—¶é—´æˆ³å‚æ•°</code> æˆ– <code>å…·ä½“å¹´ã€æœˆã€æ—¥ä¸‰ä¸ªå‚æ•°</code>ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™å‡½æ•°çš„ç±»å‹å£°æ˜:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç­¾å</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">makeDate</span>(<span class="params">timestamp: <span class="built_in">number</span></span>): <span class="title class_">Date</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">makeDate</span>(<span class="params">year: <span class="built_in">number</span>, month: <span class="built_in">number</span>, day: <span class="built_in">number</span></span>): <span class="title class_">Date</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å®ç°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">makeDate</span>(<span class="params">yOrTimestamp: <span class="built_in">number</span>, month?: <span class="built_in">number</span>, day?: <span class="built_in">number</span></span>): <span class="title class_">Date</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (month !== <span class="literal">undefined</span> &amp;&amp; day !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(yOrTimestamp, month, day);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(yOrTimestamp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è°ƒç”¨</span></span><br><span class="line"><span class="keyword">const</span> d1 = <span class="title function_">makeDate</span>(<span class="number">123456789</span>); <span class="comment">// âœ… OK.</span></span><br><span class="line"><span class="keyword">const</span> d2 = <span class="title function_">makeDate</span>(<span class="number">2023</span>, <span class="number">7</span>, <span class="number">30</span>); <span class="comment">// âœ… OK.</span></span><br><span class="line"><span class="keyword">const</span> d3 = <span class="title function_">makeDate</span>(<span class="number">2016</span>, <span class="number">10</span>); <span class="comment">// âŒ Error: No overload expects 2 arguments, but overloads do exist that expect either 1 or 3 arguments.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>âš ï¸ä¸è¿‡éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œ<strong>å¦‚æœèƒ½ç”¨ union è”åˆç±»å‹å£°æ˜çš„ï¼Œå°±ä¸è¦ç”¨é‡è½½æ¥å£°æ˜</strong>ï¼Œå¦åˆ™ä¼šæŠŠç®€å•é—®é¢˜å¤æ‚åŒ–</p><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªè¿”å›å­—ç¬¦ä¸²æˆ–æ•°ç»„é•¿åº¦çš„æ–¹æ³•ï¼Œå‡è®¾ä½¿ç”¨é‡è½½æ¥è¿›è¡Œç±»å‹å£°æ˜:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç­¾å</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">len</span>(<span class="params">s: <span class="built_in">string</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">len</span>(<span class="params">arr: <span class="built_in">any</span>[]</span>): <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å®ç°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">len</span>(<span class="params">x: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨æ™®é€šè°ƒç”¨ä¸‹æ²¡æœ‰é—®é¢˜:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">len</span>(<span class="string">&#x27;hello&#x27;</span>); <span class="comment">// âœ… OK.</span></span><br><span class="line"><span class="title function_">len</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// âœ… OK.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†å¦‚æœåƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼Œts å°±ä¼šæŠ¥é”™:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">len</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? <span class="string">&#x27;hello&#x27;</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// âŒ Error: </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å› ä¸ºæ­¤æ—¶å‚æ•°ç±»å‹åœ¨ç¼–è¯‘æ—¶æ²¡æ³•ç¡®å®šï¼Œä¸èƒ½å•ç‹¬åŒ¹é…ä»»æ„ä¸€ä¸ªå‡½æ•°ç­¾å:</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf287af4e2804c3a8bf8b68339a06fd6~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>ä½†å†·é™ä¸‹æ¥æƒ³ä¸€æƒ³ ğŸ¤”ï¼Œåœ¨è¿™ç§å‚æ•°æ•°é‡å’Œè¿”å›å€¼ç±»å‹éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨ union è”åˆç±»å‹ä¸é¦™å—:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">len</span>(<span class="params">x: <span class="built_in">string</span> | <span class="built_in">any</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">len</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? <span class="string">&#x27;hello&#x27;</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// âœ… OK.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>å®Œç¾è§£å†³ (oã‚œâ–½ã‚œ)oâ˜†[BINGO!]</code></p><h5 id="å‡½æ•°æ³›å‹"><a href="#å‡½æ•°æ³›å‹" class="headerlink" title="å‡½æ•°æ³›å‹"></a>å‡½æ•°æ³›å‹</h5><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸‹ ts é‡Œä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µ: <code>æ³›å‹</code></p><p>æ³›å‹æ˜¯ç”¨æ¥æè¿°åŒä¸€ç±»å‹åœ¨å¤šä¸ªå€¼ä¹‹é—´çš„å…³è”æ€§ğŸŒŸ</p><p>æ¯”å¦‚æŸä¸ªæ–¹æ³•éœ€è¦è¿”å›æ•°ç»„å‚æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè™½ç„¶å¯ä»¥åƒè¿™æ ·å†™ç±»å‹å£°æ˜:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getFirstElement</span>(<span class="params">arr: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†è¿™æ ·ä¼šå¯¼è‡´æ–¹æ³•çš„è¿”å›å€¼æ˜¯ <code>any</code> ç±»å‹ï¼Œæœ‰ç‚¹ç®€å•ç²—æš´ï¼Œè¡¨è¾¾ä¸äº†è¿”å›å€¼å’Œå‚æ•°æ•°ç»„çš„å…³ç³»</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff8f10ac19c844e891b64951bfe422ff~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>å¦‚æœè¿”å›å€¼çš„ç±»å‹èƒ½æ˜ç¡®åœ°ä¸æ•°ç»„çš„å…ƒç´ ç±»å‹å…³è”ä¸Šå°±å¥½äº†ğŸ˜Œ</p><p>æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <strong>æ³›å‹</strong> æ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ï¼Œå¦‚ä¸‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getFirstElement&lt;<span class="title class_">Type</span>&gt;(<span class="attr">arr</span>: <span class="title class_">Type</span>[]): <span class="title class_">Type</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>See? ! é€šè¿‡åœ¨å‡½æ•°ç­¾åå¤„æ·»åŠ ä¸€ä¸ªç±»å‹å‚æ•° <code>Type</code> å¹¶ç”¨åœ¨å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼å£°æ˜é‡Œï¼Œæˆ‘ä»¬å°±åœ¨å®ƒä»¬ä¿©ä¹‹é—´å»ºç«‹äº†è”ç³»</p><p>ç°åœ¨å½“æˆ‘ä»¬è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¿”å›å€¼çš„ç±»å‹å°†ä¼šä¸æ•°ç»„å…ƒç´ çš„ç±»å‹ä¸€è‡´:</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/127148b460f743e9a251ab3f798d776b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1988eda0e34a4834bad6f10ec164b93e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>Greatï¼ğŸ¥³</p><p>åŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>extends</code> å…³é”®å­— <strong>å¯¹æ³›å‹å¢åŠ é™åˆ¶</strong></p><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª <code>åœ¨ä¸¤å…ƒç´ ä¸­è¿”å› length å±æ€§æœ€å¤§çš„é‚£ä¸ªå…ƒç´ </code> æ–¹æ³•:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getLonger&lt;<span class="title class_">Type</span> <span class="keyword">extends</span> &#123; <span class="attr">length</span>: <span class="built_in">number</span> &#125;&gt;(<span class="attr">a</span>: <span class="title class_">Type</span>, <span class="attr">b</span>: <span class="title class_">Type</span>): <span class="title class_">Type</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (a.<span class="property">length</span> &gt; b.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±é™åˆ¶äº†è¯¥æ³›å‹å¿…é¡»å…·æœ‰ number ç±»å‹çš„ length å±æ€§:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getLonger</span>(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">// âŒ Error: Argument of type &#x27;number&#x27; is not assignable to parameter of type &#x27;&#123; length: number; &#125;&#x27;.</span></span><br><span class="line"><span class="title function_">getLonger</span>([<span class="number">10</span>], [<span class="number">20</span>]); <span class="comment">// âœ… OK.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h4><h5 id="ç´¢å¼•ç­¾å-index-signature"><a href="#ç´¢å¼•ç­¾å-index-signature" class="headerlink" title="ç´¢å¼•ç­¾å index signature"></a>ç´¢å¼•ç­¾å index signature</h5><p>åœ¨å®é™…é¡¹ç›®ä¸­ä¼šå­˜åœ¨è¿™æ ·ä¸€ç§æƒ…å†µ: å’±ä¸çŸ¥é“ä¸€ä¸ªç±»å‹é‡Œæ‰€æœ‰çš„å±æ€§å€¼ï¼Œä½†å·§çš„æ˜¯å’±çŸ¥é“å±æ€§ key å’Œå¯¹åº”å€¼çš„ç±»å‹</p><p>æ­¤æ—¶å°±å¯ä»¥ç”¨ç´¢å¼•ç­¾åæ¥è¿›è¡Œç±»å‹å£°æ˜</p><p>æ¯”å¦‚å¯ä»¥è¿™æ ·å£°æ˜ä¸€ä¸ªä¸‹æ ‡æ˜¯æ•°å­—ã€å€¼æ˜¯å­—ç¬¦ä¸²çš„å¯¹è±¡:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">StringArray</span> &#123;</span><br><span class="line">    [<span class="attr">index</span>: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">myArray</span>: <span class="title class_">StringArray</span> = <span class="title function_">getStringArray</span>();</span><br><span class="line">myArrsy[<span class="number">0</span>]; <span class="comment">// type: string;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>But åªæœ‰ <code>string</code>ã€<code>number</code> å’Œ <code>symbol</code> å¯ä»¥ç”¨ä½œå¯¹è±¡ key çš„ç±»å‹ï¼Œè¿™ä¹Ÿç¬¦åˆ JS è¯­è¨€ä¸­å¯¹è±¡ key ç±»å‹çš„èŒƒå›´</p><p>å¦‚æœå¯¹è±¡çš„å±æ€§æœ‰ä¸åŒç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ union è”åˆç±»å‹æ¥å£°æ˜å€¼çš„ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">NumberOrStringDic</span> &#123;</span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">length</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// âœ… It&#x27;s OK.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ç´¢å¼•ç­¾åå¢åŠ  readonly å‰ç¼€æ¥é˜²æ­¢å±æ€§è¢«é‡æ–°èµ‹å€¼:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ReadonlyStringArray</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> [<span class="attr">index</span>: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">myArray</span>: <span class="title class_">ReadonlyStringArray</span> = <span class="title function_">getReadonlyStringArray</span>();</span><br><span class="line">myArray[<span class="number">0</span>] = <span class="string">&#x27;Daniel&#x27;</span>; <span class="comment">// âŒ Error: Index signature in type &#x27;ReadonlyStringArray&#x27; only permits reading.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å¯¹è±¡æ³›å‹"><a href="#å¯¹è±¡æ³›å‹" class="headerlink" title="å¯¹è±¡æ³›å‹"></a>å¯¹è±¡æ³›å‹</h5><p>ä¸å‡½æ•°ä¸€æ ·ï¼Œå¯¹è±¡ä¹Ÿå­˜åœ¨æ³›å‹å£°æ˜ ğŸ¤ª</p><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªå¯¹è±¡ Boxï¼Œå®ƒæœ‰ä¸€ä¸ªåŒ…å«ä»»æ„ç±»å‹çš„ content å±æ€§ï¼Œè®²é“ç†æˆ‘ä»¬å¯ä»¥è¿™æ ·å£°æ˜:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Box</span> &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ²¡æœ‰é—®é¢˜ï¼Œä½†ä½¿ç”¨ <code>any</code> ä¼šå¯¼è‡´ ts å¯¹ <code>content</code> å±æ€§ç§»é™¤äº†ç±»å‹æ£€æŸ¥ï¼Œæ¯”å¦‚:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">box</span>: <span class="title class_">Box</span> = &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;string type&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">box.<span class="title function_">content</span>(); <span class="comment">// å­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥ä½œä¸ºæ–¹æ³•è°ƒç”¨ï¼Œä½†æ­¤æ—¶ ts æ²¡æœ‰åŠæ—¶ç»™å‡ºæŠ¥é”™ğŸ™</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±å¯ä»¥å¯¹ Box å¯¹è±¡è¿›è¡Œæ³›å‹å£°æ˜</p><p>å¯ä»¥è¿™æ ·ç†è§£ä¸‹é¢çš„å£°æ˜: <code>Box çš„ Type å°±æ˜¯ content å±æ€§çš„ç±»å‹</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Box</span>&lt;<span class="title class_">Type</span>&gt; &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="title class_">Type</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åé‡ç‚¹æ˜¯ <strong>æˆ‘ä»¬åœ¨å¼•ç”¨ Box ç±»å‹çš„æ—¶å€™éœ€è¦ç»™å‡º Type çš„å…·ä½“ç±»å‹</strong>ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">box</span>: <span class="title class_">Box</span>&lt;<span class="built_in">string</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;string value&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ · ts ä¼šæ˜ç¡®çŸ¥é“ <code>box.content</code> æ˜¯ <code>string</code> ç±»å‹ï¼Œä»å¯¹ <code>box.content</code> çš„è°ƒç”¨åšå‡ºå‡†ç¡®çš„æ£€æŸ¥: ğŸ¤—</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2219a5e2dd748c0a6a04d4c3099cc7c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="demo.png"></p><p>å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ <code>type</code> æ¥å£°æ˜æ³›å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Box</span>&lt;<span class="title class_">Type</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="title class_">Type</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ—¶å› ä¸º <code>type</code> ä¸ä»…å¯ä»¥å£°æ˜å¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬è¿˜èƒ½ç”¨ <code>type</code> æ¥å£°æ˜ä¸€äº›æ³›å‹çš„è¾…åŠ©ç±»å‹ï¼Œä¾‹å¦‚:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">OrNull</span>&lt;T&gt; = T | <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrMany</span>&lt;T&gt; = T | T[];</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrManyOrNull</span>&lt;T&gt; = <span class="title class_">OrNull</span>&lt;<span class="title class_">OneOrMany</span>&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrManyOrNullStrings</span> = <span class="title class_">OneOrManyOrNull</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e40aa3122fe4205b6a0b2f8bea651dc~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h4 id="å®ç”¨å·¥å…·ç±»å‹"><a href="#å®ç”¨å·¥å…·ç±»å‹" class="headerlink" title="å®ç”¨å·¥å…·ç±»å‹"></a>å®ç”¨å·¥å…·ç±»å‹</h4><p>æ–‡ç« çš„æœ€åå’±ä»¬æ¥è®¤è¯†ä¸€äº›å®ç”¨çš„å·¥å…·ç±»å‹å§ ğŸ”¨</p><h5 id="1-Partial"><a href="#1-Partial" class="headerlink" title="1. Partial"></a>1. Partial<Type></h5><p>è¿”å›ä¸€ä¸ªä¸ Type å±æ€§ç›¸åŒä½†å…¨è¢«è®¾ä¸ºå¯é€‰çš„æ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">optionalTodo</span>: <span class="title class_">Partial</span>&lt;<span class="title class_">Todo</span>&gt;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   &#123;</span></span><br><span class="line"><span class="comment">       title?: string;</span></span><br><span class="line"><span class="comment">       desc?: string;</span></span><br><span class="line"><span class="comment">   &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-Required"><a href="#2-Required" class="headerlink" title="2. Required"></a>2. Required<Type></h5><p>ä¸ Partial ç›¸åï¼Œè¿”å›ä¸€ä¸ªä¸ Type å±æ€§ç›¸åŒä½†å…¨è¢«è®¾ä¸ºå¿…å¡«çš„æ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">    name?: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">requiredInfo</span>: <span class="title class_">Required</span>&lt;<span class="title class_">Info</span>&gt;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">       name: string;</span></span><br><span class="line"><span class="comment">       age: number;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-Pick-lt-Type-Keys-gt"><a href="#3-Pick-lt-Type-Keys-gt" class="headerlink" title="3. Pick&lt;Type, Keys&gt;"></a>3. Pick&lt;Type, Keys&gt;</h5><p>ä» Type é‡ŒæŒ‘å‡ºæŒ‡å®šçš„ Keys æ¥æ„é€ ä¸€ä¸ªæ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">completed</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TodoPreview</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">Todo</span>, <span class="string">&#x27;title&#x27;</span> | <span class="string">&#x27;completed&#x27;</span>&gt;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">       title: string;</span></span><br><span class="line"><span class="comment">       completed: boolean;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="4-Omit-lt-Type-Keys-gt"><a href="#4-Omit-lt-Type-Keys-gt" class="headerlink" title="4. Omit&lt;Type, Keys&gt;"></a>4. Omit&lt;Type, Keys&gt;</h5><p>ä¸ Pick ç›¸åï¼Œä» Type é‡Œç§»é™¤æ‰æŒ‡å®šçš„ Keys æ¥æ„é€ ä¸€ä¸ªæ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">desc</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">completed</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TodoPreview</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">Todo</span>, <span class="string">&#x27;desc&#x27;</span> | <span class="string">&#x27;completed&#x27;</span>&gt;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">       title: string;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="5-Extract-lt-UnionType-ExtractedMembers-gt"><a href="#5-Extract-lt-UnionType-ExtractedMembers-gt" class="headerlink" title="5. Extract&lt;UnionType, ExtractedMembers&gt;"></a>5. Extract&lt;UnionType, ExtractedMembers&gt;</h5><p>å– UnionType å’Œ ExtractedMembers çš„äº¤é›†æ¥æ„é€ ä¸€ä¸ªæ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T0</span> = <span class="title class_">Extract</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;f&#x27;</span>&gt;; <span class="comment">// T0: &#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Extract</span>&lt;<span class="built_in">string</span> | <span class="built_in">number</span> | (<span class="function">() =&gt;</span> <span class="built_in">void</span>), <span class="title class_">Function</span>&gt;; <span class="comment">// T1: () =&gt; void</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="6-Exclude-lt-UnionType-ExcludedMembers-gt"><a href="#6-Exclude-lt-UnionType-ExcludedMembers-gt" class="headerlink" title="6. Exclude&lt;UnionType, ExcludedMembers&gt;"></a>6. Exclude&lt;UnionType, ExcludedMembers&gt;</h5><p>ä» UnionType é‡Œç§»é™¤æ‰ ExtractedMembers å­˜åœ¨çš„ç±»å‹æ¥æ„é€ ä¸€ä¸ªæ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T0</span> = <span class="title class_">Exclude</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&gt;; <span class="comment">// T0: &#x27;b&#x27; | &#x27;c&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Exclude</span>&lt;<span class="built_in">string</span> | <span class="built_in">number</span> | (<span class="function">() =&gt;</span> <span class="built_in">void</span>), <span class="title class_">Function</span>&gt;; <span class="comment">// T1: string | number</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="7-NonNullable"><a href="#7-NonNullable" class="headerlink" title="7. NonNullable"></a>7. NonNullable<Type></h5><p>ä» Type é‡Œç§»é™¤æ‰ <code>undefined</code> å’Œ <code>null</code> æ¥æ„é€ ä¸€ä¸ªæ–°ç±»å‹:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T0</span> = <span class="title class_">NonNullable</span>&lt;<span class="built_in">string</span> | <span class="built_in">number</span> | <span class="literal">undefined</span> | <span class="literal">null</span>&gt;; <span class="comment">// T0: string | number</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h4 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h4><ul><li><a href="https://link.juejin.cn/?target=https://www.typescriptlang.org/docs/handbook/intro.html" title="https://www.typescriptlang.org/docs/handbook/intro.html">TypeScript Handbook</a></li><li><a href="https://link.juejin.cn/?target=https://www.zhihu.com/question/354601204/answer/888551021" title="https://www.zhihu.com/question/354601204/answer/888551021">TypeScript ä¸­çš„ never ç±»å‹å…·ä½“æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</a></li><li><a href="https://link.juejin.cn/?target=https://blog.csdn.net/qq_42501092/article/details/125799761" title="https://blog.csdn.net/qq_42501092/article/details/125799761">TypeScript ä¸­çš„æšä¸¾å’Œæ™®é€šå¯¹è±¡çš„åŒºåˆ«</a></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åº</title>
      <link href="/post/1c54e301.html"/>
      <url>/post/1c54e301.html</url>
      
        <content type="html"><![CDATA[<h1 id="ã€ä¸šåŠ¡æ–¹æ¡ˆã€‘å¾®ä¿¡å°ç¨‹åºç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åº"><a href="#ã€ä¸šåŠ¡æ–¹æ¡ˆã€‘å¾®ä¿¡å°ç¨‹åºç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åº" class="headerlink" title="ã€ä¸šåŠ¡æ–¹æ¡ˆã€‘å¾®ä¿¡å°ç¨‹åºç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åº"></a>ã€ä¸šåŠ¡æ–¹æ¡ˆã€‘å¾®ä¿¡å°ç¨‹åºç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åº</h1><p>ä¸€ã€å†™åœ¨å‰é¢</p><p>â€ƒå‰æ®µæ—¶é—´ï¼Œæˆ‘åœ¨å·¥ä½œä¸­é‡åˆ°äº†å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åºçš„éœ€æ±‚ã€‚ç„¶åæˆ‘å‘ç°ç½‘ä¸Šç›¸å…³èµ„æ–™å¹¶ä¸å¤šï¼Œå¹¶ä¸”è¿™å¥—æ–¹æ¡ˆä¹Ÿæ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šæµè¡Œèµ·æ¥ã€‚ä¸ºäº†è®©åç»­åŒè¡Œå°‘èµ°å¼¯è·¯ï¼Œæˆ‘ç‰¹æ­¤è®°å½•ä¸€ä¸‹æ•´ä¸ªä¸šåŠ¡æµç¨‹é‡åˆ°çš„é—®é¢˜å’Œç›¸å…³çš„æ–‡æ¡£ã€‚</p><h3 id="äºŒã€å¾®ä¿¡å…¬ä¼—å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#äºŒã€å¾®ä¿¡å…¬ä¼—å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="äºŒã€å¾®ä¿¡å…¬ä¼—å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>äºŒã€å¾®ä¿¡å…¬ä¼—å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37ac80f052184c6490f3993831774018~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"> ç›®çš„ï¼šç®¡ç†å¾®ä¿¡å°ç¨‹åºã€å…¬ä¼—å·å¼€å‘å’Œå‘å¸ƒç­‰å·¥ä½œã€‚<br>ç½‘å€ï¼š<a href="https://link.juejin.cn/?target=https://mp.weixin.qq.com/" title="https://mp.weixin.qq.com/">mp.weixin.qq.com&#x2F;</a><br>ç™»å½•æ–¹å¼ï¼šæ‰«ç </p><h3 id="ä¸‰ã€å¾®ä¿¡å¼€æ”¾å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸‰ã€å¾®ä¿¡å¼€æ”¾å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸‰ã€å¾®ä¿¡å¼€æ”¾å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸‰ã€å¾®ä¿¡å¼€æ”¾å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21406601466a4ac28ae6f95c1e8be9d3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><p>ç›®çš„ï¼šç®¡ç†ç§»åŠ¨appã€ç½‘ç«™h5ã€å…¬ä¼—å·å’Œç¬¬ä¸‰æ–¹å¹³å°ä½¿ç”¨å¾®ä¿¡ç”Ÿæ€çš„å¹³å°ã€‚<br>ç½‘å€ï¼š<a href="https://link.juejin.cn/?target=https://open.weixin.qq.com/" title="https://open.weixin.qq.com/">open.weixin.qq.com&#x2F;</a><br>ç™»å½•æ–¹å¼ï¼šè¾“å…¥è´¦å·å¯†ç </p><h3 id="å››ã€å¾®ä¿¡å¼€æ”¾å¹³å°å’Œç¬¬ä¸‰æ–¹å¹³å°ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#å››ã€å¾®ä¿¡å¼€æ”¾å¹³å°å’Œç¬¬ä¸‰æ–¹å¹³å°ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="å››ã€å¾®ä¿¡å¼€æ”¾å¹³å°å’Œç¬¬ä¸‰æ–¹å¹³å°ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>å››ã€å¾®ä¿¡å¼€æ”¾å¹³å°å’Œç¬¬ä¸‰æ–¹å¹³å°ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>â€ƒå¾®ä¿¡å¼€æ”¾å¹³å°ï¼ˆWeChat Open Platformï¼‰æ˜¯æŒ‡å¾®ä¿¡ä¸ºç¬¬ä¸‰æ–¹å¼€å‘è€…æä¾›çš„ä¸€å¥—å¼€æ”¾æ¥å£å’ŒæœåŠ¡ï¼Œå…è®¸å¼€å‘è€…åœ¨å¾®ä¿¡ç”Ÿæ€ç³»ç»Ÿä¸­æ„å»ºè‡ªå·±çš„åº”ç”¨å’ŒæœåŠ¡ã€‚å®ƒåŒ…æ‹¬å¾®ä¿¡å…¬ä¼—å¹³å°ã€å¾®ä¿¡å°ç¨‹åºå¹³å°å’Œä¼ä¸šå¾®ä¿¡å¼€æ”¾å¹³å°ç­‰ã€‚</p><p>â€ƒå¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°æ˜¯æŒ‡ï¼Œåœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ä¸Šæ³¨å†Œå¹¶é€šè¿‡å®¡æ ¸çš„ï¼Œå¯ä»¥ä¸ºå¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºã€ä¼ä¸šå¾®ä¿¡æä¾›æœåŠ¡çš„ç‹¬ç«‹åº”ç”¨ã€‚</p><p>â€ƒç¬¬ä¸‰æ–¹å¹³å°å¯ä»¥å¸®åŠ©ä¼ä¸šæˆ–ä¸ªäººåœ¨å¾®ä¿¡ç”Ÿæ€ä¸­æ„å»ºè‡ªå·±çš„æœåŠ¡èƒ½åŠ›ï¼Œä»è€Œå®ç°æ›´å¤šæ ·åŒ–çš„åº”ç”¨å’ŒåŠŸèƒ½ã€‚ç¬¬ä¸‰æ–¹å¹³å°å¯ä»¥ä¸å¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºã€ä¼ä¸šå¾®ä¿¡è¿›è¡Œæˆæƒå…³è”ï¼Œå¹¶ä½¿ç”¨å¾®ä¿¡å¼€æ”¾å¹³å°æä¾›çš„æ¥å£å’Œèƒ½åŠ›ï¼Œä¸ºè¿™äº›æœåŠ¡æä¾›å¢å€¼åº”ç”¨å’ŒæœåŠ¡ã€‚</p><p>â€ƒå› æ­¤ï¼Œå¯ä»¥è¯´å¾®ä¿¡å¼€æ”¾å¹³å°æ˜¯ä¸€ä¸ªæ•´ä½“çš„æ¦‚å¿µï¼ŒåŒ…å«äº†å¾®ä¿¡å…¬ä¼—å¹³å°ã€å¾®ä¿¡å°ç¨‹åºå¹³å°å’Œä¼ä¸šå¾®ä¿¡å¼€æ”¾å¹³å°ç­‰ä¸åŒçš„å­å¹³å°ã€‚è€Œå¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°åªæ˜¯å¾®ä¿¡å¼€æ”¾å¹³å°ä¸‹çš„ä¸€ä¸ªå…·ä½“åº”ç”¨åœºæ™¯ï¼Œæ˜¯é¢å‘å¼€å‘è€…è¿›è¡ŒæœåŠ¡çš„ä¸€ä¸ªç‹¬ç«‹åº”ç”¨ã€‚</p><h3 id="äº”ã€ç¬¬ä¸‰æ–¹å¹³å°ä¸­å•†å®¶å’ŒæœåŠ¡å•†çš„è§’è‰²ä¸å…³ç³»"><a href="#äº”ã€ç¬¬ä¸‰æ–¹å¹³å°ä¸­å•†å®¶å’ŒæœåŠ¡å•†çš„è§’è‰²ä¸å…³ç³»" class="headerlink" title="äº”ã€ç¬¬ä¸‰æ–¹å¹³å°ä¸­å•†å®¶å’ŒæœåŠ¡å•†çš„è§’è‰²ä¸å…³ç³»"></a>äº”ã€ç¬¬ä¸‰æ–¹å¹³å°ä¸­å•†å®¶å’ŒæœåŠ¡å•†çš„è§’è‰²ä¸å…³ç³»</h3><p>â€ƒåœ¨æœåŠ¡å•†ä»£å•†å®¶è¿è¥å…¬ä¼—å·å’Œå°ç¨‹åºçš„åœºæ™¯ä¸­ï¼Œé€šå¸¸ä¼šå¯¹å•†å®¶çš„å¼€æ”¾å¹³å°å¸å·å’ŒæœåŠ¡å•†çš„ç¬¬ä¸‰æ–¹å¹³å°å¸å·å…³ç³»æ··æ·†ã€‚ä¸ºäº†é¿å…å†å‡ºç°æ­¤æƒ…å†µï¼Œå¼€å‘è€…å¯å‚è€ƒä¸‹å›¾ç†æ¸…ç›¸å…³å…³ç³»ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/781bd3c78d634782a770ff9d655482cb~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h3 id="å…­ã€æ¨¡æ¿å°ç¨‹åºå’Œå•†å®¶å°ç¨‹åº"><a href="#å…­ã€æ¨¡æ¿å°ç¨‹åºå’Œå•†å®¶å°ç¨‹åº" class="headerlink" title="å…­ã€æ¨¡æ¿å°ç¨‹åºå’Œå•†å®¶å°ç¨‹åº"></a>å…­ã€æ¨¡æ¿å°ç¨‹åºå’Œå•†å®¶å°ç¨‹åº</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b730f1ee1484a398ab030227433c190~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h2 id="ä¸ƒã€å¦‚ä½•åŸºäºæ¨¡æ¿å°ç¨‹åºè¿›è¡Œä¸ªåˆ«å•†å®¶å°ç¨‹åºçš„å®šåˆ¶åŒ–å¼€å‘"><a href="#ä¸ƒã€å¦‚ä½•åŸºäºæ¨¡æ¿å°ç¨‹åºè¿›è¡Œä¸ªåˆ«å•†å®¶å°ç¨‹åºçš„å®šåˆ¶åŒ–å¼€å‘" class="headerlink" title="ä¸ƒã€å¦‚ä½•åŸºäºæ¨¡æ¿å°ç¨‹åºè¿›è¡Œä¸ªåˆ«å•†å®¶å°ç¨‹åºçš„å®šåˆ¶åŒ–å¼€å‘"></a>ä¸ƒã€å¦‚ä½•åŸºäºæ¨¡æ¿å°ç¨‹åºè¿›è¡Œä¸ªåˆ«å•†å®¶å°ç¨‹åºçš„å®šåˆ¶åŒ–å¼€å‘</h2><p>â€ƒå½“æœåŠ¡å•†å¸Œæœ›åœ¨å°ç¨‹åºæ¨¡æ¿ä»£ç ä¸­ç»“åˆæŸä¸ªå•†å®¶å°ç¨‹åºè¿›è¡Œä¸ªæ€§åŒ–çš„å¼€å‘å’Œè°ƒè¯•ï¼Œå³å¯é€šè¿‡extAppidå‚æ•°æ¥å®Œæˆã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7cc58842d77b40b4ae8ea8257d9565ee~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8660416b7ec9479b9df9a431b02360d7~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h3 id="å…«ã€æœåŠ¡å•†å¦‚ä½•ä»£å•†å®¶å¼€å‘å°ç¨‹åº"><a href="#å…«ã€æœåŠ¡å•†å¦‚ä½•ä»£å•†å®¶å¼€å‘å°ç¨‹åº" class="headerlink" title="å…«ã€æœåŠ¡å•†å¦‚ä½•ä»£å•†å®¶å¼€å‘å°ç¨‹åº"></a>å…«ã€æœåŠ¡å•†å¦‚ä½•ä»£å•†å®¶å¼€å‘å°ç¨‹åº</h3><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7510d47a31448ff921b0332101832b5~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h3 id="ä¹ã€ä»£å¼€å‘å°ç¨‹åºæ™®é€šæ¨¡æ¿åº“å’Œæ ‡å‡†æ¨¡æ¿åº“"><a href="#ä¹ã€ä»£å¼€å‘å°ç¨‹åºæ™®é€šæ¨¡æ¿åº“å’Œæ ‡å‡†æ¨¡æ¿åº“" class="headerlink" title="ä¹ã€ä»£å¼€å‘å°ç¨‹åºæ™®é€šæ¨¡æ¿åº“å’Œæ ‡å‡†æ¨¡æ¿åº“"></a>ä¹ã€ä»£å¼€å‘å°ç¨‹åºæ™®é€šæ¨¡æ¿åº“å’Œæ ‡å‡†æ¨¡æ¿åº“</h3><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0912951ed3324d7eb3a8176a2aa82b71~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h3 id="åã€æ™®é€šå°ç¨‹åºå¼€å‘VSç¬¬ä¸‰æ–¹å°ç¨‹åºå¼€å‘"><a href="#åã€æ™®é€šå°ç¨‹åºå¼€å‘VSç¬¬ä¸‰æ–¹å°ç¨‹åºå¼€å‘" class="headerlink" title="åã€æ™®é€šå°ç¨‹åºå¼€å‘VSç¬¬ä¸‰æ–¹å°ç¨‹åºå¼€å‘"></a>åã€æ™®é€šå°ç¨‹åºå¼€å‘VSç¬¬ä¸‰æ–¹å°ç¨‹åºå¼€å‘</h3><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8df52157a684b5cbcade587f401a99b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.image" alt="image.png"></p><h3 id="åä¸€ã€å‰ç«¯æ‰“åŒ…ä¸åŒç‰ˆæœ¬ä»£ç çš„å¼€å‘æµç¨‹"><a href="#åä¸€ã€å‰ç«¯æ‰“åŒ…ä¸åŒç‰ˆæœ¬ä»£ç çš„å¼€å‘æµç¨‹" class="headerlink" title="åä¸€ã€å‰ç«¯æ‰“åŒ…ä¸åŒç‰ˆæœ¬ä»£ç çš„å¼€å‘æµç¨‹"></a>åä¸€ã€å‰ç«¯æ‰“åŒ…ä¸åŒç‰ˆæœ¬ä»£ç çš„å¼€å‘æµç¨‹</h3><p>â€ƒç›®å‰å‰ç«¯ä½¿ç”¨çš„æ˜¯ä¸€å¥—ä»£ç ï¼ŒåŸºäºè¿™å¥—ä»£ç å¯ä»¥ç”Ÿæˆæ™®é€šå°ç¨‹åºã€æ¨¡æ¿å°ç¨‹åºå’Œå•†å®¶å°ç¨‹åºã€‚é‚£ä¹ˆä¸ºäº†ç”Ÿæˆå¯¹åº”ç›®çš„çš„å°ç¨‹åºï¼Œå‰ç«¯ä¾§éœ€è¦è¿›è¡Œè¿è¡Œä¸åŒçš„æ‰“åŒ…è„šæœ¬ã€‚ â€ƒå¯ä»¥é€šè¿‡åœ¨package.jsonä¸­é…ç½®ä¸åŒçš„æ‰“åŒ…å‘½ä»¤ï¼Œç»“åˆé¡¹ç›®ä¸­ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œä»è€Œè¾¾åˆ°ä¸€ä¸ªå‘½ä»¤äº§å‡ºä¸åŒç›®çš„çš„ä»£ç ã€‚</p><h3 id="åäºŒã€é‡è¦æ–‡æ¡£æ±‡æ€»"><a href="#åäºŒã€é‡è¦æ–‡æ¡£æ±‡æ€»" class="headerlink" title="åäºŒã€é‡è¦æ–‡æ¡£æ±‡æ€»"></a>åäºŒã€é‡è¦æ–‡æ¡£æ±‡æ€»</h3><ol><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/getting_started/terminology_introduce.html" title="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/getting_started/terminology_introduce.html">åŸºæœ¬æ¦‚å¿µä»‹ç»</a></li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/getting_started/how_to_call_api.html" title="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/getting_started/how_to_call_api.html">æœåŠ¡å•†å¦‚ä½•ä»£å•†å®¶è°ƒç”¨æ¥å£</a></li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/product/how_to_dev.html" title="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/product/how_to_dev.html">æœåŠ¡å•†å¦‚ä½•ä»£å•†å®¶å¼€å‘å°ç¨‹åº</a></li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/operation/thirdparty/template.html" title="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/operation/thirdparty/template.html">å°ç¨‹åºæ¨¡æ¿åº“ç®¡ç†</a></li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/devtools/ext.html" title="https://developers.weixin.qq.com/miniprogram/dev/devtools/ext.html">å°ç¨‹åºå¼€å‘æ–‡æ¡£â€”å·¥å…·</a></li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/ext/wx.getExtConfig.html" title="https://developers.weixin.qq.com/miniprogram/dev/api/ext/wx.getExtConfig.html">ç¬¬ä¸‰æ–¹å¹³å°api</a></li></ol><h3 id="åä¸‰ã€è¡¥å……è¯´æ˜"><a href="#åä¸‰ã€è¡¥å……è¯´æ˜" class="headerlink" title="åä¸‰ã€è¡¥å……è¯´æ˜"></a>åä¸‰ã€è¡¥å……è¯´æ˜</h3><ol><li>å½“æœåŠ¡å•†çš„ã€Œæ™®é€šå°ç¨‹åºã€åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ä¸Šè¢«ç»‘å®šä¸ºã€Œå¼€å‘å°ç¨‹åºã€æ—¶ï¼Œå¼€æ”¾å°ç¨‹åºçš„ç‰ˆæœ¬ç®¡ç†è¢«ç¦ç”¨äº†ï¼Œä¹Ÿå°±æ— æ³•å‘æ™®é€šå°ç¨‹åºä¸€æ ·è¿›è¡Œä¸Šä¼ ä½“éªŒç‰ˆå’Œå‘å¸ƒäº†ã€‚</li><li>æäº¤æ¨¡æ¿å®¡æ ¸æ—¶çš„ã€Œåœºæ™¯æ ‡ç­¾ã€é€‰æ‹©ç›®å‰åªæ”¯æŒâ€œäº¤æ˜“ç»„ä»¶â€ã€‚å¾®ä¿¡å®˜æ–¹è¦æ±‚é€‰æ‹©è¯¥åœºæ™¯æ ‡ç­¾ï¼Œè¯·ç¡®ä¿åŸºäºè¯¥æ¨¡æ¿å‘å¸ƒçš„å°ç¨‹åºåŒ…å«å®¢æœå’Œå”®ååŠŸèƒ½ï¼Œå¦åˆ™ä¼šå®¡æ ¸ä¸é€šè¿‡ã€‚ï¼ˆå¯ä»¥é€‰æ‹©æ™®é€šæ¨¡æ¿ï¼Œæ™®é€šæ¨¡æ¿ä¸éœ€è¦æäº¤åˆ°å¾®ä¿¡å®¡æ ¸ï¼Œä¹Ÿå°±ä¸å­˜åœ¨é€‰æ‹©åœºæ™¯æ ‡ç­¾äº†ï¼‰</li><li>æ™®é€šæ¨¡æ¿åº“ä¸éœ€è¦å®¡æ ¸ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•åœ¨åå°æäº¤ext.jsonã€‚ä½†æ˜¯å¯ä»¥åœ¨åç«¯è°ƒç”¨æ¥å£ç»™å•†å®¶å°ç¨‹åºæäº¤ä»£ç æ—¶æŠŠ ext.json çš„å†…å®¹ä½œä¸ºå…¥å‚å®Œæˆå®šåˆ¶åŒ–å‚æ•°çš„æ³¨å…¥ã€‚</li><li>æ ‡å‡†æ¨¡æ¿åº“éœ€è¦åœ¨åå°æäº¤å®¡æ ¸ï¼ŒåŒæ—¶å®¡æ ¸å¼¹çª—ä¸­éœ€è¦è¾“å…¥ext.jsonçš„å†…å®¹ã€‚</li><li>ç¬¬ä¸‰æ–¹å¼€å‘å¹³å°æ˜¯æ²¡æœ‰å•†å®¶å°ç¨‹åºçš„AppSecretçš„ï¼Œåœ¨è·å–ç”¨æˆ·çš„openIdå’ŒunionIdæ˜¯æ— æ³•è·Ÿæ™®é€šå°ç¨‹åºé‚£æ ·ä½¿ç”¨çš„ã€‚å¯ä»¥ç”¨è¿™ä¸ªæ¥å£æ›¿ä»£å®Œæˆ<a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/api/others/WeChat_login.html" title="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/api/others/WeChat_login.html">developers.weixin.qq.com&#x2F;doc&#x2F;oplatfoâ€¦</a></li><li>ç¬¬ä¸‰æ–¹å¹³å°ä»£å¼€å‘å°ç¨‹åºæµç¨‹ä¸­çš„ï¼šæäº¤ä»£ç è‡³ä½“éªŒç‰ˆã€æäº¤ä½“éªŒç‰ˆå»å®¡æ ¸ä»¥åŠå‘å¸ƒé€šè¿‡å®¡æ ¸åçš„ç‰ˆæœ¬ä¸Šçº¿ç­‰ç­‰ã€‚è¿™äº›æ“ä½œéƒ½æ˜¯æ²¡æœ‰åå°ç•Œé¢å»æ“ä½œçš„ï¼ˆå¾®ä¿¡å®˜æ–¹å·æ‡’æ²¡å¼„ï¼‰ï¼Œéƒ½éœ€è¦é€šè¿‡æ¥å£çš„æ–¹å¼å»æ“ä½œã€‚å»ºè®®åç«¯åŒäº‹å†™å¥½æ¥å£åå¯¼å‡ºä¸€ä¸ªPOstMançš„collectionï¼Œåç»­å¯ç”±å‰ç«¯è‡ªè¡Œæ“ä½œã€‚</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºå¼€å‘æ”»ç•¥</title>
      <link href="/post/b3b17cda.html"/>
      <url>/post/b3b17cda.html</url>
      
        <content type="html"><![CDATA[<h1 id="å°ç¨‹åº-ç™»å½•"><a href="#å°ç¨‹åº-ç™»å½•" class="headerlink" title="å°ç¨‹åº-ç™»å½•"></a>å°ç¨‹åº-ç™»å½•</h1><h2 id="unionidå’Œopenid"><a href="#unionidå’Œopenid" class="headerlink" title="unionidå’Œopenid"></a>unionidå’Œopenid</h2><p>äº†è§£å°ç¨‹åºç™»é™†ä¹‹å‰ï¼Œæˆ‘ä»¬å†™äº†è§£ä¸‹å°ç¨‹åº&#x2F;å…¬ä¼—å·ç™»å½•æ¶‰åŠåˆ°ä¸¤ä¸ªæœ€å…³é”®çš„ç”¨æˆ·æ ‡è¯†ï¼š</p><ul><li><code>OpenId</code> æ˜¯ä¸€ä¸ªç”¨æˆ·å¯¹äºä¸€ä¸ªå°ç¨‹åºï¼å…¬ä¼—å·çš„æ ‡è¯†ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è¿™ä¸ªæ ‡è¯†è¯†åˆ«å‡ºç”¨æˆ·ã€‚</li><li><code>UnionId</code> æ˜¯ä¸€ä¸ªç”¨æˆ·å¯¹äºåŒä¸»ä½“å¾®ä¿¡å°ç¨‹åºï¼å…¬ä¼—å·ï¼APPçš„æ ‡è¯†ï¼Œå¼€å‘è€…éœ€è¦åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ä¸‹ç»‘å®šç›¸åŒè´¦å·çš„ä¸»ä½“ã€‚å¼€å‘è€…å¯é€šè¿‡UnionIdï¼Œå®ç°å¤šä¸ªå°ç¨‹åºã€å…¬ä¼—å·ã€ç”šè‡³APP ä¹‹é—´çš„æ•°æ®äº’é€šäº†ã€‚</li></ul><h2 id="å…³é”®Api"><a href="#å…³é”®Api" class="headerlink" title="å…³é”®Api"></a>å…³é”®Api</h2><ul><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/api-login.html"><code>wx.login</code></a> å®˜æ–¹æä¾›çš„ç™»å½•èƒ½åŠ›</li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/signature.html%23wxchecksessionobject"><code>wx.checkSession</code></a> æ ¡éªŒç”¨æˆ·å½“å‰çš„session_keyæ˜¯å¦æœ‰æ•ˆ</li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/authorize.html"><code>wx.authorize</code></a> æå‰å‘ç”¨æˆ·å‘èµ·æˆæƒè¯·æ±‚</li><li><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/api-login.html"><code>wx.getUserInfo</code></a> è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</li></ul><h2 id="ç™»å½•æµç¨‹è®¾è®¡"><a href="#ç™»å½•æµç¨‹è®¾è®¡" class="headerlink" title="ç™»å½•æµç¨‹è®¾è®¡"></a>ç™»å½•æµç¨‹è®¾è®¡</h2><p>ä»¥ä¸‹ä»ç¬”è€…æ¥è§¦è¿‡çš„å‡ ç§ç™»å½•æµç¨‹æ¥åšé˜è¿°:</p><h3 id="åˆ©ç”¨ç°æœ‰ç™»å½•ä½“ç³»"><a href="#åˆ©ç”¨ç°æœ‰ç™»å½•ä½“ç³»" class="headerlink" title="åˆ©ç”¨ç°æœ‰ç™»å½•ä½“ç³»"></a>åˆ©ç”¨ç°æœ‰ç™»å½•ä½“ç³»</h3><p>ç›´æ¥å¤ç”¨ç°æœ‰ç³»ç»Ÿçš„ç™»å½•ä½“ç³»ï¼Œåªéœ€è¦åœ¨å°ç¨‹åºç«¯è®¾è®¡ç”¨æˆ·åï¼Œå¯†ç &#x2F;éªŒè¯ç è¾“å…¥é¡µé¢ï¼Œä¾¿å¯ä»¥ç®€ä¾¿çš„å®ç°ç™»å½•ï¼Œåªéœ€è¦ä¿æŒè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒå³å¯ã€‚</p><h3 id="åˆ©ç”¨OpenId-åˆ›å»ºç”¨æˆ·ä½“ç³»"><a href="#åˆ©ç”¨OpenId-åˆ›å»ºç”¨æˆ·ä½“ç³»" class="headerlink" title="åˆ©ç”¨OpenId åˆ›å»ºç”¨æˆ·ä½“ç³»"></a>åˆ©ç”¨OpenId åˆ›å»ºç”¨æˆ·ä½“ç³»</h3><p>ğŸ‘†æè¿‡ï¼Œ<code>OpenId</code> æ˜¯ä¸€ä¸ªå°ç¨‹åºå¯¹äºä¸€ä¸ªç”¨æˆ·çš„æ ‡è¯†ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥è½»æ¾çš„å®ç°ä¸€å¥—åŸºäºå°ç¨‹åºçš„ç”¨æˆ·ä½“ç³»ï¼Œå€¼å¾—ä¸€æçš„æ˜¯è¿™ç§ç”¨æˆ·ä½“ç³»å¯¹ç”¨æˆ·çš„æ‰“æ‰°æœ€ä½ï¼Œå¯ä»¥å®ç°é™é»˜ç™»å½•ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>å°ç¨‹åºå®¢æˆ·ç«¯é€šè¿‡ <code>wx.login</code> è·å– code</li><li>ä¼ é€’ code å‘æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ‹¿åˆ° code è°ƒç”¨å¾®ä¿¡ç™»å½•å‡­è¯æ ¡éªŒæ¥å£ï¼Œå¾®ä¿¡æœåŠ¡å™¨è¿”å› <code>openid</code> å’Œä¼šè¯å¯†é’¥ <code>session_key</code> ï¼Œæ­¤æ—¶å¼€å‘è€…æœåŠ¡ç«¯ä¾¿å¯ä»¥åˆ©ç”¨ <code>openid</code> ç”Ÿæˆç”¨æˆ·å…¥åº“ï¼Œå†å‘å°ç¨‹åºå®¢æˆ·ç«¯è¿”å›è‡ªå®šä¹‰ç™»å½•æ€</li><li>å°ç¨‹åºå®¢æˆ·ç«¯ç¼“å­˜ ï¼ˆé€šè¿‡<code>storage</code>ï¼‰è‡ªå®šä¹‰ç™»å½•æ€ï¼ˆtokenï¼‰ï¼Œåç»­è°ƒç”¨æ¥å£æ—¶æºå¸¦è¯¥ç™»å½•æ€ä½œä¸ºç”¨æˆ·èº«ä»½æ ‡è¯†å³å¯</li></ol><h3 id="åˆ©ç”¨-Unionid-åˆ›å»ºç”¨æˆ·ä½“ç³»"><a href="#åˆ©ç”¨-Unionid-åˆ›å»ºç”¨æˆ·ä½“ç³»" class="headerlink" title="åˆ©ç”¨ Unionid åˆ›å»ºç”¨æˆ·ä½“ç³»"></a>åˆ©ç”¨ Unionid åˆ›å»ºç”¨æˆ·ä½“ç³»</h3><p>å¦‚æœæƒ³å®ç°å¤šä¸ªå°ç¨‹åºï¼Œå…¬ä¼—å·ï¼Œå·²æœ‰ç™»å½•ç³»ç»Ÿçš„æ•°æ®äº’é€šï¼Œå¯ä»¥é€šè¿‡è·å–åˆ°ç”¨æˆ· unionid çš„æ–¹å¼å»ºç«‹ç”¨æˆ·ä½“ç³»ã€‚å› ä¸º unionid åœ¨åŒä¸€å¼€æ”¾å¹³å°ä¸‹çš„æ‰€æ‰€æœ‰åº”ç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œé€šè¿‡ <code>unionid</code> å»ºç«‹çš„ç”¨æˆ·ä½“ç³»å³å¯å®ç°å…¨å¹³å°æ•°æ®çš„äº’é€šï¼Œæ›´æ–¹ä¾¿çš„æ¥å…¥åŸæœ‰çš„åŠŸèƒ½ï¼Œé‚£å¦‚ä½•è·å– <code>unionid</code> å‘¢ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>å¦‚æœæˆ·å…³æ³¨äº†æŸä¸ªç›¸åŒä¸»ä½“å…¬ä¼—å·ï¼Œæˆ–æ›¾ç»åœ¨æŸä¸ªç›¸åŒä¸»ä½“Appã€å…¬ä¼—å·ä¸Šè¿›è¡Œè¿‡å¾®ä¿¡ç™»å½•æˆæƒï¼Œé€šè¿‡ <code>wx.login</code> å¯ä»¥ç›´æ¥è·å– åˆ° <code>unionid</code></li><li>ç»“åˆ <code>wx.getUserInfo</code> å’Œ <code>&lt;button open-type=&quot;getUserInfo&quot;&gt;&lt;button/&gt;</code> è¿™ä¸¤ç§æ–¹å¼å¼•å¯¼ç”¨æˆ·ä¸»åŠ¨æˆæƒï¼Œä¸»åŠ¨æˆæƒåé€šè¿‡è¿”å›çš„ä¿¡æ¯å’ŒæœåŠ¡ç«¯äº¤äº’ (è¿™é‡Œæœ‰ä¸€æ­¥éœ€è¦æœåŠ¡ç«¯è§£å¯†æ•°æ®çš„è¿‡ç¨‹ï¼Œå¾ˆç®€å•ï¼Œå¾®ä¿¡æä¾›äº†ç¤ºä¾‹ä»£ç ) å³å¯æ‹¿åˆ° <code>unionid</code> å»ºç«‹ç”¨æˆ·ä½“ç³»ï¼Œ ç„¶åç”±æœåŠ¡ç«¯è¿”å›ç™»å½•æ€ï¼Œæœ¬åœ°è®°å½•å³å¯å®ç°ç™»å½•ï¼Œé™„ä¸Šå¾®ä¿¡æä¾›çš„æœ€ä½³å®è·µï¼š<ul><li>è°ƒç”¨ wx.login è·å– codeï¼Œç„¶åä»å¾®ä¿¡åç«¯æ¢å–åˆ° session_keyï¼Œç”¨äºè§£å¯† getUserInfoè¿”å›çš„æ•æ„Ÿæ•°æ®ã€‚</li><li>ä½¿ç”¨ wx.getSetting è·å–ç”¨æˆ·çš„æˆæƒæƒ…å†µ<ul><li>å¦‚æœç”¨æˆ·å·²ç»æˆæƒï¼Œç›´æ¥è°ƒç”¨ API wx.getUserInfo è·å–ç”¨æˆ·æœ€æ–°çš„ä¿¡æ¯ï¼›</li><li>ç”¨æˆ·æœªæˆæƒï¼Œåœ¨ç•Œé¢ä¸­æ˜¾ç¤ºä¸€ä¸ªæŒ‰é’®æç¤ºç”¨æˆ·ç™»å…¥ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å¹¶æˆæƒåå°±è·å–åˆ°ç”¨æˆ·çš„æœ€æ–°ä¿¡æ¯ã€‚</li></ul></li><li>è·å–åˆ°ç”¨æˆ·æ•°æ®åå¯ä»¥è¿›è¡Œå±•ç¤ºæˆ–è€…å‘é€ç»™è‡ªå·±çš„åç«¯ã€‚</li></ul></li></ol><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol><li>éœ€è¦è·å– <code>unionid</code> å½¢å¼çš„ç™»å½•ä½“ç³»ï¼Œåœ¨ä»¥å‰ï¼ˆ18å¹´4æœˆä¹‹å‰ï¼‰æ˜¯é€šè¿‡ä»¥ä¸‹è¿™ç§æ–¹å¼æ¥å®ç°ï¼Œä½†åç»­å¾®ä¿¡åšäº†è°ƒæ•´ï¼ˆå› ä¸ºä¸€è¿›å…¥å°ç¨‹åºï¼Œä¸»åŠ¨å¼¹èµ·å„ç§æˆæƒå¼¹çª—çš„è¿™ç§å½¢å¼ï¼Œæ¯”è¾ƒå®¹æ˜“å¯¼è‡´ç”¨æˆ·æµå¤±ï¼‰ï¼Œè°ƒæ•´ä¸ºå¿…é¡»ä½¿ç”¨æŒ‰é’®å¼•å¯¼ç”¨æˆ·ä¸»åŠ¨æˆæƒçš„æ–¹å¼ï¼Œè¿™æ¬¡è°ƒæ•´å¯¹å¼€å‘è€…å½±å“è¾ƒå¤§ï¼Œå¼€å‘è€…éœ€è¦æ³¨æ„éµå®ˆå¾®ä¿¡çš„è§„åˆ™ï¼Œå¹¶åŠæ—¶å’Œä¸šåŠ¡æ–¹æ²Ÿé€šä¸šåŠ¡å½¢å¼ï¼Œä¸è¦å­˜åœ¨ä¾¥å¹¸å¿ƒç†ï¼Œä»¥é˜²é€ æˆå°ç¨‹åºä¸è¿‡å®¡ç­‰æƒ…å†µã€‚</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">abnf</span><br><span class="line">å¤åˆ¶ä»£ç    wx.login(è·å–code) <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>&gt; wx.getUserInfo(ç”¨æˆ·æˆæƒ) <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>&gt; è·å– unionid</span><br></pre></td></tr></table></figure><ol><li>å› ä¸ºå°ç¨‹åºä¸å­˜åœ¨ <code>cookie</code> çš„æ¦‚å¿µï¼Œ ç™»å½•æ€å¿…é¡»ç¼“å­˜åœ¨æœ¬åœ°ï¼Œå› æ­¤å¼ºçƒˆå»ºè®®ä¸ºç™»å½•æ€è®¾ç½®è¿‡æœŸæ—¶é—´</li><li>å€¼å¾—ä¸€æçš„æ˜¯å¦‚æœéœ€è¦æ”¯æŒé£æ§å®‰å…¨æ ¡éªŒï¼Œå¤šå¹³å°ç™»å½•ç­‰åŠŸèƒ½ï¼Œå¯èƒ½éœ€è¦åŠ å…¥ä¸€äº›å…¬å…±å‚æ•°ï¼Œä¾‹å¦‚platformï¼Œchannelï¼ŒdeviceParamç­‰å‚æ•°ã€‚åœ¨å’ŒæœåŠ¡ç«¯ç¡®å®šæ–¹æ¡ˆæ—¶ï¼Œä½œä¸ºå‰ç«¯åŒå­¦åº”è¯¥åŠæ—¶æå‡ºè¿™äº›åˆç†çš„å»ºè®®ï¼Œè®¾è®¡åˆç†çš„ç³»ç»Ÿã€‚</li><li><code>openid</code> ï¼Œ <code>unionid</code> ä¸è¦åœ¨æ¥å£ä¸­æ˜æ–‡ä¼ è¾“ï¼Œè¿™æ˜¯ä¸€ç§å±é™©çš„è¡Œä¸ºï¼ŒåŒæ—¶ä¹Ÿå¾ˆä¸ä¸“ä¸šã€‚</li></ol><h1 id="å°ç¨‹åº-å›¾ç‰‡å¯¼å‡º"><a href="#å°ç¨‹åº-å›¾ç‰‡å¯¼å‡º" class="headerlink" title="å°ç¨‹åº-å›¾ç‰‡å¯¼å‡º"></a>å°ç¨‹åº-å›¾ç‰‡å¯¼å‡º</h1><p>ç»å¸¸å¼€å‘å’Œä½¿ç”¨å°ç¨‹åºçš„åŒå­¦å¯¹è¿™ä¸ªåŠŸèƒ½ä¸€å®šä¸é™Œç”Ÿï¼Œè¿™æ˜¯ä¸€ç§å¸¸è§çš„å¼•æµæ–¹å¼ï¼Œä¸€èˆ¬åŒæ—¶ä¼šåœ¨å›¾ç‰‡ä¸­é™„åŠ ä¸€ä¸ªå°ç¨‹åºäºŒç»´ç ã€‚</p><h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h2><ol><li>å€ŸåŠ© <code>canvas</code> å…ƒç´ ï¼Œå°†éœ€è¦å¯¼å‡ºçš„æ ·å¼é¦–å…ˆåœ¨ <code>canvas</code> ç”»å¸ƒä¸Šç»˜åˆ¶å‡ºæ¥ ï¼ˆapiåŸºæœ¬å’Œh5ä¿æŒä¸€è‡´ï¼Œä½†æœ‰è½»å¾®å·®å¼‚ï¼Œä½¿ç”¨æ—¶æ³¨æ„å³å¯ï¼‰</li><li>å€ŸåŠ©å¾®ä¿¡æä¾›çš„ <code>canvasToTempFilePath</code> å¯¼å‡ºå›¾ç‰‡ï¼Œæœ€åå†ä½¿ç”¨ <code>saveImageToPhotosAlbum</code> ï¼ˆéœ€è¦æˆæƒï¼‰ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°</li></ol><h2 id="å¦‚ä½•ä¼˜é›…å®ç°"><a href="#å¦‚ä½•ä¼˜é›…å®ç°" class="headerlink" title="å¦‚ä½•ä¼˜é›…å®ç°"></a>å¦‚ä½•ä¼˜é›…å®ç°</h2><p>æ ¹æ®ä¸Šè¿°çš„åŸç†æ¥çœ‹ï¼Œå®ç°æ˜¯å¾ˆç®€å•çš„ï¼Œåªä¸è¿‡å°±æ˜¯è®¾è®¡ç¨¿çš„æå–ï¼Œç»˜åˆ¶å³å¯ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œæ¯æ¬¡éƒ½è¿™æ ·å†™ä¸€å¨ä»£ç å²‚ä¸æ˜¯éå¸¸çš„éš¾å—ã€‚é‚£å°ç¨‹åºå¦‚ä½•è®¾è®¡ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å¯¼å‡ºå›¾ç‰‡å‘¢ï¼Ÿæ€è·¯å¦‚ä¸‹ï¼š</p><ol><li>ç»˜åˆ¶å‡ºéœ€è¦çš„æ ·å¼è¿™ä¸€æ­¥æ˜¯çœç•¥ä¸æ‰çš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ªç»˜åˆ¶åº“ï¼ŒåŒ…å«å¸¸è§å›¾å½¢çš„ç»˜åˆ¶ï¼Œä¾‹å¦‚çŸ©å½¢ï¼Œåœ†è§’çŸ©å½¢ï¼Œåœ†ï¼Œ æ‰‡å½¢ï¼Œ ä¸‰è§’å½¢ï¼Œ æ–‡å­—ï¼Œå›¾ç‰‡å‡å°‘ç»˜åˆ¶ä»£ç ï¼Œåªéœ€è¦æç‚¼å‡ºæ ·å¼ä¿¡æ¯ï¼Œä¾¿å¯ä»¥è½»æ¾çš„ç»˜åˆ¶ï¼Œæœ€åå¯¼å‡ºå›¾ç‰‡å­˜å…¥ç›¸å†Œã€‚ç¬”è€…è§‰å¾—ä»¥ä¸‹è¿™ç§æ–¹å¼ç»˜åˆ¶æ›´ä¸ºä¼˜é›…æ¸…æ™°ä¸€äº›ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨åŠ å…¥ä¸€ä¸ªtypeå‚æ•°æ¥æŒ‡å®šç»˜åˆ¶ç±»å‹ï¼Œä¼ å…¥çš„ä¸€ä¸ªæ˜¯æ ·å¼æ•°ç»„ï¼Œå®ç°ç»˜åˆ¶ã€‚</li><li>ç»“åˆä¸Šä¸€æ­¥çš„å®ç°ï¼Œå¦‚æœå¯¹äºåŒä¸€ç±»å‹çš„å¡ç‰‡æœ‰å¤šæ¬¡å¯¼å‡ºéœ€æ±‚çš„åœºæ™¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶çš„æ–¹å¼ï¼Œå°è£…åŒä¸€ç±»å‹çš„å¡ç‰‡ä¸ºä¸€ä¸ªé€šç”¨ç»„ä»¶ï¼Œåœ¨éœ€è¦å¯¼å‡ºå›¾ç‰‡åŠŸèƒ½çš„åœ°æ–¹ï¼Œå¼•å…¥è¯¥ç»„ä»¶å³å¯ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç     </span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">CanvasKit</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">drawImg</span>(<span class="params">option = &#123;&#125;</span>) &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">drawRect</span>(<span class="params">option = &#123;&#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">drawText</span>(<span class="params">option = &#123;&#125;</span>) &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">exportImg</span>(<span class="params">option = &#123;&#125;</span>) &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> drawer = <span class="keyword">new</span> <span class="title class_">CanvasKit</span>(<span class="string">&#x27;canvasId&#x27;</span>).<span class="title function_">drawImg</span>(styleObj1).<span class="title function_">drawText</span>(styleObj2)</span><br><span class="line">  drawer.<span class="title function_">exportImg</span>()</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹-1"><a href="#æ³¨æ„äº‹é¡¹-1" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>å°ç¨‹åºä¸­æ— æ³•ç»˜åˆ¶ç½‘ç»œå›¾ç‰‡åˆ°canvasä¸Šï¼Œéœ€è¦é€šè¿‡downLoadFile å…ˆä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°ä¸´æ—¶æ–‡ä»¶æ‰å¯ä»¥ç»˜åˆ¶</li><li>é€šå¸¸éœ€è¦ç»˜åˆ¶äºŒç»´ç åˆ°å¯¼å‡ºçš„å›¾ç‰‡ä¸Šï¼Œæœ‰<a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/qrcode.html">ä¸€ç§æ–¹å¼</a>å¯¼å‡ºäºŒç»´ç æ—¶ï¼Œéœ€è¦æºå¸¦çš„å‚æ•°å¿…é¡»åšç¼–ç ï¼Œè€Œä¸”æœ‰å…·ä½“çš„é•¿åº¦ï¼ˆ32å¯è§å­—ç¬¦ï¼‰é™åˆ¶ï¼Œå¯ä»¥å€ŸåŠ©æœåŠ¡ç«¯ç”Ÿæˆ <code>çŸ­é“¾æ¥</code> çš„æ–¹å¼æ¥è§£å†³</li></ol><h1 id="å°ç¨‹åº-æ•°æ®ç»Ÿè®¡"><a href="#å°ç¨‹åº-æ•°æ®ç»Ÿè®¡" class="headerlink" title="å°ç¨‹åº-æ•°æ®ç»Ÿè®¡"></a>å°ç¨‹åº-æ•°æ®ç»Ÿè®¡</h1><p>æ•°æ®ç»Ÿè®¡ä½œä¸ºç›®å‰ä¸€ç§å¸¸ç”¨çš„åˆ†æç”¨æˆ·è¡Œä¸ºçš„æ–¹å¼ï¼Œå°ç¨‹åºç«¯ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚å°ç¨‹åºé‡‡å–çš„æ›å…‰ï¼Œç‚¹å‡»æ•°æ®åŸ‹ç‚¹å…¶å®å’Œh5åŸç†æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯åŸ‹ç‚¹ä½œä¸ºä¸€ä¸ªå’Œä¸šåŠ¡é€»è¾‘ä¸ç›¸å…³çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¦‚æœåœ¨æ¯ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œæ¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸåŠ å…¥å„ç§åŸ‹ç‚¹ä»£ç ï¼Œåˆ™ä¼šå¹²æ‰°æ­£å¸¸çš„ä¸šåŠ¡é€»è¾‘ï¼Œå’Œä½¿ä»£ç å˜çš„è‡ƒè‚¿ï¼Œç¬”è€…æä¾›ä»¥ä¸‹å‡ ç§æ€è·¯æ¥è§£å†³æ•°æ®åŸ‹ç‚¹ï¼š</p><h2 id="è®¾è®¡ä¸€ä¸ªåŸ‹ç‚¹sdk"><a href="#è®¾è®¡ä¸€ä¸ªåŸ‹ç‚¹sdk" class="headerlink" title="è®¾è®¡ä¸€ä¸ªåŸ‹ç‚¹sdk"></a>è®¾è®¡ä¸€ä¸ªåŸ‹ç‚¹sdk</h2><p>å°ç¨‹åºçš„ä»£ç ç»“æ„æ˜¯ï¼Œæ¯ä¸€ä¸ª Page ä¸­éƒ½æœ‰ä¸€ä¸ª Page æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªåŒ…å«ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ•°æ®çš„ <code>ä¸šåŠ¡é€»è¾‘å¯¹è±¡</code> åŒ…è£…è¿™å±‚æ•°æ®ï¼Œå€ŸåŠ©å°ç¨‹åºçš„åº•å±‚é€»è¾‘å®ç°é¡µé¢çš„ä¸šåŠ¡é€»è¾‘ã€‚é€šè¿‡è¿™ä¸ªæˆ‘ä»¬å¯ä»¥æƒ³åˆ°æ€è·¯ï¼Œå¯¹Pageè¿›è¡Œä¸€æ¬¡åŒ…è£…ï¼Œç¯¡æ”¹å®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œç‚¹å‡»äº‹ä»¶ï¼Œæ··å…¥åŸ‹ç‚¹ä»£ç ï¼Œä¸å¹²æ‰°ä¸šåŠ¡é€»è¾‘ï¼Œåªè¦åšä¸€äº›ç®€å•çš„é…ç½®å³å¯åŸ‹ç‚¹ï¼Œç®€å•çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">sqfå¤åˆ¶ä»£ç   </span><br><span class="line">  ä»£ç ä»…ä¾›ç†è§£æ€è·¯</span><br><span class="line">  page = function(<span class="built_in">params</span>) &#123;</span><br><span class="line">    let <span class="built_in">keys</span> = <span class="built_in">params</span>.<span class="built_in">keys</span>()</span><br><span class="line">    <span class="built_in">keys</span>.<span class="keyword">forEach</span>(v =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (v === <span class="string">&#x27;onLoad&#x27;</span>) &#123;</span><br><span class="line">          <span class="built_in">params</span>[v] = function(options) &#123;</span><br><span class="line">            stat()   <span class="comment">//æ›å…‰åŸ‹ç‚¹ä»£ç </span></span><br><span class="line">            <span class="built_in">params</span>[v].<span class="built_in">call</span>(this, options)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (v.includes(<span class="string">&#x27;click&#x27;</span>)) &#123;</span><br><span class="line">          <span class="built_in">params</span>[v] = funciton(event) &#123; </span><br><span class="line">            let data = event.dataset.config</span><br><span class="line">            stat(data)  <span class="comment">// ç‚¹å‡»åŸ‹ç‚¹</span></span><br><span class="line">            <span class="built_in">param</span>[v].<span class="built_in">call</span>(this)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ€è·¯ä¸å…‰é€‚ç”¨äºåŸ‹ç‚¹ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä½œå…¨å±€å¼‚å¸¸å¤„ç†ï¼Œè¯·æ±‚çš„ç»Ÿä¸€å¤„ç†ç­‰åœºæ™¯ã€‚</p><h2 id="åˆ†ææ¥å£"><a href="#åˆ†ææ¥å£" class="headerlink" title="åˆ†ææ¥å£"></a>åˆ†ææ¥å£</h2><p>å¯¹äºç‰¹æ®Šçš„ä¸€äº›ä¸šåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å– <code>æ¥å£åŸ‹ç‚¹</code>ï¼Œä»€ä¹ˆå«æ¥å£åŸ‹ç‚¹å‘¢ï¼Ÿå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ‰çš„apiå¹¶ä¸æ˜¯å¤šå¤„è°ƒç”¨çš„ï¼Œåªä¼šåœ¨æŸä¸€ä¸ªç‰¹å®šçš„é¡µé¢è°ƒç”¨ï¼Œé€šè¿‡è¿™ä¸ªæ€è·¯æˆ‘ä»¬å¯ä»¥åˆ†æå‡ºï¼Œè¯¥æ¥å£è¢«è¯·æ±‚ï¼Œåˆ™è¿™ä¸ªè¡Œä¸ºè¢«è§¦å‘äº†ï¼Œåˆ™å®Œå…¨å¯ä»¥é€šè¿‡æœåŠ¡ç«¯æ—¥å¿—å¾—å‡ºåŸ‹ç‚¹æ•°æ®ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å±€é™æ€§è¾ƒå¤§ï¼Œè€Œä¸”å±äºåˆ†æç»“æœå¾—å‡ºè¿‡ç¨‹ï¼Œå¯èƒ½å­˜åœ¨è¯¯å·®ï¼Œä½†å¯ä»¥ä½œä¸ºä¸€ç§æ€è·¯äº†è§£ä¸€ä¸‹ã€‚</p><h2 id="å¾®ä¿¡è‡ªå®šä¹‰æ•°æ®åˆ†æ"><a href="#å¾®ä¿¡è‡ªå®šä¹‰æ•°æ®åˆ†æ" class="headerlink" title="å¾®ä¿¡è‡ªå®šä¹‰æ•°æ®åˆ†æ"></a><a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/analysis/index.html?t=18081011">å¾®ä¿¡è‡ªå®šä¹‰æ•°æ®åˆ†æ</a></h2><p>å¾®ä¿¡æœ¬èº«æä¾›çš„æ•°æ®åˆ†æèƒ½åŠ›ï¼Œå¾®ä¿¡æœ¬èº«æä¾›äº†å¸¸è§„åˆ†æå’Œè‡ªå®šä¹‰åˆ†æä¸¤ç§æ•°æ®åˆ†ææ–¹å¼ï¼Œåœ¨å°ç¨‹åºåå°é…ç½®å³å¯ã€‚å€ŸåŠ©<code>å°ç¨‹åºæ•°æ®åŠ©æ‰‹</code>è¿™æ¬¾å°ç¨‹åºå¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹ã€‚</p><h1 id="å°ç¨‹åº-å·¥ç¨‹åŒ–"><a href="#å°ç¨‹åº-å·¥ç¨‹åŒ–" class="headerlink" title="å°ç¨‹åº-å·¥ç¨‹åŒ–"></a>å°ç¨‹åº-å·¥ç¨‹åŒ–</h1><h2 id="å·¥ç¨‹åŒ–åšä»€ä¹ˆ"><a href="#å·¥ç¨‹åŒ–åšä»€ä¹ˆ" class="headerlink" title="å·¥ç¨‹åŒ–åšä»€ä¹ˆ"></a>å·¥ç¨‹åŒ–åšä»€ä¹ˆ</h2><p>ç›®å‰çš„å‰ç«¯å¼€å‘è¿‡ç¨‹ï¼Œå·¥ç¨‹åŒ–æ˜¯å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œé‚£å°ç¨‹åºå·¥ç¨‹åŒ–éƒ½éœ€è¦åšäº›ä»€ä¹ˆå‘¢ï¼Œå…ˆçœ‹ä¸‹ç›®å‰å°ç¨‹åºå¼€å‘å½“ä¸­å­˜åœ¨å“ªäº›é—®é¢˜éœ€è¦è§£å†³ï¼š</p><ol><li>ä¸æ”¯æŒ cssé¢„ç¼–è¯‘å™¨,ä½œä¸ºä¸€ç§ä¸»æµçš„ cssè§£å†³æ–¹æ¡ˆï¼Œä¸è®ºæ˜¯ less,sass,stylus éƒ½å¯ä»¥æå‡cssæ•ˆç‡</li><li>ä¸æ”¯æŒå¼•å…¥npmåŒ… ï¼ˆè¿™ä¸€æ¡ï¼Œä»å¾®ä¿¡å…¬å¼€è¯¾ä¸­å¬é—»ï¼Œå¾®ä¿¡å‡†å¤‡æ”¯æŒï¼‰</li><li>ä¸æ”¯æŒES7ç­‰åç»­çš„jsç‰¹æ€§ï¼Œå¥½ç”¨çš„async awaitç­‰ç‰¹æ€§éƒ½æ— æ³•ä½¿ç”¨</li><li>ä¸æ”¯æŒå¼•å…¥å¤–éƒ¨å­—ä½“æ–‡ä»¶ï¼Œåªæ”¯æŒbase64</li><li>æ²¡æœ‰ eslint ç­‰ä»£ç æ£€æŸ¥å·¥å…·</li></ol><h2 id="æ–¹æ¡ˆé€‰å‹"><a href="#æ–¹æ¡ˆé€‰å‹" class="headerlink" title="æ–¹æ¡ˆé€‰å‹"></a>æ–¹æ¡ˆé€‰å‹</h2><p>å¯¹äºç›®å‰å¸¸ç”¨çš„å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼Œwebpackï¼Œrollupï¼Œparcelç­‰æ¥çœ‹ï¼Œéƒ½å¸¸ç”¨ä¸å•é¡µåº”ç”¨çš„æ‰“åŒ…å’Œå¤„ç†ï¼Œè€Œå°ç¨‹åºå¤©ç”Ÿæ˜¯ â€œå¤šé¡µåº”ç”¨â€ å¹¶ä¸”å­˜åœ¨ä¸€äº›ç‰¹å®šçš„é…ç½®ã€‚æ ¹æ®è¦è§£å†³çš„é—®é¢˜æ¥çœ‹ï¼Œæ— éæ˜¯æ–‡ä»¶çš„ç¼–è¯‘ï¼Œä¿®æ”¹ï¼Œæ‹·è´è¿™äº›å¤„ç†ï¼Œå¯¹äºè¿™äº›éœ€æ±‚ï¼Œæˆ‘ä»¬æƒ³åˆ°åŸºäºæµçš„ <code>gulp</code>éå¸¸çš„é€‚åˆå¤„ç†ï¼Œå¹¶ä¸”ç›¸å¯¹äºwebpacké…ç½®å¤šé¡µåº”ç”¨æ›´åŠ ç®€å•ã€‚æ‰€ä»¥å°ç¨‹åºå·¥ç¨‹åŒ–æ–¹æ¡ˆæ¨èä½¿ç”¨ <code>gulp</code></p><h2 id="å…·ä½“å¼€å‘æ€è·¯"><a href="#å…·ä½“å¼€å‘æ€è·¯" class="headerlink" title="å…·ä½“å¼€å‘æ€è·¯"></a>å…·ä½“å¼€å‘æ€è·¯</h2><p>é€šè¿‡ gulp çš„ task å®ç°ï¼š</p><ol><li>å®æ—¶ç¼–è¯‘ less æ–‡ä»¶è‡³ç›¸åº”ç›®å½•</li><li>å¼•å…¥æ”¯æŒasyncï¼Œawaitçš„è¿è¡Œæ—¶æ–‡ä»¶</li><li>ç¼–è¯‘å­—ä½“æ–‡ä»¶ä¸ºbase64 å¹¶ç”Ÿæˆç›¸åº”cssæ–‡ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨</li><li>ä¾èµ–åˆ†æå“ªäº›åœ°æ–¹å¼•ç”¨äº†npmåŒ…ï¼Œå°†npmåŒ…æ‰“æˆä¸€ä¸ªæ–‡ä»¶ï¼Œæ‹·è´è‡³ç›¸åº”ç›®å½•</li><li>æ£€æŸ¥ä»£ç è§„èŒƒ</li></ol><p>ä¸Šè¿°å®ç°èµ·æ¥å…¶å®å¹¶ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯è¿™æ ·çš„è¯å°±æ˜¯ä¸€ä»½çº¯ç²¹çš„ gulp æ„å»ºè„šæœ¬å’Œ çº¦å®šå¥½çš„ç›®å½•è€Œå·²ï¼Œæ¯æ¬¡éƒ½æœ‰ä¸€ä¸ªæ–°çš„å°ç¨‹åºéƒ½æ¥æ‹·è´è¿™ä»½è„šæœ¬æ¥å¤„ç†å—ï¼Ÿæ˜¾ç„¶ä¸åˆé€‚ï¼Œé‚£å¦‚ä½•çœŸæ­£çš„å®ç° <code>å°ç¨‹åºå·¥ç¨‹åŒ–</code> å‘¢ï¼Ÿ æˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶ï¼Œè„šæ‰‹æ¶éœ€è¦æ”¯æŒçš„åŠŸèƒ½ï¼š</p><ol><li>æ”¯æŒæ–°å»ºé¡¹ç›®ï¼Œåˆ›å»ºPageï¼Œåˆ›å»ºComponent</li><li>æ”¯æŒå†…ç½®æ„å»ºè„šæœ¬</li><li>æ”¯æŒå‘å¸ƒå°ç¨‹åºï¼Œä¹Ÿå¯ä»¥æƒ³åŠæ³•æ¥å…¥Jenkinsç­‰å·¥å…·åšæŒç»­é›†æˆ (å°ç¨‹åºæŒç»­é›†æˆåé¢ä¼šæ) â€¦</li></ol><h1 id="å°ç¨‹åºæ¶æ„"><a href="#å°ç¨‹åºæ¶æ„" class="headerlink" title="å°ç¨‹åºæ¶æ„"></a>å°ç¨‹åºæ¶æ„</h1><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd567f00fcc~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="architecture"></p><p>å¾®ä¿¡å°ç¨‹åºçš„æ¡†æ¶åŒ…å«ä¸¤éƒ¨åˆ† View è§†å›¾å±‚ã€App Serviceé€»è¾‘å±‚ã€‚View å±‚ç”¨æ¥æ¸²æŸ“é¡µé¢ç»“æ„ï¼ŒAppService å±‚ç”¨æ¥é€»è¾‘å¤„ç†ã€æ•°æ®è¯·æ±‚ã€æ¥å£è°ƒç”¨ã€‚</p><p>å®ƒä»¬åœ¨<strong>ä¸¤ä¸ªçº¿ç¨‹é‡Œ</strong>è¿è¡Œã€‚</p><p>å®ƒä»¬åœ¨<strong>ä¸¤ä¸ªçº¿ç¨‹é‡Œ</strong>è¿è¡Œã€‚</p><p>å®ƒä»¬åœ¨<strong>ä¸¤ä¸ªçº¿ç¨‹é‡Œ</strong>è¿è¡Œã€‚</p><p>è§†å›¾å±‚å’Œé€»è¾‘å±‚é€šè¿‡ç³»ç»Ÿå±‚çš„ JSBridage è¿›è¡Œé€šä¿¡ï¼Œé€»è¾‘å±‚æŠŠæ•°æ®å˜åŒ–é€šçŸ¥åˆ°è§†å›¾å±‚ï¼Œè§¦å‘è§†å›¾å±‚é¡µé¢æ›´æ–°ï¼Œè§†å›¾å±‚æŠŠè§¦å‘çš„äº‹ä»¶é€šçŸ¥åˆ°é€»è¾‘å±‚è¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚</p><p>è¡¥å……</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd57d4375f0~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="one-context"></p><p><strong>è§†å›¾å±‚ä½¿ç”¨ WebView æ¸²æŸ“ï¼ŒiOS ä¸­ä½¿ç”¨è‡ªå¸¦ WKWebViewï¼Œåœ¨ Android ä½¿ç”¨è…¾è®¯çš„ x5 å†…æ ¸ï¼ˆåŸºäº Blinkï¼‰è¿è¡Œã€‚</strong></p><p><strong>é€»è¾‘å±‚ä½¿ç”¨åœ¨ iOS ä¸­ä½¿ç”¨è‡ªå¸¦çš„ JSCore è¿è¡Œï¼Œåœ¨ Android ä¸­ä½¿ç”¨è…¾è®¯çš„ x5 å†…æ ¸ï¼ˆåŸºäº Blinkï¼‰è¿è¡Œã€‚</strong></p><p><strong>å¼€å‘å·¥å…·ä½¿ç”¨ nw.js åŒæ—¶æä¾›äº†è§†å›¾å±‚å’Œé€»è¾‘å±‚çš„è¿è¡Œç¯å¢ƒã€‚</strong></p><p>åœ¨ Macä¸‹ ä½¿ç”¨ js-beautify å¯¹å¾®ä¿¡å¼€å‘å·¥å…· @v1.02.1808080ä»£ç æ‰¹é‡æ ¼å¼åŒ–ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gradleå¤åˆ¶ä»£ç cd <span class="regexp">/Applications/</span>wechatwebdevtools.app<span class="regexp">/Contents/</span>Resources/<span class="keyword">package</span>.nw</span><br><span class="line"><span class="keyword">find</span> . -type f -name <span class="string">&#x27;*.js&#x27;</span> -not -path <span class="string">&quot;./node_modules/*&quot;</span> -not -path -exec js-beautify -r -s <span class="number">2</span> -p -f <span class="string">&#x27;&#123;&#125;&#x27;</span> \;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>js/extensions/appservice/index.js</code> ä¸­æ‰¾åˆ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç <span class="number">267</span>: <span class="keyword">function</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> d = <span class="title function_">c</span>(<span class="number">8</span>),</span><br><span class="line">      e = <span class="title function_">c</span>(<span class="number">227</span>),</span><br><span class="line">      f = <span class="title function_">c</span>(<span class="number">226</span>),</span><br><span class="line">      g = <span class="title function_">c</span>(<span class="number">228</span>),</span><br><span class="line">      h = <span class="title function_">c</span>(<span class="number">229</span>),</span><br><span class="line">      i = <span class="title function_">c</span>(<span class="number">230</span>);</span><br><span class="line">    <span class="keyword">var</span> j = <span class="variable language_">window</span>.<span class="property">__global</span>.<span class="property">navigator</span>.<span class="property">userAgent</span>,</span><br><span class="line">      k = -<span class="number">1</span> !== j.<span class="title function_">indexOf</span>(<span class="string">&#x27;game&#x27;</span>);</span><br><span class="line">    k || <span class="title function_">i</span>(), <span class="variable language_">window</span>.<span class="property">__global</span>.<span class="property">getNewWeixinJSBridge</span> = <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="attr">invoke</span>: b</span><br><span class="line">      &#125; = <span class="title function_">f</span>(a), &#123;</span><br><span class="line">        <span class="attr">publish</span>: c</span><br><span class="line">      &#125; = <span class="title function_">g</span>(a), &#123;</span><br><span class="line">        <span class="attr">subscribe</span>: d,</span><br><span class="line">        <span class="attr">triggerSubscribeEvent</span>: i</span><br><span class="line">      &#125; = <span class="title function_">h</span>(a), &#123;</span><br><span class="line">        <span class="attr">on</span>: j,</span><br><span class="line">        <span class="attr">triggerOnEvent</span>: k</span><br><span class="line">      &#125; = <span class="title function_">e</span>(a);</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">invoke</span>: b,</span><br><span class="line">        <span class="attr">publish</span>: c,</span><br><span class="line">        <span class="attr">subscribe</span>: d,</span><br><span class="line">        <span class="attr">on</span>: j,</span><br><span class="line">        <span class="keyword">get</span> <span class="title function_">__triggerOnEvent</span>() &#123;</span><br><span class="line">          <span class="keyword">return</span> k</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">get</span> <span class="title function_">__triggerSubscribeEvent</span>() &#123;</span><br><span class="line">          <span class="keyword">return</span> i</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="variable language_">window</span>.<span class="property">WeixinJSBridge</span> = <span class="variable language_">window</span>.<span class="property">__global</span>.<span class="property">WeixinJSBridge</span> = <span class="variable language_">window</span>.<span class="property">__global</span>.<span class="title function_">getNewWeixinJSBridge</span>(<span class="string">&#x27;global&#x27;</span>), <span class="variable language_">window</span>.<span class="property">__global</span>.<span class="property">WeixinJSBridgeMap</span> = &#123;</span><br><span class="line">      <span class="attr">__globalBridge</span>: <span class="variable language_">window</span>.<span class="property">WeixinJSBridge</span></span><br><span class="line">    &#125;, __devtoolsConfig.<span class="property">online</span> &amp;&amp; __devtoolsConfig.<span class="property">autoTest</span> &amp;&amp; <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">clear</span>()</span><br><span class="line">    &#125;, <span class="number">1e4</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> l = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="property">__global</span>.<span class="property">XMLHttpRequest</span>;</span><br><span class="line">      l.<span class="property">responseType</span> = <span class="string">&#x27;text&#x27;</span>, l.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">`http://<span class="subst">$&#123;<span class="variable language_">window</span>.location.host&#125;</span>/calibration/<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span>, !<span class="number">0</span>), l.<span class="title function_">send</span>()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (a) &#123;&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>js/extensions/gamenaitveview/index.js</code> ä¸­æ‰¾åˆ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç   <span class="number">299</span>: <span class="keyword">function</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(b, <span class="string">&#x27;__esModule&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">value</span>: !<span class="number">0</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> d = <span class="title function_">c</span>(<span class="number">242</span>),</span><br><span class="line">      e = <span class="title function_">c</span>(<span class="number">241</span>),</span><br><span class="line">      f = <span class="title function_">c</span>(<span class="number">243</span>),</span><br><span class="line">      g = <span class="title function_">c</span>(<span class="number">244</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">WeixinJSBridge</span> = &#123;</span><br><span class="line">      <span class="attr">on</span>: d.<span class="property">a</span>,</span><br><span class="line">      <span class="attr">invoke</span>: e.<span class="property">a</span>,</span><br><span class="line">      <span class="attr">publish</span>: f.<span class="property">a</span>,</span><br><span class="line">      <span class="attr">subscribe</span>: g.<span class="property">a</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>åœ¨ <code>js/extensions/pageframe/index.js</code>ä¸­æ‰¾åˆ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç <span class="number">317</span>: <span class="keyword">function</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">WeixinJSBridge</span> = &#123;</span><br><span class="line">        <span class="attr">on</span>: e.<span class="property">a</span>,</span><br><span class="line">        <span class="attr">invoke</span>: f.<span class="property">a</span>,</span><br><span class="line">        <span class="attr">publish</span>: g.<span class="property">a</span>,</span><br><span class="line">        <span class="attr">subscribe</span>: h.<span class="property">a</span></span><br><span class="line">      &#125;, k.<span class="property">a</span>.<span class="title function_">init</span>();</span><br><span class="line">      <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&#x27;UIEvent&#x27;</span>);</span><br><span class="line">      a.<span class="title function_">initEvent</span>(<span class="string">&#x27;WeixinJSBridgeReady&#x27;</span>, !<span class="number">1</span>, !<span class="number">1</span>), <span class="variable language_">document</span>.<span class="title function_">dispatchEvent</span>(a), i.<span class="property">a</span>.<span class="title function_">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(b, <span class="string">&#x27;__esModule&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">value</span>: !<span class="number">0</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> e = <span class="title function_">c</span>(<span class="number">254</span>),</span><br><span class="line">      f = <span class="title function_">c</span>(<span class="number">253</span>),</span><br><span class="line">      g = <span class="title function_">c</span>(<span class="number">255</span>),</span><br><span class="line">      h = <span class="title function_">c</span>(<span class="number">256</span>),</span><br><span class="line">      i = <span class="title function_">c</span>(<span class="number">86</span>),</span><br><span class="line">      j = <span class="title function_">c</span>(<span class="number">257</span>),</span><br><span class="line">      k = c.<span class="title function_">n</span>(j);</span><br><span class="line">    <span class="string">&#x27;complete&#x27;</span> === <span class="variable language_">document</span>.<span class="property">readyState</span> ? <span class="title function_">d</span>() : <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">d</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éƒ½çœ‹åˆ°äº† WeixinJSBridge çš„å®šä¹‰ã€‚åˆ†åˆ«éƒ½æœ‰ <code>on</code>ã€<code>invoke</code>ã€<code>publish</code>ã€<code>subscribe</code> è¿™ä¸ªå‡ ä¸ªå…³é”®æ–¹æ³•ã€‚</p><p>æ‹¿ <code>invoke</code> ä¸¾ä¾‹ï¼Œåœ¨ <code>js/extensions/appservice/index.js</code>ä¸­å‘ç°è¿™æ®µä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">phpå¤åˆ¶ä»£ç <span class="title function_ invoke__">f</span> (!r) p[b] = s, f.<span class="title function_ invoke__">send</span>(&#123;</span><br><span class="line">    <span class="attr">command</span>: <span class="string">&#x27;APPSERVICE_INVOKE&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">api</span>: c,</span><br><span class="line">        <span class="attr">args</span>: e,</span><br><span class="line">        <span class="attr">callbackID</span>: b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ <code>js/extensions/pageframe/index.js</code> ä¸­å‘ç°è¿™æ®µä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">phpå¤åˆ¶ä»£ç g[d] = c, e.a.<span class="title function_ invoke__">send</span>(&#123;</span><br><span class="line">    <span class="attr">command</span>: <span class="string">&#x27;WEBVIEW_INVOKE&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">api</span>: a,</span><br><span class="line">        <span class="attr">args</span>: b,</span><br><span class="line">        <span class="attr">callbackID</span>: d</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç®€å•çš„åˆ†æå¾—çŸ¥ï¼šå­—æ®µ <code>command</code> ç”¨æ¥åŒºåˆ†è¡Œä¸ºï¼Œ<code>invoke</code> ç”¨æ¥è°ƒç”¨ Native çš„ Apiã€‚åœ¨ä¸åŒçš„æ¥æºè¦ä½¿ç”¨ä¸åŒçš„å‰ç¼€ã€‚<code>data</code> é‡Œé¢åŒ…å« Api åï¼Œå‚æ•°ã€‚å¦å¤– <code>callbackID</code> æŒ‡å®šæ¥å—å›è°ƒçš„æ–¹æ³•å¥æŸ„ã€‚Appservice å’Œ Webview ä½¿ç”¨çš„é€šä¿¡åè®®æ˜¯ä¸€è‡´çš„ã€‚</p><p>æˆ‘ä»¬ä¸èƒ½åœ¨ä»£ç é‡Œä½¿ç”¨ BOM å’Œ DOM æ˜¯å› ä¸ºæ ¹æœ¬æ²¡æœ‰ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿä¸å¸Œæœ› JS ä»£ç ç›´æ¥æ“ä½œè§†å›¾ã€‚</p><p>åœ¨å¼€å‘å·¥å…·ä¸­ <code>remote-helper.js</code> ä¸­æ‰¾åˆ°äº†è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç <span class="keyword">const</span> vm = <span class="built_in">require</span>(<span class="string">&quot;vm&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vmGlobal = &#123;</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">eval</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">process</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="title function_">setTimeout</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="comment">//...çœç•¥ä»£ç </span></span><br><span class="line">        <span class="keyword">return</span> timerCount;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clearTimeout</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> timer = timers[id];</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            <span class="keyword">delete</span> timers[id];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setInterval</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="comment">//...çœç•¥ä»£ç </span></span><br><span class="line">        <span class="keyword">return</span> timerCount;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clearInterval</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> timer = timers[id];</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">            <span class="keyword">delete</span> timers[id];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">console</span>: (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//...çœç•¥ä»£ç </span></span><br><span class="line">        <span class="keyword">return</span> consoleClone;</span><br><span class="line">    &#125;)()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> jsVm = vm.<span class="title function_">createContext</span>(vmGlobal);</span><br><span class="line"><span class="comment">// çœç•¥å¤§é‡ä»£ç ...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadCode</span>(<span class="params">filePath, sourceURL, content</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ret;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> script = <span class="keyword">typeof</span> content === <span class="string">&#x27;string&#x27;</span> ? content : fs.<span class="title function_">readFileSync</span>(filePath, <span class="string">&#x27;utf-8&#x27;</span>).<span class="title function_">toString</span>();</span><br><span class="line">        ret = vm.<span class="title function_">runInContext</span>(script, jsVm, &#123;</span><br><span class="line">            <span class="attr">filename</span>: sourceURL,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="comment">// something went wrong in user code</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„åˆ†å±‚è®¾è®¡æ˜¾ç„¶æ˜¯æœ‰æ„ä¸ºä¹‹çš„ï¼Œå®ƒçš„ä¸­é—´å±‚å®Œå…¨æ§åˆ¶äº†ç¨‹åºå¯¹äºç•Œé¢è¿›è¡Œçš„æ“ä½œï¼Œ åŒæ—¶å¯¹äºä¼ é€’çš„æ•°æ®å’Œå“åº”æ—¶é—´ä¹Ÿèƒ½åšåˆ°ç›‘æ§ã€‚ä¸€æ–¹é¢ç¨‹åºçš„è¡Œä¸ºå—åˆ°äº†æå¤§é™åˆ¶ï¼Œ å¦ä¸€æ–¹é¢å¾®ä¿¡å¯ä»¥ç¡®ä¿ä»–ä»¬å¯¹äºå°ç¨‹åºå†…å®¹å’Œä½“éªŒæœ‰ç»å¯¹çš„æ§åˆ¶ã€‚</p><p>è¿™æ ·çš„ç»“æ„ä¹Ÿè¯´æ˜äº†å°ç¨‹åºçš„åŠ¨ç”»å’Œç»˜å›¾ API è¢«è®¾è®¡æˆç”Ÿæˆä¸€ä¸ªæœ€ç»ˆå¯¹è±¡è€Œä¸æ˜¯ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œçš„æ ·å­ï¼Œ åŸå› å°±æ˜¯  Json æ ¼å¼çš„æ•°æ®ä¼ é€’å’Œè§£æç›¸æ¯”ä¸åŸç”Ÿ API éƒ½æ˜¯æŸè€—ä¸è²çš„ï¼Œå¦‚æœé¢‘ç¹è°ƒç”¨å¾ˆå¯èƒ½æŸè€—è¿‡å¤šæ€§èƒ½ï¼Œè¿›è€Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><h2 id="ä¸‹è½½å°ç¨‹åºå®Œæ•´åŒ…"><a href="#ä¸‹è½½å°ç¨‹åºå®Œæ•´åŒ…" class="headerlink" title="ä¸‹è½½å°ç¨‹åºå®Œæ•´åŒ…"></a>ä¸‹è½½å°ç¨‹åºå®Œæ•´åŒ…</h2><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd56a0887d0~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="download"></p><h2 id="App-Service-Life-Cylce"><a href="#App-Service-Life-Cylce" class="headerlink" title="App Service - Life Cylce"></a>App Service - Life Cylce</h2><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd58981205e~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="lifecycle"></p><h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><p><strong>1.åŠ¨ç”»éœ€è¦ç»‘å®šåœ¨ data ä¸Šï¼Œè€Œç»˜å›¾å´ä¸ç”¨ã€‚ä½ è§‰å¾—æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">apache</span>å¤åˆ¶ä»£ç var context = wx.createCanvasContext(&#x27;firstCanvas&#x27;)</span><br><span class="line">    </span><br><span class="line"><span class="attribute">context</span>.setStrokeStyle(<span class="string">&quot;#00ff00&quot;</span>)</span><br><span class="line"><span class="attribute">context</span>.setLineWidth(<span class="number">5</span>)</span><br><span class="line"><span class="attribute">context</span>.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line"><span class="attribute">context</span>.stroke()</span><br><span class="line"><span class="attribute">context</span>.setStrokeStyle(<span class="string">&quot;#ff0000&quot;</span>)</span><br><span class="line"><span class="attribute">context</span>.setLineWidth(<span class="number">2</span>)</span><br><span class="line"><span class="attribute">context</span>.moveTo(<span class="number">160</span>, <span class="number">100</span>)</span><br><span class="line"><span class="attribute">context</span>.arc(<span class="number">100</span>, <span class="number">100</span>, <span class="number">60</span>, <span class="number">0</span>, <span class="number">2</span> * Math.PI, true)</span><br><span class="line"><span class="attribute">context</span>.moveTo(<span class="number">140</span>, <span class="number">100</span>)</span><br><span class="line"><span class="attribute">context</span>.arc(<span class="number">100</span>, <span class="number">100</span>, <span class="number">40</span>, <span class="number">0</span>, Math.PI, false)</span><br><span class="line"><span class="attribute">context</span>.moveTo(<span class="number">85</span>, <span class="number">80</span>)</span><br><span class="line"><span class="attribute">context</span>.arc(<span class="number">80</span>, <span class="number">80</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">2</span> * Math.PI, true)</span><br><span class="line"><span class="attribute">context</span>.moveTo(<span class="number">125</span>, <span class="number">80</span>)</span><br><span class="line"><span class="attribute">context</span>.arc(<span class="number">120</span>, <span class="number">80</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">2</span> * Math.PI, true)</span><br><span class="line"><span class="attribute">context</span>.stroke()</span><br><span class="line"><span class="attribute">context</span>.draw()</span><br><span class="line"><span class="attribute">lisp</span>å¤åˆ¶ä»£ç Page(&#123;</span><br><span class="line">  <span class="attribute">data</span>: &#123;</span><br><span class="line">    <span class="attribute">animationData</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attribute">onShow</span>: function()&#123;</span><br><span class="line">    <span class="attribute">var</span> animation = wx.createAnimation(&#123;</span><br><span class="line">      <span class="attribute">duration</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attribute">timingFunction</span>: &#x27;ease&#x27;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="attribute">this</span>.animation = animation</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">animation</span>.scale(<span class="number">2</span>,<span class="number">2</span>).rotate(<span class="number">45</span>).step()</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">this</span>.setData(&#123;</span><br><span class="line">      <span class="attribute">animationData</span>:animation.export()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>2.å°ç¨‹åºçš„ Http Rquest è¯·æ±‚æ˜¯ä¸æ˜¯ç”¨çš„æµè§ˆå™¨ Fetch API?</strong></p><p>çŸ¥è¯†ç‚¹è€ƒå¯Ÿ</p><ul><li>çŸ¥é“ Request æ˜¯ç”± Native å®ç°çš„</li><li>JSCore æ˜¯ä¸å¸¦ Http Requestã€Websocketã€Storageç­‰åŠŸèƒ½çš„ï¼Œé‚£æ˜¯ Webkit å¸¦çš„</li><li>å°ç¨‹åºçš„ <code>wx.request</code> æ˜¯ä¸æ˜¯éµå¾ª fetch API è§„èŒƒå®ç°çš„å‘¢ï¼Ÿç­”æ¡ˆï¼Œæ˜¾ç„¶ä¸æ˜¯ã€‚å› ä¸ºæ²¡æœ‰ <code>Promise</code></li></ul><h1 id="View-WXML"><a href="#View-WXML" class="headerlink" title="View - WXML"></a>View - WXML</h1><p>WXMLï¼ˆWeiXin Markup Languageï¼‰</p><ul><li>æ”¯æŒæ•°æ®ç»‘å®š</li><li>æ”¯æŒé€»è¾‘ç®—æœ¯ã€è¿ç®—</li><li>æ”¯æŒæ¨¡æ¿ã€å¼•ç”¨</li><li>æ”¯æŒæ·»åŠ äº‹ä»¶ï¼ˆbindtapï¼‰</li></ul><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd55da9d940~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WXML"></p><p>Wxmlç¼–è¯‘å™¨ï¼šWcc  æŠŠ Wxmlæ–‡ä»¶ è½¬ä¸º JS</p><p>æ‰§è¡Œæ–¹å¼ï¼šWcc index.wxml</p><p><strong>ä½¿ç”¨ Virtual DOMï¼Œè¿›è¡Œå±€éƒ¨æ›´æ–°</strong></p><h1 id="View-WXSS"><a href="#View-WXSS" class="headerlink" title="View - WXSS"></a>View - WXSS</h1><p>WXSS(WeiXin Style Sheets)</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd55df8f76a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WXSS"></p><p>wxssç¼–è¯‘å™¨ï¼šwcsc æŠŠwxssæ–‡ä»¶è½¬åŒ–ä¸º js</p><p>æ‰§è¡Œæ–¹å¼ï¼š wcsc index.wxss</p><h2 id="æ”¯æŒå¤§éƒ¨åˆ†CSSç‰¹æ€§"><a href="#æ”¯æŒå¤§éƒ¨åˆ†CSSç‰¹æ€§" class="headerlink" title="æ”¯æŒå¤§éƒ¨åˆ†CSSç‰¹æ€§"></a>æ”¯æŒå¤§éƒ¨åˆ†CSSç‰¹æ€§</h2><p>äº²æµ‹åŒ…å«ä½†ä¸é™äºå¦‚ä¸‹å†…å®¹ï¼š</p><ul><li><p>Transition</p></li><li><p>Animation</p><ul><li>Keyframes</li></ul></li><li><p>border-radius</p></li><li><p>calc()</p></li><li><p>é€‰æ‹©å™¨ï¼Œé™¤äº†</p><p>å®˜æ–¹æ–‡æ¡£</p><p>åˆ—å‡ºçš„ï¼Œå…¶å®è¿˜æ”¯æŒ</p><ul><li>element&gt;element</li><li>element+element</li><li>element element</li><li>element:first-letter</li><li>element:first-line</li><li>element:first-child</li><li>element:last-child</li><li>element~element</li><li>element:first-of-type</li><li>element:last-of-type</li><li>element:only-of-type</li><li>element:only-child</li><li>element:nth-child(n)</li><li>element:nth-last-child(n)</li><li>element:nth-of-type(n)</li><li>element:nth-last-of-type(n)</li><li>:root</li><li>element:empty</li><li>:not(element)</li></ul></li><li><p>iconfont</p></li></ul><p>å»ºè®® Css3 çš„ç‰¹æ€§éƒ½å¯ä»¥åšä¸€ä¸‹å°è¯•ã€‚</p><h2 id="å°ºå¯¸å•ä½-rpx"><a href="#å°ºå¯¸å•ä½-rpx" class="headerlink" title="å°ºå¯¸å•ä½ rpx"></a>å°ºå¯¸å•ä½ rpx</h2><p>rpxï¼ˆresponsive pixelï¼‰: å¯ä»¥æ ¹æ®å±å¹•å®½åº¦è¿›è¡Œè‡ªé€‚åº”ã€‚è§„å®šå±å¹•å®½ä¸º 750rpxã€‚å…¬å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç <span class="keyword">const</span> dsWidth = <span class="number">750</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> screenHeightOfRpx = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">750</span> / env.<span class="property">screenWidth</span> * env.<span class="property">screenHeight</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> rpxToPx = <span class="keyword">function</span> (<span class="params">rpx</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> env.<span class="property">screenWidth</span> / <span class="number">750</span> * rpx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> pxToRpx = <span class="keyword">function</span> (<span class="params">px</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">750</span> / env.<span class="property">screenWidth</span> * px</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>è®¾å¤‡</th><th>rpxæ¢ç®—px (å±å¹•å®½åº¦&#x2F;750)</th><th>pxæ¢ç®—rpx (750&#x2F;å±å¹•å®½åº¦)</th></tr></thead><tbody><tr><td>iPhone5</td><td>1rpx &#x3D; 0.42px</td><td>1px &#x3D; 2.34rpx</td></tr><tr><td>iPhone6</td><td>1rpx &#x3D; 0.5px</td><td>1px &#x3D; 2rpx</td></tr><tr><td>iPhone6 Plus</td><td>1rpx &#x3D; 0.552px</td><td>1px &#x3D; 1.81rpx</td></tr></tbody></table><p>å¯ä»¥äº†è§£ä¸€ä¸‹ <a href="https://link.juejin.cn/?target=https://github.com/mpvue/px2rpx-loader">pr2rpx-loader </a>è¿™ä¸ªåº“ã€‚</p><h2 id="æ ·å¼å¯¼å…¥"><a href="#æ ·å¼å¯¼å…¥" class="headerlink" title="æ ·å¼å¯¼å…¥"></a>æ ·å¼å¯¼å…¥</h2><p>ä½¿ç”¨ <code>@import</code>è¯­å¥å¯ä»¥å¯¼å…¥å¤–è”æ ·å¼è¡¨ï¼Œ<code>@import</code>åè·Ÿéœ€è¦å¯¼å…¥çš„å¤–è”æ ·å¼è¡¨çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨ <code>;</code> è¡¨ç¤ºè¯­å¥ç»“æŸã€‚</p><h2 id="å†…è”æ ·å¼"><a href="#å†…è”æ ·å¼" class="headerlink" title="å†…è”æ ·å¼"></a>å†…è”æ ·å¼</h2><p>é™æ€çš„æ ·å¼ç»Ÿä¸€å†™åˆ° class ä¸­ã€‚style æ¥æ”¶åŠ¨æ€çš„æ ·å¼ï¼Œåœ¨è¿è¡Œæ—¶ä¼šè¿›è¡Œè§£æï¼Œ<strong>è¯·å°½é‡é¿å…å°†é™æ€çš„æ ·å¼å†™è¿› style ä¸­ï¼Œä»¥å…å½±å“æ¸²æŸ“é€Ÿåº¦</strong>ã€‚</p><h2 id="å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼"><a href="#å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼" class="headerlink" title="å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼"></a>å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼</h2><p>å®šä¹‰åœ¨ app.wxss ä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œä½œç”¨äºæ¯ä¸€ä¸ªé¡µé¢ã€‚åœ¨ page çš„ wxss æ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ä¸ºå±€éƒ¨æ ·å¼ï¼Œåªä½œç”¨åœ¨å¯¹åº”çš„é¡µé¢ï¼Œå¹¶ä¼šè¦†ç›– app.wxss ä¸­ç›¸åŒçš„é€‰æ‹©å™¨ã€‚</p><h2 id="iconfont"><a href="#iconfont" class="headerlink" title="iconfont"></a>iconfont</h2><p><strong>æˆªæ­¢20180810</strong></p><p>å°ç¨‹åºæœªæ¥æœ‰è®¡åˆ’æ”¯æŒå­—ä½“ã€‚å‚è€ƒ<a href="https://link.juejin.cn/?target=http://daxue.qq.com/content/content/id/4113">å¾®ä¿¡å…¬å¼€è¯¾</a>ã€‚</p><p>å°ç¨‹åºå¼€å‘ä¸å¹³æ—¶ Webå¼€å‘ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—ä½“å›¾æ ‡ï¼Œä½†æ˜¯ <code>src:url()</code> æ— è®ºæœ¬åœ°è¿˜æ˜¯è¿œç¨‹åœ°å€éƒ½ä¸è¡Œï¼Œbase64 å€¼åˆ™éƒ½æ˜¯å¯ä»¥æ˜¾ç¤ºçš„ã€‚</p><p>å°† ttf æ–‡ä»¶è½¬æ¢æˆ base64ã€‚æ‰“å¼€è¿™ä¸ªå¹³å° <a href="https://link.juejin.cn/?target=http://transfonter.org/%E3%80%82%E7%82%B9%E5%87%BB">transfonter.org&#x2F;ã€‚ç‚¹å‡»</a> Add fonts æŒ‰é’®ï¼ŒåŠ è½½ttfæ ¼å¼çš„é‚£ä¸ªæ–‡ä»¶ã€‚å°†ä¸‹è¾¹çš„ base64 encode æ”¹ä¸º onã€‚ç‚¹å‡» Convert æŒ‰é’®è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢åç‚¹å‡» download ä¸‹è½½ã€‚</p><p>å¤åˆ¶ä¸‹è½½çš„å‹ç¼©æ–‡ä»¶ä¸­çš„ stylesheet.css çš„å†…å®¹åˆ° font.wxss ï¼Œå¹¶ä¸”å°† icomoon ä¸­çš„ style.css é™¤äº† @font-face æ‰€æœ‰çš„ä»£ç ä¹Ÿå¤åˆ¶åˆ° font.wxss å¹¶å°†ié€‰æ‹©å™¨æ¢æˆ .iconfontï¼Œæœ€åï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">applescript</span><br><span class="line">å¤åˆ¶ä»£ç &lt;<span class="built_in">text</span> <span class="built_in">class</span>=<span class="string">&quot;iconfont icon-home&quot;</span> style=<span class="string">&quot;font-size:50px;color:red&quot;</span>&gt;&lt;/<span class="built_in">text</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="View-Component"><a href="#View-Component" class="headerlink" title="View - Component"></a>View - Component</h1><p>å°ç¨‹åºæä¾›äº†ä¸€ç³»åˆ—ç»„ä»¶ç”¨äºå¼€å‘ä¸šåŠ¡åŠŸèƒ½ï¼ŒæŒ‰ç…§åŠŸèƒ½ä¸HTML5çš„æ ‡ç­¾è¿›è¡Œå¯¹æ¯”å¦‚ä¸‹ï¼š</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd61f6cc3dd~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Component"></p><p>å°ç¨‹åºçš„ç»„ä»¶åŸºäºWeb Componentæ ‡å‡†</p><p>ä½¿ç”¨Polymeræ¡†æ¶å®ç°Web Component</p><h1 id="View-Native-Component"><a href="#View-Native-Component" class="headerlink" title="View - Native Component"></a>View - Native Component</h1><p>ç›®å‰Nativeå®ç°çš„ç»„ä»¶æœ‰</p><ul><li><p>cavnas</p></li><li><p>video</p></li><li><p>map</p></li><li><p>textarea</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd63ae856a7~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Native Component"></p></li></ul><p>Nativeç»„ä»¶å±‚åœ¨ WebView å±‚ä¹‹ä¸Šã€‚è¿™ç›®å‰å¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼š</p><ul><li>Native å®ç°çš„ç»„ä»¶ä¼šé®æŒ¡å…¶ä»–ç»„ä»¶</li><li>WebView æ¸²æŸ“å‡ºæ¥çš„è§†å›¾åœ¨æ»šåŠ¨æ—¶ï¼ŒNative å®ç°çš„ç»„ä»¶éœ€è¦æ›´æ–°ä½ç½®ï¼Œè¿™ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œåœ¨å®‰å“æœºå™¨ä¸Šæ¯”è¾ƒæ˜æ˜¾</li><li>å°ç¨‹åºåŸç”Ÿç»„ä»¶ <code>cover-view</code> å¯ä»¥è¦†ç›– cavnas video ç­‰ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸‹å¼Šç«¯ï¼Œæ¯”å¦‚åœ¨ cavnas ä¸Šè¦†ç›– <code>cover-view</code>ï¼Œå°±ä¼šå‘ç°åæ ‡ç³»ä¸ç»Ÿä¸€å¤„ç†éº»çƒ¦</li></ul><h1 id="ç›®å‰å°ç¨‹åºçš„é—®é¢˜æˆ–é™åˆ¶"><a href="#ç›®å‰å°ç¨‹åºçš„é—®é¢˜æˆ–é™åˆ¶" class="headerlink" title="ç›®å‰å°ç¨‹åºçš„é—®é¢˜æˆ–é™åˆ¶"></a>ç›®å‰å°ç¨‹åºçš„é—®é¢˜æˆ–é™åˆ¶</h1><p><strong>æˆªæ­¢20180810</strong></p><p>åŒ…å«ä½†ä¸é™äºï¼š</p><ul><li>å°ç¨‹åºä»ç„¶ä½¿ç”¨ WebView æ¸²æŸ“ï¼Œå¹¶éåŸç”Ÿæ¸²æŸ“ã€‚ï¼ˆéƒ¨åˆ†åŸç”Ÿï¼‰</li><li>æœåŠ¡ç«¯æ¥å£è¿”å›çš„å¤´æ— æ³•æ‰§è¡Œï¼Œæ¯”å¦‚ï¼šSet-Cookieã€‚</li><li>ä¾èµ–æµè§ˆå™¨ç¯å¢ƒçš„ JS åº“ä¸èƒ½ä½¿ç”¨ã€‚</li><li>ä¸èƒ½ä½¿ç”¨ npmï¼Œä½†æ˜¯å¯ä»¥è‡ªæ­æ„å»ºå·¥å…·æˆ–è€…ä½¿ç”¨ mpvueã€‚ï¼ˆæœªæ¥å®˜æ–¹æœ‰è®¡åˆ’æ”¯æŒï¼‰</li><li>ä¸èƒ½ä½¿ç”¨ ES7ï¼Œå¯ä»¥è‡ªå·±ç”¨babel+webpackè‡ªæ­æˆ–è€…ä½¿ç”¨ mpvueã€‚</li><li>ä¸æ”¯æŒä½¿ç”¨è‡ªå·±çš„å­—ä½“ï¼ˆæœªæ¥å®˜æ–¹è®¡åˆ’æ”¯æŒï¼‰ã€‚</li><li>å¯ä»¥ç”¨ base64 çš„æ–¹å¼æ¥ä½¿ç”¨ iconfontã€‚</li><li>å°ç¨‹åºä¸èƒ½å‘æœ‹å‹åœˆï¼ˆå¯ä»¥é€šè¿‡ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°ï¼Œå‘å›¾ç‰‡åˆ°æœ‹å‹å‰ã€‚äºŒç»´ç å¯ä»¥ä½¿ç”¨<a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/qrcode.html">Bæ¥å£</a>ï¼‰ã€‚</li><li>è·å–<a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/dev/api/qrcode.html">äºŒç»´ç &#x2F;å°ç¨‹åº</a>æ¥å£çš„é™åˆ¶ã€‚<ul><li>B æ¥å£ scene æœ€å¤§32ä¸ªå¯è§å­—ç¬¦ã€‚</li><li>AC æ¥å£æ€»å…±ç”Ÿæˆçš„ç æ•°é‡é™åˆ¶ä¸º 100,000ï¼Œè¯·è°¨æ…è°ƒç”¨ã€‚</li><li>çœŸæœºæ‰«æäºŒç»´ç åªèƒ½è·³è½¬åˆ°çº¿ä¸Šç‰ˆæœ¬ï¼Œæ‰€ä»¥æµ‹è¯•ç¯å¢ƒä¸‹åªå¯é€šè¿‡å¼€å‘è€…å·¥å…·çš„é€šè¿‡äºŒç»´ç ç¼–è¯‘è¿›è¡Œè°ƒè¯•ã€‚</li><li>æ²¡æœ‰å‘å¸ƒåˆ°çº¿ä¸Šç‰ˆæœ¬çš„å°ç¨‹åºé¡µé¢è·¯å¾„ä¼šå¯¼è‡´ç”ŸæˆäºŒç»´ç å¤±è´¥ï¼Œéœ€è¦å…ˆå°†æ·»åŠ äº†é¡µé¢çš„å°ç¨‹åºå‘å¸ƒåˆ°çº¿ä¸Šç‰ˆæœ¬ã€‚</li></ul></li><li>å°ç¨‹åºæ¨é€åªèƒ½ä½¿ç”¨â€œæœåŠ¡é€šçŸ¥â€ è€Œä¸”éœ€è¦ç”¨æˆ·ä¸»åŠ¨è§¦å‘æäº¤ formIdï¼ŒformId åªæœ‰7å¤©æœ‰æ•ˆæœŸã€‚ï¼ˆç°åœ¨çš„åšæ³•æ˜¯åœ¨æ¯ä¸ªé¡µé¢éƒ½æ”¾å…¥formå¹¶ä¸”éšè—ä»¥æ­¤è·å–æ›´å¤šçš„ formIdã€‚åç«¯ä½¿ç”¨åŸåˆ™ä¸ºï¼šä¼˜å…ˆä½¿ç”¨æœ‰æ•ˆæœŸæœ€çŸ­çš„ï¼‰</li><li>å°ç¨‹åºå¤§å°é™åˆ¶ 2Mï¼Œåˆ†åŒ…æ€»è®¡ä¸è¶…è¿‡ 8M</li><li>è½¬å‘ï¼ˆåˆ†äº«ï¼‰å°ç¨‹åºä¸èƒ½æ‹¿åˆ°æˆåŠŸç»“æœï¼ŒåŸæ¥å¯ä»¥ã€‚<a href="https://link.juejin.cn/?target=https://mp.weixin.qq.com/s?__biz=MjM5NDAwMTA2MA==&mid=2695730124&idx=1&sn=666a448b047d657350de7684798f48d3&chksm=83d74a07b4a0c311569a748f4d11a5ebcce3ba8f6bd5a4b3183a4fea0b3442634a1c71d3cdd0&scene=21%23wechat_redirect">é“¾æ¥</a>ï¼ˆå°æ¸¸æˆé€ çš„å­½ï¼‰</li><li>æ‹¿åˆ°ç›¸åŒçš„ unionId å¿…é¡»ç»‘åœ¨åŒä¸€ä¸ªå¼€æ”¾å¹³å°ä¸‹ã€‚å¼€æ”¾å¹³å°ç»‘å®šé™åˆ¶ï¼š<ul><li>50ä¸ªç§»åŠ¨åº”ç”¨</li><li>10ä¸ªç½‘ç«™</li><li>50ä¸ªåŒä¸»ä½“å…¬ä¼—å·</li><li>5ä¸ªä¸åŒä¸»ä½“å…¬ä¼—å·</li><li>50ä¸ªåŒä¸»ä½“å°ç¨‹åº</li><li>5ä¸ªä¸åŒä¸»ä½“å°ç¨‹åº</li></ul></li><li>å…¬ä¼—å·å…³è”å°ç¨‹åºï¼Œ<a href="https://link.juejin.cn/?target=https://developers.weixin.qq.com/miniprogram/introduction/%23%E5%85%AC%E4%BC%97%E5%8F%B7%E5%85%B3%E8%81%94%E5%B0%8F%E7%A8%8B%E5%BA%8F">é“¾æ¥</a><ul><li>æ‰€æœ‰å…¬ä¼—å·éƒ½å¯ä»¥å…³è”å°ç¨‹åºã€‚</li><li>ä¸€ä¸ªå…¬ä¼—å·å¯å…³è”10ä¸ªåŒä¸»ä½“çš„å°ç¨‹åºï¼Œ3ä¸ªä¸åŒä¸»ä½“çš„å°ç¨‹åºã€‚</li><li>ä¸€ä¸ªå°ç¨‹åºå¯å…³è”500ä¸ªå…¬ä¼—å·ã€‚</li><li>å…¬ä¼—å·ä¸€ä¸ªæœˆå¯æ–°å¢å…³è”å°ç¨‹åº13æ¬¡ï¼Œå°ç¨‹åºä¸€ä¸ªæœˆå¯æ–°å¢å…³è”500æ¬¡ã€‚</li></ul></li><li>ä¸€ä¸ªå…¬ä¼—å·å…³è”çš„10ä¸ªåŒä¸»ä½“å°ç¨‹åºå’Œ3ä¸ªéåŒä¸»ä½“å°ç¨‹åºå¯ä»¥äº’ç›¸è·³è½¬</li><li>å“ç‰Œæœç´¢ä¸æ”¯æŒé‡‘èã€åŒ»ç–—</li><li>å°ç¨‹åºæˆæƒéœ€è¦ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»</li><li>å°ç¨‹åºä¸æä¾›æµ‹è¯• <strong>access_token</strong></li><li>å®‰å“ç³»ç»Ÿä¸‹ï¼Œå°ç¨‹åºæˆæƒè·å–ç”¨æˆ·ä¿¡æ¯ä¹‹åï¼Œåˆ é™¤å°ç¨‹åºå†é‡æ–°è·å–ï¼Œå¹¶é‡æ–°æˆæƒï¼Œå¾—åˆ°æ—§ç­¾åï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡æˆæƒå¤±è´¥</li><li>å¼€å‘è€…å·¥å…·ä¸Šï¼Œæˆæƒè·å–ç”¨æˆ·ä¿¡æ¯ä¹‹åï¼Œå¦‚æœæ¸…ç¼“å­˜é€‰æ‹©å…¨éƒ¨æ¸…é™¤ï¼Œåˆ™å³ä½¿ä½¿ç”¨äº†wx.checkSessionï¼Œå¹¶ä¸”åœ¨session_keyæœ‰æ•ˆæœŸå†…ï¼Œæˆæƒè·å–ç”¨æˆ·ä¿¡æ¯ä¹Ÿä¼šå¾—åˆ°æ–°çš„session_key</li></ul><h2 id="å°ç¨‹åºHTTP2æ”¯æŒæƒ…å†µ"><a href="#å°ç¨‹åºHTTP2æ”¯æŒæƒ…å†µ" class="headerlink" title="å°ç¨‹åºHTTP2æ”¯æŒæƒ…å†µ"></a>å°ç¨‹åºHTTP2æ”¯æŒæƒ…å†µ</h2><h3 id="HTTP2æ”¯æŒæƒ…å†µï¼šæ¨¡æ‹Ÿå™¨ä¸çœŸæœºå‡ä¸æ”¯æŒ"><a href="#HTTP2æ”¯æŒæƒ…å†µï¼šæ¨¡æ‹Ÿå™¨ä¸çœŸæœºå‡ä¸æ”¯æŒ" class="headerlink" title="HTTP2æ”¯æŒæƒ…å†µï¼šæ¨¡æ‹Ÿå™¨ä¸çœŸæœºå‡ä¸æ”¯æŒ"></a>HTTP2æ”¯æŒæƒ…å†µï¼šæ¨¡æ‹Ÿå™¨ä¸çœŸæœºå‡ä¸æ”¯æŒ</h3><p>ä¸ºäº†éªŒè¯å°ç¨‹åºå¯¹HTTPçš„æ”¯æŒé€‚é…æƒ…å†µï¼Œæˆ‘æ‰¾äº†ä¸¤ä¸ªæœåŠ¡å™¨åšæµ‹è¯•ï¼Œä¸€ä¸ªæ˜¯ç½‘ä¸Šæœç´¢åˆ°æ”¯æŒHTTP2çš„æœåŠ¡å™¨ï¼Œä¸€ä¸ªæ˜¯æˆ‘æœ¬åœ°èµ·çš„ä¸€ä¸ªHTTP2æœåŠ¡å™¨ã€‚æµ‹è¯•ä¸­æ‰€æœ‰è¯·æ±‚æ–¹æ³•å‡ä½¿ç”¨ <code>wx.request</code>ã€‚</p><ol><li><p>ç½‘ä¸Šæ”¯æŒHTTP2çš„æœåŠ¡å™¨ï¼š<code>HTTPs://www.snel.com:443</code></p></li><li><p>åœ¨Chromeä¸ŠæŸ¥çœ‹è¯¥æœåŠ¡å™¨ä¸º HTTP2</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd65fbde315~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WechatIMG11"></p></li><li><p>åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¯·æ±‚è¯¥æ¥å£ï¼Œ<code>è¯·æ±‚å¤´</code>çš„HTTPç‰ˆæœ¬ä¸ºHTTP1.1ï¼Œæ¨¡æ‹Ÿå™¨ä¸æ”¯æŒHTTP2</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd6aa018b35~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WechatIMG12"></p></li><li><p>ç”±äºå°ç¨‹åºçº¿ä¸Šç¯å¢ƒéœ€è¦åœ¨é¡¹ç›®ç®¡ç†é‡Œé…ç½®è¯·æ±‚åŸŸåï¼Œè€Œè¿™ä¸ªåŸŸåä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„è¯·æ±‚åŸŸåï¼Œæ²¡å¿…è¦æµªè´¹ä¸€ä¸ªåŸŸåä½ç½®ï¼Œæ‰€ä»¥æ‰“å¼€ä¸éªŒè¯åŸŸåï¼ŒTSL ç­‰é€‰é¡¹è¯·æ±‚è¯¥æ¥å£ï¼Œé€šè¿‡æŠ“åŒ…å·¥å…·è¡¨ç°ä¸æ¨¡æ‹Ÿå™¨ç›¸åŒ</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd6d67dc3a6~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WechatIMG14"></p></li></ol><h3 id="HTTP2æœåŠ¡å™¨éœ€è¦å¯¹å°ç¨‹åºåšå…¼å®¹æ€§é€‚é…"><a href="#HTTP2æœåŠ¡å™¨éœ€è¦å¯¹å°ç¨‹åºåšå…¼å®¹æ€§é€‚é…" class="headerlink" title="HTTP2æœåŠ¡å™¨éœ€è¦å¯¹å°ç¨‹åºåšå…¼å®¹æ€§é€‚é…"></a>HTTP2æœåŠ¡å™¨éœ€è¦å¯¹å°ç¨‹åºåšå…¼å®¹æ€§é€‚é…</h3><p>ç”±ä¸Šå¯ä»¥çœ‹å‡ºï¼Œåœ¨çœŸæœºä¸æ¨¡æ‹Ÿå™¨éƒ½ä¸æ”¯æŒ HTTP2ï¼Œä½†æ˜¯éƒ½æ˜¯æˆåŠŸè¯·æ±‚çš„ï¼Œå¹¶ä¸” <code>å“åº”å¤´</code> é‡Œçš„ HTTP ç‰ˆæœ¬éƒ½å˜æˆäº†HTTP1.1 ç‰ˆæœ¬ï¼Œè¯´æ˜æœåŠ¡å™¨å¯¹ HTTP1.1 åšäº†å…¼å®¹æ€§é€‚é…ã€‚</p><ol><li><p>æœ¬åœ°æ–°å¯ä¸€ä¸ª node æœåŠ¡å™¨ï¼Œè¿”å› JSON ä¸ºè¯·æ±‚çš„ HTTP ç‰ˆæœ¬</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd6d94de216~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WechatIMG16"></p></li><li><p>å¦‚æœæœåŠ¡å™¨åªæ”¯æŒ HTTP2ï¼Œåœ¨æ¨¡æ‹Ÿå™¨è¯·æ±‚æ—¶å‘ç”Ÿäº†ä¸€ä¸ª <code>ALPN</code> åè®®çš„é”™è¯¯ã€‚å¹¶ä¸”æé†’ä½¿ç”¨é€‚é… HTTP1</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd6dfe717d8~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WechatIMG8"></p></li><li><p>å½“æŠŠæœåŠ¡å™¨çš„ <code>allowHTTP1</code>ï¼Œè®¾ç½®ä¸º <code>true</code>ï¼Œå¹¶åœ¨è¯·æ±‚æ—¶å¤„ç†ç›¸å…³ç›¸å…³è¯·æ±‚å‚æ•°åï¼Œæ¨¡æ‹Ÿå™¨èƒ½æ­£å¸¸è®¿é—®æ¥å£ï¼Œå¹¶æ‰“å°å‡ºå¯¹åº”çš„ HTTP è¯·æ±‚ç‰ˆæœ¬</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd70704cc04~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="WechatIMG15"></p></li></ol><h1 id="æˆæƒè·å–ç”¨æˆ·ä¿¡æ¯æµç¨‹"><a href="#æˆæƒè·å–ç”¨æˆ·ä¿¡æ¯æµç¨‹" class="headerlink" title="æˆæƒè·å–ç”¨æˆ·ä¿¡æ¯æµç¨‹"></a>æˆæƒè·å–ç”¨æˆ·ä¿¡æ¯æµç¨‹</h1><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd745ae6210~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p><ul><li>session_key æœ‰æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæœŸå¹¶æ²¡æœ‰è¢«å‘ŠçŸ¥å¼€å‘è€…ï¼ŒåªçŸ¥é“ç”¨æˆ·è¶Šé¢‘ç¹ä½¿ç”¨å°ç¨‹åºï¼Œsession_key æœ‰æ•ˆæœŸè¶Šé•¿</li><li>åœ¨è°ƒç”¨ wx.login æ—¶ä¼šç›´æ¥æ›´æ–° session_keyï¼Œå¯¼è‡´æ—§ session_key å¤±æ•ˆ</li><li>å°ç¨‹åºå†…å…ˆè°ƒç”¨ wx.checkSession æ£€æŸ¥ç™»å½•æ€ï¼Œå¹¶ä¿è¯æ²¡æœ‰è¿‡æœŸçš„ session_key ä¸ä¼šè¢«æ›´æ–°ï¼Œå†è°ƒç”¨ wx.login è·å– codeã€‚æ¥ç€ç”¨æˆ·æˆæƒå°ç¨‹åºè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå°ç¨‹åºæ‹¿åˆ°åŠ å¯†åçš„ç”¨æˆ·æ•°æ®ï¼ŒæŠŠåŠ å¯†æ•°æ®å’Œ code ä¼ ç»™åç«¯æœåŠ¡ã€‚åç«¯é€šè¿‡ code æ‹¿åˆ° session_key å¹¶è§£å¯†æ•°æ®ï¼Œå°†è§£å¯†åçš„ç”¨æˆ·ä¿¡æ¯è¿”å›ç»™å°ç¨‹åº</li></ul><p><strong>é¢è¯•é¢˜ï¼šå…ˆæˆæƒè·å–ç”¨æˆ·ä¿¡æ¯å† login ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd7b715d456~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd7d0e907dc~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p><ul><li>ç”¨æˆ·æˆæƒæ—¶ï¼Œå¼€æ”¾å¹³å°ä½¿ç”¨æ—§çš„ session_key å¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡ŒåŠ å¯†ã€‚è°ƒç”¨ wx.login é‡æ–°ç™»å½•ï¼Œä¼šåˆ·æ–° session_keyï¼Œè¿™æ—¶åç«¯æœåŠ¡ä»å¼€æ”¾å¹³å°è·å–åˆ°æ–° session_keyï¼Œä½†æ˜¯æ— æ³•å¯¹è€ session_key åŠ å¯†è¿‡çš„æ•°æ®è§£å¯†ï¼Œç”¨æˆ·ä¿¡æ¯è·å–å¤±è´¥</li><li>åœ¨ç”¨æˆ·ä¿¡æ¯æˆæƒä¹‹å‰å…ˆè°ƒç”¨ wx.checkSession å‘¢ï¼Ÿwx.checkSession æ£€æŸ¥ç™»å½•æ€ï¼Œå¹¶ä¸”ä¿è¯ wx.login ä¸ä¼šåˆ·æ–° session_keyï¼Œä»è€Œè®©åç«¯æœåŠ¡æ­£ç¡®è§£å¯†æ•°æ®ã€‚ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå°ç¨‹åºè¾ƒé•¿æ—¶é—´ä¸ç”¨å¯¼è‡´ session_key è¿‡æœŸï¼Œåˆ™ wx.login å¿…å®šä¼šé‡æ–°ç”Ÿæˆ session_keyï¼Œä»è€Œå†ä¸€æ¬¡å¯¼è‡´ç”¨æˆ·ä¿¡æ¯è§£å¯†å¤±è´¥ã€‚</li></ul><h1 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h1><p><strong>æˆ‘ä»¬çŸ¥é“viewéƒ¨åˆ†æ˜¯è¿è¡Œåœ¨webviewä¸Šçš„ï¼Œæ‰€ä»¥å‰ç«¯é¢†åŸŸçš„å¤§å¤šæ•°ä¼˜åŒ–æ–¹å¼éƒ½æœ‰ç”¨ã€‚</strong></p><p><strong>æˆ‘ä»¬çŸ¥é“viewéƒ¨åˆ†æ˜¯è¿è¡Œåœ¨webviewä¸Šçš„ï¼Œæ‰€ä»¥å‰ç«¯é¢†åŸŸçš„å¤§å¤šæ•°ä¼˜åŒ–æ–¹å¼éƒ½æœ‰ç”¨ã€‚</strong></p><p><strong>æˆ‘ä»¬çŸ¥é“viewéƒ¨åˆ†æ˜¯è¿è¡Œåœ¨webviewä¸Šçš„ï¼Œæ‰€ä»¥å‰ç«¯é¢†åŸŸçš„å¤§å¤šæ•°ä¼˜åŒ–æ–¹å¼éƒ½æœ‰ç”¨ã€‚</strong></p><h2 id="åŠ è½½ä¼˜åŒ–"><a href="#åŠ è½½ä¼˜åŒ–" class="headerlink" title="åŠ è½½ä¼˜åŒ–"></a>åŠ è½½ä¼˜åŒ–</h2><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd7fd0c7cb2~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="preload"></p><p>ä»£ç åŒ…çš„å¤§å°æ˜¯æœ€ç›´æ¥å½±å“å°ç¨‹åºåŠ è½½å¯åŠ¨é€Ÿåº¦çš„å› ç´ ã€‚ä»£ç åŒ…è¶Šå¤§ä¸ä»…ä¸‹è½½é€Ÿåº¦æ—¶é—´é•¿ï¼Œä¸šåŠ¡ä»£ç æ³¨å…¥æ—¶é—´ä¹Ÿä¼šå˜é•¿ã€‚æ‰€ä»¥æœ€å¥½çš„ä¼˜åŒ–æ–¹å¼å°±æ˜¯å‡å°‘ä»£ç åŒ…çš„å¤§å°ã€‚</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd804824c9c~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="load-time-series"></p><p>å°ç¨‹åºåŠ è½½çš„ä¸‰ä¸ªé˜¶æ®µçš„è¡¨ç¤ºã€‚</p><p><strong>ä¼˜åŒ–æ–¹å¼</strong></p><ul><li>ä»£ç å‹ç¼©ã€‚</li><li>åŠæ—¶æ¸…ç†æ— ç”¨ä»£ç å’Œèµ„æºæ–‡ä»¶ã€‚</li><li>å‡å°‘ä»£ç åŒ…ä¸­çš„å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶çš„å¤§å°å’Œæ•°é‡ã€‚</li><li>åˆ†åŒ…åŠ è½½ã€‚</li></ul><p><strong>é¦–å±åŠ è½½çš„ä½“éªŒä¼˜åŒ–å»ºè®®</strong></p><ul><li>æå‰è¯·æ±‚: å¼‚æ­¥æ•°æ®è¯·æ±‚ä¸éœ€è¦ç­‰å¾…é¡µé¢æ¸²æŸ“å®Œæˆã€‚</li><li>åˆ©ç”¨ç¼“å­˜: åˆ©ç”¨ storage API å¯¹å¼‚æ­¥è¯·æ±‚æ•°æ®è¿›è¡Œç¼“å­˜ï¼ŒäºŒæ¬¡å¯åŠ¨æ—¶å…ˆåˆ©ç”¨ç¼“å­˜æ•°æ®æ¸²æŸ“é¡µé¢ï¼Œåœ¨è¿›è¡Œåå°æ›´æ–°ã€‚</li><li>é¿å…ç™½å±ï¼šå…ˆå±•ç¤ºé¡µé¢éª¨æ¶é¡µå’ŒåŸºç¡€å†…å®¹ã€‚</li><li>åŠæ—¶åé¦ˆï¼šå³æ—¶åœ°å¯¹éœ€è¦ç”¨æˆ·ç­‰å¾…çš„äº¤äº’æ“ä½œç»™å‡ºåé¦ˆï¼Œé¿å…ç”¨æˆ·ä»¥ä¸ºå°ç¨‹åºæ— å“åº”ã€‚</li></ul><h3 id="ä½¿ç”¨åˆ†åŒ…åŠ è½½ä¼˜åŒ–"><a href="#ä½¿ç”¨åˆ†åŒ…åŠ è½½ä¼˜åŒ–" class="headerlink" title="ä½¿ç”¨åˆ†åŒ…åŠ è½½ä¼˜åŒ–"></a>ä½¿ç”¨åˆ†åŒ…åŠ è½½ä¼˜åŒ–</h3><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd8ac3f82ae~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="sub-package"></p><p>åœ¨æ„å»ºå°ç¨‹åºåˆ†åŒ…é¡¹ç›®æ—¶ï¼Œæ„å»ºä¼šè¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½çš„åˆ†åŒ…ï¼Œå…¶ä¸­æ¯ä¸ªåˆ†åŒ…å°ç¨‹åºå¿…å®šå«æœ‰ä¸€ä¸ªä¸»åŒ…ï¼Œæ‰€è°“çš„ä¸»åŒ…ï¼Œå³æ”¾ç½®é»˜è®¤å¯åŠ¨é¡µé¢&#x2F;TabBar é¡µé¢ï¼Œä»¥åŠä¸€äº›æ‰€æœ‰åˆ†åŒ…éƒ½éœ€ç”¨åˆ°å…¬å…±èµ„æº&#x2F;JS è„šæœ¬ï¼Œè€Œåˆ†åŒ…åˆ™æ˜¯æ ¹æ®å¼€å‘è€…çš„é…ç½®è¿›è¡Œåˆ’åˆ†ã€‚</p><p>åœ¨å°ç¨‹åºå¯åŠ¨æ—¶ï¼Œé»˜è®¤ä¼šä¸‹è½½ä¸»åŒ…å¹¶å¯åŠ¨ä¸»åŒ…å†…é¡µé¢ï¼Œå¦‚æœç”¨æˆ·éœ€è¦æ‰“å¼€åˆ†åŒ…å†…æŸä¸ªé¡µé¢ï¼Œå®¢æˆ·ç«¯ä¼šæŠŠå¯¹åº”åˆ†åŒ…ä¸‹è½½ä¸‹æ¥ï¼Œä¸‹è½½å®Œæˆåå†è¿›è¡Œå±•ç¤ºã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å¯¹å¼€å‘è€…è€Œè¨€ï¼Œèƒ½ä½¿å°ç¨‹åºæœ‰æ›´å¤§çš„ä»£ç ä½“ç§¯ï¼Œæ‰¿è½½æ›´å¤šçš„åŠŸèƒ½ä¸æœåŠ¡</li><li>å¯¹ç”¨æˆ·è€Œè¨€ï¼Œå¯ä»¥æ›´å¿«åœ°æ‰“å¼€å°ç¨‹åºï¼ŒåŒæ—¶åœ¨ä¸å½±å“å¯åŠ¨é€Ÿåº¦å‰æä¸‹ä½¿ç”¨æ›´å¤šåŠŸèƒ½</li></ul><p>é™åˆ¶ï¼š</p><ul><li>æ•´ä¸ªå°ç¨‹åºæ‰€æœ‰åˆ†åŒ…å¤§å°ä¸è¶…è¿‡ 8M</li><li>å•ä¸ªåˆ†åŒ…&#x2F;ä¸»åŒ…å¤§å°ä¸èƒ½è¶…è¿‡ 2M</li></ul><p><strong>åŸç”Ÿåˆ†åŒ…åŠ è½½çš„é…ç½®</strong> å‡è®¾æ”¯æŒåˆ†åŒ…çš„å°ç¨‹åºç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">stataå¤åˆ¶ä»£ç â”œâ”€â”€ <span class="keyword">app</span>.js</span><br><span class="line">â”œâ”€â”€ <span class="keyword">app</span>.json</span><br><span class="line">â”œâ”€â”€ <span class="keyword">app</span>.wxss</span><br><span class="line">â”œâ”€â”€ packageA</span><br><span class="line">â”‚   â””â”€â”€ pages</span><br><span class="line">â”‚       â”œâ”€â”€ <span class="keyword">cat</span></span><br><span class="line">â”‚       â””â”€â”€ dog</span><br><span class="line">â”œâ”€â”€ packageB</span><br><span class="line">â”‚   â””â”€â”€ pages</span><br><span class="line">â”‚       â”œâ”€â”€ apple</span><br><span class="line">â”‚       â””â”€â”€ banana</span><br><span class="line">â”œâ”€â”€ pages</span><br><span class="line">â”‚   â”œâ”€â”€ index</span><br><span class="line">â”‚   â””â”€â”€ logs</span><br><span class="line">â””â”€â”€ utils</span><br></pre></td></tr></table></figure><p>å¼€å‘è€…é€šè¿‡åœ¨ app.json subPackages å­—æ®µå£°æ˜é¡¹ç›®åˆ†åŒ…ç»“æ„ï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">prologå¤åˆ¶ä»£ç &#123;</span><br><span class="line">  <span class="string">&quot;pages&quot;</span>:[</span><br><span class="line">    <span class="string">&quot;pages/index&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pages/logs&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;subPackages&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;root&quot;</span>: <span class="string">&quot;packageA&quot;</span>,</span><br><span class="line">      <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;pages/cat&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pages/dog&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="string">&quot;root&quot;</span>: <span class="string">&quot;packageB&quot;</span>,</span><br><span class="line">      <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;pages/apple&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pages/banana&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ†åŒ…åŸåˆ™</strong></p><ul><li>å£°æ˜ subPackages åï¼Œå°†æŒ‰ subPackages é…ç½®è·¯å¾„è¿›è¡Œæ‰“åŒ…ï¼ŒsubPackages é…ç½®è·¯å¾„å¤–çš„ç›®å½•å°†è¢«æ‰“åŒ…åˆ° appï¼ˆä¸»åŒ…ï¼‰ ä¸­</li><li>appï¼ˆä¸»åŒ…ï¼‰ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ pagesï¼ˆå³æœ€å¤–å±‚çš„ pages å­—æ®µ</li><li>subPackage çš„æ ¹ç›®å½•ä¸èƒ½æ˜¯å¦å¤–ä¸€ä¸ª subPackage å†…çš„å­ç›®å½•</li><li>é¦–é¡µçš„ TAB é¡µé¢å¿…é¡»åœ¨ appï¼ˆä¸»åŒ…ï¼‰å†…</li></ul><p><strong>å¼•ç”¨åŸåˆ™</strong></p><ul><li>packageA æ— æ³• require packageB JS æ–‡ä»¶ï¼Œä½†å¯ä»¥ require appã€è‡ªå·± package å†…çš„ JS æ–‡ä»¶</li><li>packageA æ— æ³• import packageB çš„ templateï¼Œä½†å¯ä»¥ require appã€è‡ªå·± package å†…çš„ template</li><li>packageA æ— æ³•ä½¿ç”¨ packageB çš„èµ„æºï¼Œä½†å¯ä»¥ä½¿ç”¨ appã€è‡ªå·± package å†…çš„èµ„æº</li></ul><p><strong>å®˜æ–¹å³å°†æ¨å‡º</strong> åˆ†åŒ…é¢„åŠ è½½</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd8b2167186~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="preload-sub-package"></p><p>ç‹¬ç«‹åˆ†åŒ…</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd8b7610a45~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="single-sub-package"></p><h2 id="æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"><a href="#æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"></a>æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</h2><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd8e28809dd~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="render"></p><ul><li>æ¯æ¬¡ setData çš„è°ƒç”¨éƒ½æ˜¯ä¸€æ¬¡è¿›ç¨‹é—´é€šä¿¡è¿‡ç¨‹ï¼Œé€šä¿¡å¼€é”€ä¸ setData çš„æ•°æ®é‡æ­£ç›¸å…³ã€‚</li><li>setData ä¼šå¼•å‘è§†å›¾å±‚é¡µé¢å†…å®¹çš„æ›´æ–°ï¼Œè¿™ä¸€è€—æ—¶æ“ä½œä¸€å®šæ—¶é—´ä¸­ä¼šé˜»å¡ç”¨æˆ·äº¤äº’ã€‚</li><li><strong>setData æ˜¯å°ç¨‹åºå¼€å‘ä½¿ç”¨æœ€é¢‘ç¹ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“å¼•å‘æ€§èƒ½é—®é¢˜çš„ã€‚</strong></li></ul><p><strong>é¿å…ä¸å½“ä½¿ç”¨ setData</strong></p><ul><li>ä½¿ç”¨ data åœ¨æ–¹æ³•é—´å…±äº«æ•°æ®ï¼Œ<strong>å¯èƒ½å¢åŠ  setData ä¼ è¾“çš„æ•°æ®é‡ã€‚</strong>ã€‚data åº”ä»…åŒ…æ‹¬ä¸é¡µé¢æ¸²æŸ“ç›¸å…³çš„æ•°æ®ã€‚</li><li>ä½¿ç”¨ setData ä¼ è¾“å¤§é‡æ•°æ®ï¼Œ<strong>é€šè®¯è€—æ—¶ä¸æ•°æ®æ­£ç›¸å…³ï¼Œé¡µé¢æ›´æ–°å»¶è¿Ÿå¯èƒ½é€ æˆé¡µé¢æ›´æ–°å¼€é”€å¢åŠ ã€‚</strong>ä»…ä¼ è¾“é¡µé¢ä¸­å‘ç”Ÿå˜åŒ–çš„æ•°æ®ï¼Œä½¿ç”¨ setData çš„ç‰¹æ®Š key å®ç°å±€éƒ¨æ›´æ–°ã€‚</li><li>çŸ­æ—¶é—´å†…é¢‘ç¹è°ƒç”¨ setDataï¼Œ<strong>æ“ä½œå¡é¡¿ï¼Œäº¤äº’å»¶è¿Ÿï¼Œé˜»å¡é€šä¿¡ï¼Œé¡µé¢æ¸²æŸ“å»¶è¿Ÿã€‚</strong>é¿å…ä¸å¿…è¦çš„ setDataï¼Œå¯¹è¿ç»­çš„setDataè°ƒç”¨è¿›è¡Œåˆå¹¶ã€‚</li><li>åœ¨åå°é¡µé¢è¿›è¡Œ setDataï¼Œ<strong>æŠ¢å å‰å°é¡µé¢çš„æ¸²æŸ“èµ„æºã€‚</strong>é¡µé¢åˆ‡å…¥åå°åçš„ setData è°ƒç”¨ï¼Œå»¶è¿Ÿåˆ°é¡µé¢é‡æ–°å±•ç¤ºæ—¶æ‰§è¡Œã€‚</li></ul><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd57d4375f0~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="one-context"></p><p><strong>é¿å…ä¸å½“ä½¿ç”¨onPageScroll</strong></p><ul><li>åªåœ¨æœ‰å¿…è¦çš„æ—¶å€™ç›‘å¬ pageScroll äº‹ä»¶ã€‚ä¸ç›‘å¬ï¼Œåˆ™ä¸ä¼šæ´¾å‘ã€‚</li><li>é¿å…åœ¨ onPageScroll ä¸­æ‰§è¡Œå¤æ‚é€»è¾‘</li><li>é¿å…åœ¨ onPageScroll ä¸­é¢‘ç¹è°ƒç”¨ setData</li><li>é¿å…æ»‘åŠ¨æ—¶é¢‘ç¹æŸ¥è¯¢èŠ‚ç‚¹ä¿¡æ¯ï¼ˆSelectQueryï¼‰ç”¨ä»¥åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºï¼Œéƒ¨åˆ†åœºæ™¯å»ºè®®ä½¿ç”¨èŠ‚ç‚¹å¸ƒå±€æ©¡èƒ¶çŠ¶æ€ç›‘å¬ï¼ˆinersectionObserverï¼‰æ›¿ä»£</li></ul><p><strong>ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶</strong></p><p>åœ¨éœ€è¦é¢‘ç¹æ›´æ–°çš„åœºæ™¯ä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶çš„æ›´æ–°åªåœ¨ç»„ä»¶å†…éƒ¨è¿›è¡Œï¼Œä¸å—é¡µé¢å…¶ä»–éƒ¨åˆ†å†…å®¹å¤æ‚æ€§å½±å“ã€‚</p><h1 id="å®˜æ–¹å°ç¨‹åºæŠ€æœ¯èƒ½åŠ›è§„åˆ’"><a href="#å®˜æ–¹å°ç¨‹åºæŠ€æœ¯èƒ½åŠ›è§„åˆ’" class="headerlink" title="å®˜æ–¹å°ç¨‹åºæŠ€æœ¯èƒ½åŠ›è§„åˆ’"></a>å®˜æ–¹å°ç¨‹åºæŠ€æœ¯èƒ½åŠ›è§„åˆ’</h1><h2 id="è‡ªå®šä¹‰ç»„ä»¶2-0"><a href="#è‡ªå®šä¹‰ç»„ä»¶2-0" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶2.0"></a>è‡ªå®šä¹‰ç»„ä»¶2.0</h2><p>å°ç¨‹åºçš„å‡ ä¸ªé¡µé¢é—´ï¼Œå­˜åœ¨ä¸€äº›ç›¸åŒæˆ–æ˜¯ç±»ä¼¼çš„åŒºåŸŸï¼Œè¿™æ—¶å€™å¯ä»¥æŠŠè¿™äº›åŒºåŸŸé€»è¾‘å°è£…æˆä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œä»£ç å°±å¯ä»¥é‡ç”¨ï¼Œæˆ–è€…å¯¹äºæ¯”è¾ƒç‹¬ç«‹é€»è¾‘ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒå°è£…æˆä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯å¾®ä¿¡å»å¹´å‘å¸ƒçš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œå®ƒè®©ä»£ç å¾—åˆ°å¤ç”¨ã€å‡å°‘ä»£ç é‡ï¼Œæ›´æ–¹ä¾¿æ¨¡å—åŒ–ï¼Œä¼˜åŒ–ä»£ç æ¶æ„ç»„ç»‡ï¼Œä¹Ÿä½¿å¾—æ¨¡å—æ¸…æ™°ï¼ŒåæœŸæ›´å¥½åœ°ç»´æŠ¤ï¼Œä»è€Œä¿è¯æ›´å¥½çš„æ€§èƒ½ã€‚</p><p>ä½†å¾®ä¿¡æ‰“ç®—åœ¨åŸæ¥çš„åŸºç¡€ä¸Šæ¨å‡ºçš„è‡ªå®šä¹‰ç»„ä»¶ 2.0ï¼Œå®ƒå°†æ‹¥æœ‰æ›´é«˜çº§çš„æ€§èƒ½ï¼š</p><ul><li>usingComponents è®¡åˆ’æ”¯æŒå…¨å±€å®šä¹‰å’Œé€šé…ç¬¦å®šä¹‰ï¼šè¿™æ„å‘³ç€ä¸ç”¨åœ¨æ¯ä¸ªé¡µé¢åå¤å®šä¹‰ï¼Œå¯ä»¥æ‰¹é‡å¯¼å…¥ç›®å½•ä¸‹çš„æ‰€æœ‰è‡ªå®šä¹‰ç»„ä»¶</li><li>è®¡åˆ’æ”¯æŒç±»ä¼¼ Computed å’Œ watch çš„åŠŸèƒ½ï¼Œå®ƒèƒ½ä½¿ä»£ç é€»è¾‘æ›´æ¸…æ™°</li><li>è®¡åˆ’æ”¯æŒ Component æ„é€ å™¨æ’ä»¶ï¼Œåœ¨å®ä¾‹åŒ–ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„æ—¶å€™ï¼Œå…è®¸ä½ åœ¨æ„é€ å™¨çš„è¿™ä¸ªé˜¶æ®µï¼ŒåŠ å…¥ä¸€äº›é€»è¾‘ï¼Œæ–¹ä¾¿è¿›è¡Œä¸€äº›æ‰©å±•ï¼Œç”šè‡³æ˜¯å¯ä»¥æ‰©å±•æˆ Vue çš„è¯­æ³•</li></ul><h2 id="npmæ”¯æŒ"><a href="#npmæ”¯æŒ" class="headerlink" title="npmæ”¯æŒ"></a>npmæ”¯æŒ</h2><p>ç›®å‰å°ç¨‹åºå¼€å‘çš„ç—›ç‚¹æ˜¯ï¼šå¼€æºç»„ä»¶è¦æ‰‹åŠ¨å¤åˆ¶åˆ°é¡¹ç›®ï¼Œåç»­æ›´æ–°ç»„ä»¶ä¹Ÿéœ€è¦æ‰‹åŠ¨æ“ä½œã€‚ä¸ä¹…çš„å°†æ¥ï¼Œå°ç¨‹åºå°†æ”¯æŒnpmåŒ…ç®¡ç†ï¼Œæœ‰äº†è¿™ä¸ªä¹‹åï¼Œæƒ³è¦å¼•å…¥ä¸€äº›å¼€æºçš„é¡¹ç›®å°±å˜å¾—å¾ˆç®€å•äº†ï¼Œåªè¦åœ¨é¡¹ç›®é‡Œé¢å£°æ˜ï¼Œç„¶åç”¨ç®€å•çš„å‘½ä»¤å®‰è£…ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><h2 id="å®˜æ–¹è‡ªå®šä¹‰ç»„ä»¶"><a href="#å®˜æ–¹è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="å®˜æ–¹è‡ªå®šä¹‰ç»„ä»¶"></a>å®˜æ–¹è‡ªå®šä¹‰ç»„ä»¶</h2><p>å¾®ä¿¡å°ç¨‹åºå›¢é˜Ÿè¡¨ç¤ºï¼Œä»–ä»¬åœ¨è€ƒè™‘æ¨å‡ºä¸€äº›å®˜æ–¹è‡ªå®šä¹‰ç»„ä»¶ï¼Œä¸ºä»€ä¹ˆä¸å†…ç½®åˆ°åŸºç¡€åº“é‡Œå‘¢ï¼Ÿå› ä¸ºå†…ç½®ç»„ä»¶è¦æä¾›ç»™å¼€å‘è€…ï¼Œè¿™ä¸ªç»„ä»¶ä¸€å®šæ˜¯å¼€å‘è€…å¾ˆéš¾å®ç°æˆ–è€…æ˜¯æ— æ³•å®ç°çš„ä¸€ä¸ªèƒ½åŠ›ã€‚æ‰€ä»¥ä»–ä»¬æ›´å€¾å‘äºå°è£…æˆè‡ªå®šä¹‰ç»„ä»¶ï¼Œæƒ³åŸºäºè¿™äº›å†…ç½®ç»„ä»¶é‡Œï¼Œå°è£…ä¸€äº›æ¯”è¾ƒå¸¸è§çš„ã€äº¤äº’é€»è¾‘æ¯”è¾ƒå¤æ‚çš„ç»„ä»¶ç»™å¤§å®¶ä½¿ç”¨ï¼Œè®©å¤§å®¶æ›´å®¹æ˜“å¼€å‘ã€‚ç±»ä¼¼å¼¹å¹•ç»„ä»¶ï¼Œå¼€å‘è€…å°±ä¸ç”¨å…³æ³¨å¼¹å¹•æ€ä¹ˆé£˜ï¼Œå¯ä»¥èŠ‚çœå¼€å‘è€…çš„å¼€å‘æˆæœ¬ã€‚</p><p>åŒæ—¶ï¼Œä»–ä»¬ä¹Ÿæƒ³ç»™å¼€å‘è€…æä¾›ä¸€äº›è§„èŒƒå’Œä¸€äº›æ¨¡æ¿ï¼Œè®©å¼€å‘è€…è®¾è®¡å‡ºå¥½ç”¨çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œæ›´å¥½åœ°è¢«å¤§å®¶å»ä½¿ç”¨ã€‚</p><h2 id="æ·»åŠ ä½“éªŒè¯„åˆ†"><a href="#æ·»åŠ ä½“éªŒè¯„åˆ†" class="headerlink" title="æ·»åŠ ä½“éªŒè¯„åˆ†"></a>æ·»åŠ ä½“éªŒè¯„åˆ†</h2><p>å½“å°ç¨‹åºåŠ è½½å¤ªæ…¢æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”¨æˆ·çš„æµå¤±ï¼Œè€Œå°ç¨‹åºçš„å¼€å‘è€…å¯èƒ½ä¼šé¢ä¸´ç€ä¸çŸ¥é“å¦‚ä½•å®šä½é—®é¢˜æˆ–ä¸çŸ¥å¦‚ä½•è§£å†³é—®é¢˜çš„å›°å¢ƒã€‚</p><p>ä¸ºæ­¤ï¼Œå°ç¨‹åºå³å°†æ¨å‡ºä¸€ä¸ªä½“éªŒè¯„åˆ†çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸ºäº†å¸®åŠ©å¼€å‘è€…å¯ä»¥æ£€æŸ¥å‡ºå°ç¨‹åºæœ‰ä¸€äº›ä»€ä¹ˆä½“éªŒä¸å¥½çš„åœ°æ–¹ï¼Œä¹Ÿä¼šåŒæ—¶ç»™å‡ºä¸€ä»½ä¼˜åŒ–çš„æŒ‡å¼•å»ºè®®ã€‚</p><h2 id="åŸç”Ÿç»„ä»¶åŒå±‚æ¸²æŸ“"><a href="#åŸç”Ÿç»„ä»¶åŒå±‚æ¸²æŸ“" class="headerlink" title="åŸç”Ÿç»„ä»¶åŒå±‚æ¸²æŸ“"></a>åŸç”Ÿç»„ä»¶åŒå±‚æ¸²æŸ“</h2><p>å°ç¨‹åºåœ¨æœ€åˆçš„æŠ€æœ¯é€‰å‹æ—¶ï¼Œå¼•å…¥äº†åŸç”Ÿç»„ä»¶çš„æ¦‚å¿µï¼Œå› ä¸ºåŸç”Ÿç»„ä»¶å¯ä»¥ä½¿å°ç¨‹åºçš„èƒ½åŠ›æ›´åŠ ä¸°å¯Œï¼Œæ¯”å¦‚åœ°å›¾ã€éŸ³è§†é¢‘çš„èƒ½åŠ›ï¼Œä½†æ˜¯åŸç”Ÿç»„ä»¶æ˜¯ç”±å®¢æˆ·ç«¯åŸç”Ÿæ¸²æŸ“çš„ï¼Œå¯¼è‡´äº†åŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œå¼€å‘è€…å¾ˆå®¹æ˜“é‡åˆ°æ‰“å¼€è°ƒè¯•çš„é—®é¢˜ï¼Œå‘ç°è§†é¢‘ç»„ä»¶æŒ¡åœ¨äº† vConsole ä¸Šã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“æ—¶å¾®ä¿¡åšäº†ä¸€ä¸ªè¿‡æ¸¡çš„æ–¹æ¡ˆï¼šcover-viewã€‚cover-viewå¯ä»¥è¦†ç›–åœ¨åŸç”Ÿç»„ä»¶ä¹‹ä¸Šï¼Œè¿™ä¸€å¥—æ–¹æ¡ˆè§£å†³äº†å¤§éƒ¨åˆ†çš„éœ€æ±‚åœºæ™¯ã€‚æ¯”å¦‚è¯´è§†é¢‘ç»„ä»¶ä¸Šå¾ˆå¤šçš„æŒ‰é’®ã€æ ‡é¢˜ç”šè‡³è¿˜æœ‰åŠ¨ç”»çš„å¼¹å¹•ï¼Œè¿™äº›éƒ½æ˜¯ç”¨ cover-view å»å®ç°çš„ï¼Œä½†å®ƒè¿˜æ˜¯æ²¡æœ‰å®Œå…¨è§£å†³åŸç”Ÿç»„ä»¶çš„å¼€å‘ä½“éªŒé—®é¢˜ï¼Œå› ä¸º cover-view æœ‰ä¸€äº›é™åˆ¶ï¼š</p><ul><li>æ— æ³•ä¸å…¶ä»–ç»„ä»¶æ··åœ¨ä¸€èµ·æ¸²æŸ“</li><li>æ²¡æœ‰å®Œæ•´çš„è§¦æ‘¸äº‹ä»¶</li><li>cover-view å¯¹æ ·å¼çš„è¡¨ç°æœ‰å·®å¼‚</li><li>cover-view å¯¹æ ·å¼çš„æ”¯æŒåº¦ä¸å¤Ÿé«˜</li></ul><p>å› æ­¤å¾®ä¿¡å†³å®šå°†ç”¨åŒå±‚æ¸²æŸ“å–ä»£ cover-viewï¼Œå®ƒèƒ½åƒæ™®é€šç»„ä»¶ä¸€æ ·ä½¿ç”¨ï¼ŒåŸç”Ÿç»„ä»¶çš„å±‚çº§ä¸å†æ˜¯æœ€é«˜ï¼Œè€Œæ˜¯å’Œå…¶ä»–çš„éåŸç”Ÿç»„ä»¶åœ¨åŒä¸€å±‚çº§æ¸²æŸ“ï¼Œå¯å®Œå…¨ç”± z-index æ§åˆ¶ï¼Œå¯å®Œå…¨æ”¯æŒè§¦æ‘¸äº‹ä»¶ã€‚</p><p>å¾®ä¿¡è¡¨ç¤ºï¼ŒåŒå±‚æ¸²æŸ“åœ¨ iOS å¹³å°å°ç¨‹åºä¸Šå·²ç»å¼€å§‹å†…æµ‹ï¼Œä¼šå¾ˆå¿«å¼€æ”¾ç»™å¼€å‘è€…ï¼ŒAndroid å¹³å°å·²ç»å–å¾—çªç ´æ€§è¿›å±•ï¼Œç›®å‰æ­£åœ¨åšä¸€è½®å°è£…çš„å·¥ä½œï¼Œå¼€æ”¾æŒ‡æ—¥å¯å¾…ã€‚</p><h1 id="wepy-vs-mpvue"><a href="#wepy-vs-mpvue" class="headerlink" title="wepy vs mpvue"></a>wepy vs mpvue</h1><h2 id="æ•°æ®æµç®¡ç†"><a href="#æ•°æ®æµç®¡ç†" class="headerlink" title="æ•°æ®æµç®¡ç†"></a>æ•°æ®æµç®¡ç†</h2><p>ç›¸æ¯”ä¼ ç»Ÿçš„å°ç¨‹åºæ¡†æ¶ï¼Œè¿™ä¸ªä¸€ç›´æ˜¯æˆ‘ä»¬ä½œä¸ºèµ„æ·±å¼€å‘è€…æ¯”è¾ƒæœŸæœ›å»è§£å†³çš„ï¼Œåœ¨ Web å¼€å‘ä¸­ï¼Œéšç€ Fluxã€Reduxã€Vuex ç­‰å¤šä¸ªæ•°æ®æµå·¥å…·å‡ºç°ï¼Œæˆ‘ä»¬ä¹ŸæœŸæœ›åœ¨ä¸šåŠ¡å¤æ‚çš„å°ç¨‹åºä¸­ä½¿ç”¨ã€‚</p><ul><li>WePY é»˜è®¤æ”¯æŒ Reduxï¼Œåœ¨è„šæ‰‹æ¶ç”Ÿæˆé¡¹ç›®çš„æ—¶å€™å¯ä»¥å†…ç½®</li><li>Mpvue ä½œä¸º Vue çš„ç§»æ¤ç‰ˆæœ¬ï¼Œå½“ç„¶æ”¯æŒ Vuexï¼ŒåŒæ ·åœ¨è„šæ‰‹æ¶ç”Ÿæˆé¡¹ç›®çš„æ—¶å€™å¯ä»¥å†…ç½®</li></ul><h2 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h2><p>å¦‚æœä½ å’Œæˆ‘ä»¬ä¸€æ ·ï¼Œç»å†äº†ä»æ— åˆ°æœ‰çš„å°ç¨‹åºä¸šåŠ¡å¼€å‘ï¼Œå»ºè®®é˜…è¯»ã€å°ç¨‹åºçš„ç»„ä»¶åŒ–å¼€å‘ã€‘ç« èŠ‚ï¼Œè¿›è¡Œå®˜æ–¹è¯­æ³•çš„ç»„ä»¶åº“å¼€å‘ï¼ˆä»åŸºç¡€åº“ 1.6.3 å¼€å§‹ï¼Œå®˜æ–¹æä¾›äº†ç»„ä»¶åŒ–è§£å†³æ–¹æ¡ˆï¼‰ã€‚</p><ul><li>WePY ç±»ä¼¼ Vue å®ç°äº†å•æ–‡ä»¶ç»„ä»¶ï¼Œæœ€å¤§çš„å·®åˆ«æ˜¯æ–‡ä»¶åç¼€ .wpyï¼Œåªæ˜¯å†™æ³•ä¸Šä¼šæœ‰å·®å¼‚ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ã€ä¸»æµæ¡†æ¶ä½¿ç”¨æ¡ˆä¾‹ 1ï¼šWePYã€‘ç« èŠ‚ï¼Œå­¦ä¹ èµ·æ¥æœ‰ä¸€å®šæˆæœ¬ï¼Œä¸è¿‡ä¹Ÿä¼šå¾ˆå¿«é€‚åº”ï¼š</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala</span><br><span class="line">å¤åˆ¶ä»£ç <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>Mpvue ä½œä¸º Vue çš„ç§»æ¤ç‰ˆæœ¬ï¼Œæ”¯æŒå•æ–‡ä»¶ç»„ä»¶ï¼Œtemplateã€script å’Œ style éƒ½åœ¨ä¸€ä¸ª .vue æ–‡ä»¶ä¸­ï¼Œå’Œ vue çš„å†™æ³•ç±»ä¼¼ï¼Œæ‰€ä»¥å¯¹ Vue å¼€å‘ç†Ÿæ‚‰çš„åŒå­¦ä¼šæ¯”è¾ƒé€‚åº”ã€‚</li></ul><h2 id="å·¥ç¨‹åŒ–"><a href="#å·¥ç¨‹åŒ–" class="headerlink" title="å·¥ç¨‹åŒ–"></a>å·¥ç¨‹åŒ–</h2><p>æ‰€æœ‰çš„å°ç¨‹åºå¼€å‘ä¾èµ–å®˜æ–¹æä¾›çš„å¼€å‘è€…å·¥å…·ã€‚å¼€å‘è€…å·¥å…·ç®€å•ç›´è§‚ï¼Œå¯¹è°ƒè¯•å°ç¨‹åºå¾ˆæœ‰å¸®åŠ©ï¼Œç°åœ¨ä¹Ÿæ”¯æŒè…¾è®¯äº‘ï¼ˆç›®å‰æˆ‘ä»¬è¿˜æ²¡æœ‰ä½¿ç”¨ï¼Œä½†æ˜¯å¯¹æ–°çš„ä¸€äº›å¼€å‘è€…è¿˜æ˜¯æœ‰å¸®åŠ©çš„ï¼‰ï¼Œå¯ä»¥ç”³è¯·æµ‹è¯•æŠ¥å‘ŠæŸ¥çœ‹å°ç¨‹åºåœ¨çœŸå®çš„ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œæ€§èƒ½å’Œè¿è¡Œæ•ˆæœï¼Œä½†æ˜¯å®ƒæœ¬èº«æ²¡æœ‰ç±»ä¼¼å‰ç«¯å·¥ç¨‹åŒ–ä¸­çš„æ¦‚å¿µå’Œå·¥å…·ã€‚</p><ul><li><p>wepy å†…ç½®äº†æ„å»ºï¼Œé€šè¿‡ wepy init å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p></li><li><p>wepy-cli ä¼šåˆ¤æ–­æ¨¡ç‰ˆæ˜¯åœ¨è¿œç¨‹ä»“åº“è¿˜æ˜¯åœ¨æœ¬åœ°ï¼Œå¦‚æœåœ¨æœ¬åœ°åˆ™ä¼šç«‹å³è·³åˆ°ç¬¬ 3 æ­¥ï¼Œåä¹‹ç»§ç»­è¿›è¡Œã€‚</p></li><li><p>ä¼šä»è¿œç¨‹ä»“åº“ä¸‹è½½æ¨¡ç‰ˆï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</p></li><li><p>è¯¢é—®å¼€å‘è€… Project name ç­‰é—®é¢˜ï¼Œä¾æ®å¼€å‘è€…çš„å›ç­”ï¼Œåˆ›å»ºé¡¹ç›®ã€‚</p></li><li><p>mpvue æ²¿ç”¨äº† vue ä¸­æ¨å´‡çš„ webpack ä½œä¸ºæ„å»ºå·¥å…·ï¼Œä½†åŒæ—¶æä¾›äº†ä¸€äº›è‡ªå·±çš„æ’ä»¶ä»¥åŠé…ç½®æ–‡ä»¶çš„ä¸€äº›ä¿®æ”¹ï¼Œæ¯”å¦‚ï¼š</p></li><li><p>ä¸å†éœ€è¦ html-webpack-plugin</p></li><li><p>åŸºäº webpack-dev-middleware ä¿®æ”¹æˆ webpack-dev-middleware-hard-disk</p></li><li><p>æœ€å¤§çš„å˜åŒ–æ˜¯åŸºäº webpack-loader ä¿®æ”¹æˆ mpvue-loader</p></li><li><p>ä½†æ˜¯é…ç½®æ–¹å¼è¿˜æ˜¯ç±»ä¼¼ï¼Œåˆ†ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œæœ€ç»ˆéƒ½ä¼šç¼–è¯‘æˆå°ç¨‹åºæ”¯æŒçš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶åç¼€ã€‚</p></li></ul><h2 id="ç»¼åˆæ¯”è¾ƒ"><a href="#ç»¼åˆæ¯”è¾ƒ" class="headerlink" title="ç»¼åˆæ¯”è¾ƒ"></a>ç»¼åˆæ¯”è¾ƒ</h2><table><thead><tr><th>å¯¹æ¯”\æ¡†æ¶</th><th>å¾®ä¿¡å°ç¨‹åº</th><th>mpvue</th><th>wepy</th></tr></thead><tbody><tr><td>è¯­æ³•è§„èŒƒ</td><td>å°ç¨‹åºå¼€å‘è§„èŒƒ</td><td>vue.js</td><td>ç±»vue.js</td></tr><tr><td>æ ‡ç­¾é›†åˆ</td><td>å°ç¨‹åº</td><td>htm l + å°ç¨‹åº</td><td>å°ç¨‹åº</td></tr><tr><td>æ ·å¼è§„èŒƒ</td><td>wxss</td><td>sass,less,postcss</td><td>sass,less,styus</td></tr><tr><td>ç»„ä»¶åŒ–</td><td>æ— ç»„ä»¶åŒ–æœºåˆ¶</td><td>vueè§„èŒƒ</td><td>è‡ªå®šä¹‰ç»„ä»¶è§„èŒƒ</td></tr><tr><td>å¤šæ®µå¤ç”¨</td><td>ä¸å¯å¤ç”¨</td><td>æ”¯æŒh5</td><td>æ”¯æŒh5</td></tr><tr><td>è‡ªåŠ¨æ„å»º</td><td>æ— è‡ªåŠ¨æ„å»º</td><td>webpack</td><td>æ¡†æ¶å†…ç½®</td></tr><tr><td>ä¸Šæ‰‹æˆæœ¬</td><td>å…¨æ–°å­¦ä¹ </td><td>vue å­¦ä¹ </td><td>vue å’Œ wepy</td></tr><tr><td>æ•°æ®ç®¡ç†</td><td>ä¸æ”¯æŒ</td><td>vuex</td><td>redux</td></tr></tbody></table><h2 id="é€‰å‹çš„ä¸ªäººçœ‹æ³•"><a href="#é€‰å‹çš„ä¸ªäººçœ‹æ³•" class="headerlink" title="é€‰å‹çš„ä¸ªäººçœ‹æ³•"></a>é€‰å‹çš„ä¸ªäººçœ‹æ³•</h2><p>å…ˆè¯´ç»“è®ºï¼šé€‰æ‹© mpvueã€‚</p><p>wepy vs mpvueã€‚</p><p>ç†ç”±ï¼š</p><p><strong>å·¥ç¨‹åŒ–</strong> åŸç”Ÿå¼€å‘å› ä¸ºä¸å¸¦å·¥ç¨‹åŒ–ï¼Œè¯¸å¦‚NPMåŒ…ï¼ˆæœªæ¥ä¼šå¼•å…¥ï¼‰ã€ES7ã€å›¾ç‰‡å‹ç¼©ã€PostCssã€pugã€ESLintç­‰ç­‰ä¸èƒ½ç”¨ã€‚å¦‚æœè‡ªå·±è¦æ­å·¥ç¨‹åŒ–ï¼Œä¸å¦‚ç›´æ¥ä½¿ç”¨wepyæˆ–mpvueã€‚mpvueå’Œwepyéƒ½å¯ä»¥å’Œå°ç¨‹åºåŸç”Ÿå¼€å‘æ··å†™ã€‚<a href="#https://github.com/mpvue/examples/tree/master/echarts">å‚è€ƒmpvue-echart</a>ï¼Œ<a href="https://link.juejin.cn/?target=https://github.com/Tencent/wepy/issues/1560">å‚è€ƒwepy</a>ã€‚ è€Œé—®é¢˜åœ¨äºwepyæ²¡æœ‰å¼•å…¥webpack(<a href="mailto:&#119;&#x65;&#112;&#121;&#64;&#50;&#x2e;&#48;&#x2e;&#x78;">&#119;&#x65;&#112;&#121;&#64;&#50;&#x2e;&#48;&#x2e;&#x78;</a>ä¾ç„¶æ²¡æœ‰å¼•å…¥)ï¼Œä»¥ä¸Šè¯´çš„è¿™äº›ä¸œè¥¿éƒ½è¦é€ è½®å­ï¼ˆä½œè€…é€ æˆ–è‡ªå·±é€ ï¼‰ã€‚æ²¡æœ‰å¼•å…¥ Webpack æ˜¯ä¸€ä¸ªé‡å¤§çš„ç¡¬ä¼¤ã€‚ç¤¾åŒºç»´æŠ¤çš„æˆç†Ÿ Webpack æ˜¾ç„¶æ›´ç¨³å®šï¼Œè½®å­æ›´å¤šã€‚</p><p><strong>ç»´æŠ¤</strong> wepy ä¹Ÿæ˜¯ç¤¾åŒºç»´æŠ¤çš„ï¼Œæ˜¯å®˜æ–¹çš„ï¼Ÿå…¶å® wepy çš„ä¸»è¦å¼€å‘è€…åªæœ‰ä½œè€…ä¸€äººï¼Œé™„ä¸Šä¸€ä¸ª<a href="https://link.juejin.cn/?target=https://github.com/Tencent/wepy/graphs/contributors">contrubutors</a>é“¾æ¥ã€‚å¦å¤–è¢«å®˜æ–¹æ‹›å®‰äº†ä¹Ÿæ˜¯åæ¥çš„äº‹ï¼Œå†è¯´è…¾è®¯è¦æœ‰ç²¾åŠ›å¸®ç€ä¸€èµ·ç»´æŠ¤å¥½ wepyï¼Œä¸ºä»€ä¹ˆä¸èŠ±ç²¾åŠ›åœ¨å°ç¨‹åºåŸç”Ÿå¼€å‘ä¸Šå‘¢ï¼Ÿå†æ¥çœ‹çœ‹ mpvueï¼Œæ˜¯ç¾å›¢ä¸€ä¸ªå‰ç«¯å°ç»„ç»´æŠ¤çš„ã€‚</p><p><strong>å­¦ä¹ æˆæœ¬</strong> Vue çš„å­¦ä¹ æ›²çº¿æ¯”è¾ƒå¹³ç¼“ã€‚mpvue æ˜¯ Vueçš„å­é›†ã€‚æ‰€ä»¥ mpvue çš„å­¦ä¹ æˆæœ¬ä¼šä½äº wepyã€‚å°¤å…¶æ˜¯ä¹‹å‰æŠ€æœ¯æ ˆæœ‰å­¦è¿‡ç”¨è¿‡ Vue çš„ã€‚</p><p><strong>æœªæ¥è§„åˆ’</strong> mpvue å·²ç»æ”¯æŒ web å’Œå°ç¨‹åºã€‚å› ä¸º mpvue åŸºäºASTï¼Œæ‰€ä»¥æœªæ¥å¯ä»¥æ”¯æŒæ”¯ä»˜å®å°ç¨‹åºå’Œå¿«åº”ç”¨ã€‚ä»–ä»¬ä¹Ÿæ˜¯æœ‰è¿™æ ·çš„è§„åˆ’ã€‚</p><p>è¯·åœ¨éœ€æ±‚æ± ä¸‹é¢è‡ªå·±æ‰¾</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/9/5/165a9cd96a15f056~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="mpvue-feature"></p><p><strong>å‘</strong> ä¸¤è€…éƒ½æœ‰å„è‡ªçš„å‘ã€‚ä½†æ˜¯æˆ‘è§‰å¾—æœ‰ä¸€äº›wepyçš„å‘æ˜¯æ²¡æ³•å®¹å¿çš„ã€‚æ¯”å¦‚<a href="https://link.juejin.cn/?target=https://github.com/Tencent/wepy/issues/1231">repeatç»„å»ºé‡Œé¢ç”¨computedå¾—åˆ°çš„åˆ—è¡¨å…¨æ˜¯åŒä¸€å¥—æ•°æ®</a>è€Œä¸”1.xæ˜¯æ²¡æ³•è§£å†³çš„ã€‚ wepyå’Œmpvueæˆ‘éƒ½å¼€å‘è¿‡å®Œæ•´å°ç¨‹åºçš„ä½“éªŒä¸‹ï¼Œæˆ‘è§‰å¾—wepyçš„å‘æ›´å¤šï¼Œè€Œä¸”wepyæœ‰äº›å‘ç¢äºæ¶æ„è®¾è®¡æ²¡åŠæ³•è§£å†³ã€‚</p><h1 id="mpvue"><a href="#mpvue" class="headerlink" title="mpvue"></a>mpvue</h1><blockquote><p>Vue.js å°ç¨‹åºç‰ˆ, fork è‡ª vuejs&#x2F;<a href="mailto:&#118;&#117;&#x65;&#x40;&#x32;&#46;&#x34;&#46;&#x31;">&#118;&#117;&#x65;&#x40;&#x32;&#46;&#x34;&#46;&#x31;</a>ï¼Œä¿ç•™äº† vue runtime èƒ½åŠ›ï¼Œæ·»åŠ äº†å°ç¨‹åºå¹³å°çš„æ”¯æŒã€‚ <code>mpvue</code> æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>Vue.js</code> å¼€å‘å°ç¨‹åºçš„å‰ç«¯æ¡†æ¶ã€‚æ¡†æ¶åŸºäº <code>Vue.js</code> æ ¸å¿ƒï¼Œ<code>mpvue</code> ä¿®æ”¹äº† <code>Vue.js</code> çš„ runtime å’Œ compiler å®ç°ï¼Œä½¿å…¶å¯ä»¥è¿è¡Œåœ¨å°ç¨‹åºç¯å¢ƒä¸­ï¼Œä»è€Œä¸ºå°ç¨‹åºå¼€å‘å¼•å…¥äº†æ•´å¥— <code>Vue.js</code> å¼€å‘ä½“éªŒã€‚</p></blockquote><h2 id="æ¡†æ¶åŸç†"><a href="#æ¡†æ¶åŸç†" class="headerlink" title="æ¡†æ¶åŸç†"></a>æ¡†æ¶åŸç†</h2><p><strong>ä¸¤ä¸ªå¤§æ–¹å‘</strong></p><ul><li>é€šè¿‡<code>mpvue</code>æä¾› mp çš„ runtime é€‚é…å°ç¨‹åº</li><li>é€šè¿‡<code>mpvue-loader</code>äº§å‡ºå¾®ä¿¡å°ç¨‹åºæ‰€éœ€è¦çš„æ–‡ä»¶ç»“æ„å’Œæ¨¡å—å†…å®¹ã€‚</li></ul><p><strong>ä¸ƒä¸ªå…·ä½“é—®é¢˜</strong></p><p>è¦äº†è§£ mpvue åŸç†å¿…ç„¶è¦äº†è§£ Vue åŸç†ï¼Œè¿™æ˜¯å¤§å‰æã€‚ä½†æ˜¯è¦è®²æ¸…æ¥š Vue åŸç†éœ€è¦èŠ±è´¹å¤§é‡çš„ç¯‡å¹…ï¼Œä¸å¦‚å‚è€ƒ<a href="https://link.juejin.cn/?target=https://github.com/answershuto/learnVue">learnVue</a>ã€‚</p><p>ç°åœ¨å‡è®¾æ‚¨å¯¹ Vue åŸç†æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚</p><p>ç”±äº Vue ä½¿ç”¨äº† Virtual DOMï¼Œæ‰€ä»¥ Virtual DOM å¯ä»¥åœ¨ä»»ä½•æ”¯æŒ JavaScript è¯­è¨€çš„å¹³å°ä¸Šæ“ä½œï¼Œè­¬å¦‚è¯´ç›®å‰ Vue æ”¯æŒæµè§ˆå™¨å¹³å°æˆ– weexï¼Œä¹Ÿå¯ä»¥æ˜¯ mp(å°ç¨‹åº)ã€‚é‚£ä¹ˆæœ€å Virtual DOM å¦‚ä½•æ˜ å°„åˆ°çœŸå®çš„ DOM èŠ‚ç‚¹ä¸Šå‘¢ï¼Ÿvueä¸ºå¹³å°åšäº†ä¸€å±‚é€‚é…å±‚ï¼Œæµè§ˆå™¨å¹³å°è§ <a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/web/runtime/node-ops.js">runtime&#x2F;node-ops.js</a>ã€weexå¹³å°è§<a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/weex/runtime/node-ops.js">runtime&#x2F;node-ops.js</a>ï¼Œå°ç¨‹åºè§<a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/node-ops.js">runtime&#x2F;node-ops.js</a>ã€‚ä¸åŒå¹³å°ä¹‹é—´é€šè¿‡é€‚é…å±‚å¯¹å¤–æä¾›ç›¸åŒçš„æ¥å£ï¼ŒVirtual DOMè¿›è¡Œæ“ä½œReal DOMèŠ‚ç‚¹çš„æ—¶å€™ï¼Œåªéœ€è¦è°ƒç”¨è¿™äº›é€‚é…å±‚çš„æ¥å£å³å¯ï¼Œè€Œå†…éƒ¨å®ç°åˆ™ä¸éœ€è¦å…³å¿ƒï¼Œå®ƒä¼šæ ¹æ®å¹³å°çš„æ”¹å˜è€Œæ”¹å˜ã€‚</p><p>æ‰€ä»¥æ€è·¯è‚¯å®šæ˜¯å¾€å¢åŠ ä¸€ä¸ª mp å¹³å°çš„ runtime æ–¹å‘èµ°ã€‚ä½†é—®é¢˜æ˜¯å°ç¨‹åºä¸èƒ½æ“ä½œ DOMï¼Œæ‰€ä»¥ mp ä¸‹çš„<code>node-ops.js</code> é‡Œé¢çš„å®ç°éƒ½æ˜¯ç›´æ¥ <code>return obj</code>ã€‚</p><p>æ–° Virtual DOM å’Œæ—§ Virtual DOM ä¹‹é—´éœ€è¦åšä¸€ä¸ª patchï¼Œæ‰¾å‡º diffã€‚patchå®Œäº†ä¹‹åçš„ diff æ€ä¹ˆæ›´æ–°è§†å›¾ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç»™è¿™äº› DOM åŠ å…¥ attrã€classã€style ç­‰ DOM å±æ€§å‘¢ï¼Ÿ Vue ä¸­æœ‰ nextTick çš„æ¦‚å¿µç”¨ä»¥æ›´æ–°è§†å›¾ï¼Œmpvueè¿™å—å¯¹äºå°ç¨‹åºçš„ <code>setData</code> åº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>å¦å¤–ä¸ªé—®é¢˜åœ¨äºå°ç¨‹åºçš„ Virtual DOM æ€ä¹ˆç”Ÿæˆï¼Ÿä¹Ÿå°±æ˜¯æ€ä¹ˆå°† template ç¼–è¯‘æˆ<code>render function</code>ã€‚è¿™å½“ä¸­è¿˜æ¶‰åŠåˆ°<a href="https://link.juejin.cn/?target=https://cn.vuejs.org/v2/guide/installation.html%23%E8%BF%90%E8%A1%8C%E6%97%B6-%E7%BC%96%E8%AF%91%E5%99%A8-vs-%E5%8F%AA%E5%8C%85%E5%90%AB%E8%BF%90%E8%A1%8C%E6%97%B6">è¿è¡Œæ—¶-ç¼–è¯‘å™¨-vs-åªåŒ…å«è¿è¡Œæ—¶</a>ï¼Œæ˜¾ç„¶å¦‚æœè¦æé«˜æ€§èƒ½ã€å‡å°‘åŒ…å¤§å°ã€è¾“å‡º wxmlã€mpvue ä¹Ÿè¦æä¾›é¢„ç¼–è¯‘çš„èƒ½åŠ›ã€‚å› ä¸ºè¦é¢„è¾“å‡º wxml ä¸”æ²¡æ³•åŠ¨æ€æ”¹å˜ DOMï¼Œæ‰€ä»¥åŠ¨æ€ç»„ä»¶ï¼Œè‡ªå®šä¹‰ renderï¼Œå’Œ<code>&lt;script type=&quot;text/x-template&quot;&gt;</code> å­—ç¬¦ä¸²æ¨¡ç‰ˆç­‰éƒ½ä¸æ”¯æŒ(<a href="https://link.juejin.cn/?target=http://mpvue.com/mpvue/%23_15">å‚è€ƒ</a>)ã€‚</p><p>å¦å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–é—®é¢˜ï¼Œæœ€åæ€»ç»“ä¸€ä¸‹</p><ul><li>1.å¦‚ä½•é¢„ç¼–è¯‘ç”Ÿæˆ<code>render function</code></li><li>2.å¦‚ä½•é¢„ç¼–è¯‘ç”Ÿæˆ wxmlï¼Œwxssï¼Œwxs</li><li>3.å¦‚ä½• patch å‡º diff</li><li>4.å¦‚ä½•æ›´æ–°è§†å›¾</li><li>5.å¦‚ä½•å»ºç«‹å°ç¨‹åºäº‹ä»¶ä»£ç†æœºåˆ¶ï¼Œåœ¨äº‹ä»¶ä»£ç†å‡½æ•°ä¸­è§¦å‘ä¸ä¹‹å¯¹åº”çš„vueç»„ä»¶äº‹ä»¶å“åº”</li><li>6.å¦‚ä½•å»ºç«‹vueå®ä¾‹ä¸å°ç¨‹åº Page å®ä¾‹å…³è”</li><li>7.å¦‚ä½•å»ºç«‹å°ç¨‹åºå’Œvueç”Ÿå‘½å‘¨æœŸæ˜ å°„å…³ç³»ï¼Œèƒ½åœ¨å°ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­è§¦å‘vueç”Ÿå‘½å‘¨æœŸ</li></ul><p><strong><a href="https://link.juejin.cn/?target=">platform&#x2F;mpçš„ç›®å½•ç»“æ„</a></strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç .</span><br><span class="line">â”œâ”€â”€ compiler <span class="regexp">//</span>è§£å†³é—®é¢˜<span class="number">1</span>ï¼Œmpvue-template-compileræºç éƒ¨åˆ†</span><br><span class="line">â”œâ”€â”€ runtime <span class="regexp">//</span>è§£å†³é—®é¢˜<span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span></span><br><span class="line">â”œâ”€â”€ util <span class="regexp">//</span>å·¥å…·æ–¹æ³•</span><br><span class="line">â”œâ”€â”€ entry-compiler.js <span class="regexp">//m</span>pvue-template-compilerçš„å…¥å£ã€‚package.jsonç›¸å…³å‘½ä»¤ä¼šè‡ªåŠ¨ç”Ÿæˆmpvue-template-compilerè¿™ä¸ªpackageã€‚</span><br><span class="line">â”œâ”€â”€ entry-runtime.js <span class="regexp">//</span>å¯¹å¤–æä¾›Vueå¯¹è±¡ï¼Œå½“ç„¶æ˜¯mpvue</span><br><span class="line">â””â”€â”€ join-code-<span class="keyword">in</span>-build.js <span class="regexp">//</span>ç¼–è¯‘å‡ºSDKæ—¶çš„ä¿®å¤</span><br></pre></td></tr></table></figure><p><strong>åé¢çš„å†…å®¹é€æ­¥è§£ç­”è¿™å‡ ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±å¼„æ˜ç™½äº†åŸç†</strong></p><h3 id="mpvue-loader"><a href="#mpvue-loader" class="headerlink" title="mpvue-loader"></a>mpvue-loader</h3><p><a href="https://link.juejin.cn/?target=https://github.com/mpvue/mpvue-loader">mpvue-loader</a> æ˜¯ <a href="https://link.juejin.cn/?target=https://github.com/vuejs/vue-loader">vue-loader</a> çš„ä¸€ä¸ªæ‰©å±•å»¶ä¼¸ç‰ˆï¼Œç±»ä¼¼äºè¶…é›†çš„å…³ç³»ï¼Œé™¤äº†<a href="https://link.juejin.cn/?target=https://github.com/vuejs/vue-loader">vue-loader</a> æœ¬èº«æ‰€å…·å¤‡çš„èƒ½åŠ›ä¹‹å¤–ï¼Œå®ƒè¿˜ä¼šåˆ©ç”¨<a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/tree/master/packages/mpvue-template-compiler">mpvue-template-compiler</a>ç”Ÿæˆ<code>render function</code>ã€‚</p><ul><li>entry</li></ul><p>å®ƒä¼šä» <code>webpack</code> çš„é…ç½®ä¸­çš„ entry å¼€å§‹ï¼Œåˆ†æä¾èµ–æ¨¡å—ï¼Œå¹¶åˆ†åˆ«æ‰“åŒ…ã€‚åœ¨entry ä¸­ app å±æ€§åŠå…¶å†…å®¹ä¼šè¢«æ‰“åŒ…ä¸ºå¾®ä¿¡å°ç¨‹åºæ‰€éœ€è¦çš„ app.jsï¼app.jsonï¼app.wxssï¼Œå…¶ä½™çš„ä¼šç”Ÿæˆå¯¹åº”çš„é¡µé¢page.js&#x2F;page.json&#x2F;page.wxml&#x2F;page.wxssï¼Œå¦‚ç¤ºä¾‹çš„ entry å°†ä¼šç”Ÿæˆå¦‚ä¸‹è¿™äº›æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸‹æ–‡æ…¢æ…¢è®²æ¥ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">styluså¤åˆ¶ä»£ç <span class="comment">// webpack.config.js</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        app: <span class="built_in">resolve</span>(<span class="string">&#x27;./src/main.js&#x27;</span>),               <span class="comment">// app å­—æ®µè¢«è¯†åˆ«ä¸º app ç±»å‹</span></span><br><span class="line">        index: <span class="built_in">resolve</span>(<span class="string">&#x27;./src/pages/index/main.js&#x27;</span>),   <span class="comment">// å…¶ä½™å­—æ®µè¢«è¯†åˆ«ä¸º page ç±»å‹</span></span><br><span class="line">        <span class="string">&#x27;news/home&#x27;</span>: <span class="built_in">resolve</span>(<span class="string">&#x27;./src/pages/news/home/index.js&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº§å‡ºæ–‡ä»¶çš„ç»“æ„</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ app<span class="selector-class">.js</span></span><br><span class="line">â”œâ”€â”€ app<span class="selector-class">.json</span></span><br><span class="line">â”œâ”€â”€Â· app<span class="selector-class">.wxss</span></span><br><span class="line">â”œâ”€â”€ components</span><br><span class="line">â”‚   â”œâ”€â”€ card$<span class="number">74</span>bfae61<span class="selector-class">.wxml</span></span><br><span class="line">â”‚   â”œâ”€â”€ index$<span class="number">023</span>eef02<span class="selector-class">.wxml</span></span><br><span class="line">â”‚   â””â”€â”€ news$<span class="number">0699930</span>b<span class="selector-class">.wxml</span></span><br><span class="line">â”œâ”€â”€ news</span><br><span class="line">â”‚   â”œâ”€â”€ home<span class="selector-class">.js</span></span><br><span class="line">â”‚   â”œâ”€â”€ home<span class="selector-class">.wxml</span></span><br><span class="line">â”‚   â””â”€â”€ home<span class="selector-class">.wxss</span></span><br><span class="line">â”œâ”€â”€ pages</span><br><span class="line">â”‚   â””â”€â”€ index</span><br><span class="line">â”‚       â”œâ”€â”€ index<span class="selector-class">.js</span></span><br><span class="line">â”‚       â”œâ”€â”€ index<span class="selector-class">.wxml</span></span><br><span class="line">â”‚       â””â”€â”€ index<span class="selector-class">.wxss</span></span><br><span class="line">â””â”€â”€ static</span><br><span class="line">    â”œâ”€â”€ css</span><br><span class="line">    â”‚   â”œâ”€â”€ app<span class="selector-class">.wxss</span></span><br><span class="line">    â”‚   â”œâ”€â”€ index<span class="selector-class">.wxss</span></span><br><span class="line">    â”‚   â””â”€â”€ news</span><br><span class="line">    â”‚       â””â”€â”€ home<span class="selector-class">.wxss</span></span><br><span class="line">    â””â”€â”€ js</span><br><span class="line">        â”œâ”€â”€ app<span class="selector-class">.js</span></span><br><span class="line">        â”œâ”€â”€ index<span class="selector-class">.js</span></span><br><span class="line">        â”œâ”€â”€ manifest<span class="selector-class">.js</span></span><br><span class="line">        â”œâ”€â”€ news</span><br><span class="line">        â”‚   â””â”€â”€ home<span class="selector-class">.js</span></span><br><span class="line">        â””â”€â”€ vendor.js</span><br></pre></td></tr></table></figure><ul><li>wxml æ¯ä¸€ä¸ª <code>.vue</code> çš„ç»„ä»¶éƒ½ä¼šè¢«ç”Ÿæˆä¸ºä¸€ä¸ª wxml è§„èŒƒçš„ templateï¼Œç„¶åé€šè¿‡ wxml è§„èŒƒçš„ import è¯­æ³•æ¥è¾¾åˆ°ä¸€ä¸ªå¤ç”¨ï¼ŒåŒæ—¶ç»„ä»¶å¦‚æœæ¶‰åŠåˆ° props çš„ data æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåšç›¸åº”çš„å¤„ç†ï¼Œä¸¾ä¸ªå®é™…çš„ä¾‹å­ï¼š</li></ul><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">handlebarså¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;my-component&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">msg</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">other-component</span> <span class="attr">:msg</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">other-component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> otherComponent <span class="keyword">from</span> <span class="string">&#x27;./otherComponent.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123; otherComponent &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123; <span class="attr">msg</span>: <span class="string">&#x27;Hello Vue.js!&#x27;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">test</span>(<span class="params"></span>) &#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ª Vue çš„ç»„ä»¶çš„æ¨¡ç‰ˆéƒ¨åˆ†ä¼šç”Ÿæˆç›¸åº”çš„ wxml</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">handlebarså¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">&quot;components/other-component$hash.wxml&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;component$hash&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-component&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleProxy&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;_h1&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">msg</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;other-component$hash&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123; <span class="name">$c</span>[0] &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span> <span class="attr">data</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123; ..<span class="name">.$c</span>[0] &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å¯èƒ½å·²ç»æ³¨æ„åˆ°äº† other-component(:msg&#x3D;â€msgâ€) è¢«è½¬åŒ–æˆäº†  ã€‚mpvue åœ¨è¿è¡Œæ—¶ä¼šä»æ ¹ç»„ä»¶å¼€å§‹æŠŠæ‰€æœ‰çš„ç»„ä»¶å®ä¾‹æ•°æ®åˆå¹¶æˆä¸€ä¸ªæ ‘å½¢çš„æ•°æ®ï¼Œç„¶åé€šè¿‡ setData åˆ° appData,<code>$c</code>æ˜¯ $children çš„ç¼©å†™ã€‚è‡³äºé‚£ä¸ª 0 åˆ™æ˜¯æˆ‘ä»¬çš„ compiler å¤„ç†è¿‡åçš„ä¸€ä¸ªæ ‡è®°ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªå­ç»„ä»¶æ‰“ä¸€ä¸ªç‰¹å®šçš„ä¸é‡å¤çš„æ ‡è®°ã€‚ æ ‘å½¢æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç <span class="regexp">//</span> è¿™å„¿æ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œindex æ˜¯åŠ¨æ€çš„</span><br><span class="line">&#123;</span><br><span class="line">  <span class="variable">$child</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span>&#123;</span><br><span class="line">      <span class="regexp">//</span> ... root data</span><br><span class="line">      <span class="variable">$child</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;0&#x27;</span>: &#123;</span><br><span class="line">          <span class="regexp">//</span> ... data</span><br><span class="line">          msg: <span class="string">&#x27;Hello Vue.js!&#x27;</span>,</span><br><span class="line">          <span class="variable">$child</span>: &#123;</span><br><span class="line">            <span class="regexp">//</span> ...data</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>wxss</li></ul><p>è¿™ä¸ªéƒ¨åˆ†çš„å¤„ç†åŒ web çš„å¤„ç†å·®å¼‚ä¸å¤§ï¼Œå”¯ä¸€ä¸åŒåœ¨äºé€šè¿‡é…ç½®ç”Ÿæˆ .css ä¸º .wxss ï¼Œå…¶ä¸­çš„å¯¹äº css çš„è‹¥å¹²å¤„ç†ï¼Œåœ¨ postcss-mpvue-wxss å’Œ px2rpx-loader è¿™ä¸¤éƒ¨åˆ†çš„æ–‡æ¡£ä¸­åˆè¯¦ç»†çš„ä»‹ç»ã€‚</p><p>app.jsonï¼page.json 1.1.1 ä»¥ä¸Š</p><p>æ¨èå’Œå°ç¨‹åºä¸€æ ·ï¼Œå°† app.jsonï¼page.json æ”¾åˆ°é¡µé¢å…¥å£å¤„ï¼Œä½¿ç”¨ copy-webpack-plugin copy åˆ°å¯¹åº”çš„ç”Ÿæˆä½ç½®ã€‚</p><p>1.1.1 ä»¥ä¸‹</p><p>è¿™éƒ¨åˆ†å†…å®¹æ¥æºäº app å’Œ page çš„ entry æ–‡ä»¶ï¼Œé€šå¸¸ä¹ æƒ¯æ˜¯ main.jsï¼Œä½ éœ€è¦åœ¨ä½ çš„å…¥å£æ–‡ä»¶ä¸­ export default { config: {} }ï¼Œè¿™æ‰èƒ½è¢«æˆ‘ä»¬çš„ loader è¯†åˆ«ä¸ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ï¼Œéœ€è¦å†™æˆ json æ–‡ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç <span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./app&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vueApp = <span class="keyword">new</span> <span class="title class_">Vue</span>(<span class="title class_">App</span>);</span><br><span class="line">vueApp.$mount();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ˜¯æˆ‘ä»¬çº¦å®šçš„é¢å¤–çš„é…ç½®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªå­—æ®µä¸‹çš„æ•°æ®ä¼šè¢«å¡«å……åˆ° app.json ï¼ page.json</span></span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">pages</span>: [<span class="string">&#x27;static/calendar/calendar&#x27;</span>, <span class="string">&#x27;^pages/list/list&#x27;</span>], <span class="comment">// Will be filled in webpack</span></span><br><span class="line">        <span class="attr">window</span>: &#123;</span><br><span class="line">            <span class="attr">backgroundTextStyle</span>: <span class="string">&#x27;light&#x27;</span>,</span><br><span class="line">            <span class="attr">navigationBarBackgroundColor</span>: <span class="string">&#x27;#455A73&#x27;</span>,</span><br><span class="line">            <span class="attr">navigationBarTitleText</span>: <span class="string">&#x27;ç¾å›¢æ±½è½¦ç¥¨&#x27;</span>,</span><br><span class="line">            <span class="attr">navigationBarTextStyle</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ ¹æ® entry çš„é¡µé¢æ•°æ®ï¼Œè‡ªåŠ¨å¡«å……åˆ° app.json ä¸­çš„ pages å­—æ®µã€‚ pages å­—æ®µä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œçº¦å®šå¸¦æœ‰ ^ ç¬¦å·å¼€å¤´çš„é¡µé¢ï¼Œä¼šæ”¾åˆ°æ•°ç»„çš„æœ€å‰é¢ã€‚</p><p>style scoped åœ¨ vue-loader ä¸­å¯¹ style scoped çš„å¤„ç†æ–¹å¼æ˜¯ç»™æ¯ä¸ªæ ·å¼åŠ ä¸€ä¸ª attr æ¥æ ‡è®° module-idï¼Œç„¶ååœ¨ css ä¸­ä¹Ÿç»™æ¯æ¡ rule åæ·»åŠ  [module-id]ï¼Œæœ€ç»ˆå¯ä»¥å½¢æˆä¸€ä¸ª css çš„â€œä½œç”¨åŸŸç©ºé—´â€ã€‚</p><p>åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ç›®å‰æ˜¯ä¸æ”¯æŒ attr é€‰æ‹©å™¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åšäº†ä¸€ç‚¹æ”¹åŠ¨ï¼ŒæŠŠ attr ä¸Šçš„ [module-id] ç›´æ¥å†™åˆ°äº† class é‡Œï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">xmlå¤åˆ¶ä»£ç <span class="comment">&lt;!-- .vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        // ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- vue-loader --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">data-v-23e58823</span>&gt;</span></span><br><span class="line">        // ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span><span class="selector-attr">[data-v-23e58823]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- mpvue-loader --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container data-v-23e58823&quot;</span>&gt;</span></span><br><span class="line">        // ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span><span class="selector-class">.data-v-23e58823</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>compiler</li></ul><p>ç”Ÿäº§å‡ºçš„å†…å®¹æ˜¯ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç (<span class="keyword">function</span>(module, __webpack_exports__, __webpack_require__) &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="regexp">//</span> mpvue-template-compilerä¼šåˆ©ç”¨ASTé¢„ç¼–è¯‘ç”Ÿæˆä¸€ä¸ªrender <span class="keyword">function</span>ç”¨ä»¥ç”ŸæˆVirtual DOMã€‚</span><br><span class="line">var render = <span class="keyword">function</span> () &#123;var _vm=this;var _h=_vm.<span class="variable">$createElement</span>;var _c=_vm._self._c||_h;</span><br><span class="line">  <span class="regexp">//</span> _cåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ï¼Œå‚è€ƒhttps:<span class="regexp">//gi</span>thub.com<span class="regexp">/Meituan-Dianping/m</span>pvue<span class="regexp">/blob/m</span>aster<span class="regexp">/packages/m</span>pvue/index.js<span class="comment">#L3606</span></span><br><span class="line">  <span class="regexp">//</span> ä»¥åŠhttps:<span class="regexp">//gi</span>thub.com<span class="regexp">/Meituan-Dianping/m</span>pvue<span class="regexp">/blob/m</span>aster<span class="regexp">/packages/m</span>pvue/index.js<span class="comment">#L3680</span></span><br><span class="line">  return _c(<span class="string">&#x27;div&#x27;</span>, &#123;</span><br><span class="line">    staticClass: <span class="string">&quot;my-component&quot;</span></span><br><span class="line">  &#125;, [_c(<span class="string">&#x27;h1&#x27;</span>, [_vm._v(_vm._s(_vm.msg))]), _vm._v(<span class="string">&quot; &quot;</span>), _c(<span class="string">&#x27;other-component&#x27;</span>, &#123;</span><br><span class="line">    attrs: &#123;</span><br><span class="line">      <span class="string">&quot;msg&quot;</span>: _vm.msg,</span><br><span class="line">      <span class="string">&quot;mpcomid&quot;</span>: <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)], <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> staticRenderFnsçš„ä½œç”¨æ˜¯é™æ€æ¸²æŸ“ï¼Œåœ¨æ›´æ–°æ—¶ä¸ä¼šè¿›è¡Œpatchï¼Œä¼˜åŒ–æ€§èƒ½ã€‚è€ŒstaticRenderFnsæ˜¯ä¸ªç©ºæ•°ç»„ã€‚</span><br><span class="line">var staticRenderFns = []</span><br><span class="line">render._withStripped = true</span><br><span class="line">var esExports = &#123; render: render, staticRenderFns: staticRenderFns &#125;</span><br><span class="line"><span class="regexp">/* harmony default export */</span> __webpack_exports__[<span class="string">&quot;a&quot;</span>] = (esExports);</span><br><span class="line"><span class="keyword">if</span> (false) &#123;</span><br><span class="line">  module.hot.accept()</span><br><span class="line">  <span class="keyword">if</span> (module.hot.data) &#123;</span><br><span class="line">     require(<span class="string">&quot;vue-hot-reload-api&quot;</span>).rerender(<span class="string">&quot;data-v-54ad9125&quot;</span>, esExports)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">/***/</span> &#125;)</span><br></pre></td></tr></table></figure><h3 id="compiler"><a href="#compiler" class="headerlink" title="compiler"></a>compiler</h3><p>compilerç›¸å…³ï¼Œä¹Ÿå°±æ˜¯templateé¢„ç¼–è¯‘è¿™å—ï¼Œå¯ä»¥å‚è€ƒã€Š<a href="https://link.juejin.cn/?target=https://github.com/answershuto/learnVue/blob/master/docs/%E8%81%8A%E8%81%8AVue%E7%9A%84template%E7%BC%96%E8%AF%91.MarkDown%23createcompiler">èŠèŠVueçš„templateç¼–è¯‘</a>ã€‹æ¥ææ˜ç™½ã€‚åŸç†æ˜¯ä¸€æ ·çš„ã€‚</p><p>mpvueè‡ªå·±å®ç°äº†<code>export &#123; compile, compileToFunctions, compileToWxml &#125;</code>(<a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/compiler/index.js">é“¾æ¥</a>)å…¶ä¸­<code>compileToWxml</code>æ˜¯ç”¨æ¥ç”Ÿæˆwxmlï¼Œå…·ä½“ä»£ç <a href="https://link.juejin.cn/?target=https://github.com/mpvue/mpvue-loader/blob/master/lib/mp-compiler/index.js%23L30">åœ¨è¿™</a>ã€‚</p><p>å¦å¤–mpvueæ˜¯ä¸éœ€è¦æä¾›<a href="https://link.juejin.cn/?target=https://cn.vuejs.org/v2/guide/installation.html%23%E8%BF%90%E8%A1%8C%E6%97%B6-%E7%BC%96%E8%AF%91%E5%99%A8-vs-%E5%8F%AA%E5%8C%85%E5%90%AB%E8%BF%90%E8%A1%8C%E6%97%B6">è¿è¡Œæ—¶-ç¼–è¯‘å™¨</a>çš„ï¼Œè™½ç„¶ç†è®ºä¸Šæ˜¯èƒ½å¤Ÿåšåˆ°çš„ã€‚å› ä¸ºå°ç¨‹åºä¸èƒ½æ“ä½œDOMï¼Œå³ä¾¿æä¾›äº†è¿è¡Œæ—¶-ç¼–è¯‘å™¨ä¹Ÿäº§ç”Ÿä¸äº†ç•Œé¢ã€‚</p><p>è¯¦ç»†è®²è§£compileè¿‡ç¨‹ï¼š</p><p>1.å°†vueæ–‡ä»¶è§£ææˆæ¨¡æ¿å¯¹è±¡</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç <span class="regexp">//</span> mpvue-loader<span class="regexp">/lib/</span>loader.js</span><br><span class="line">var parts = parse(content, fileName, this.sourceMap)</span><br></pre></td></tr></table></figure><p>å‡å¦‚vueæ–‡ä»¶æºç å¦‚ä¸‹:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">xmlå¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container-bg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;home-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">home-quotation-view</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in lists&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:reason</span>=<span class="string">&quot;item.reason&quot;</span> <span class="attr">:stockList</span>=<span class="string">&quot;item.list&quot;</span> @<span class="attr">itemViewClicked</span>=<span class="string">&quot;itemViewClicked&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;js&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> homeQuotationView <span class="keyword">from</span> <span class="string">&#x27;@/components/homeQuotationView&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> topListApi <span class="keyword">from</span> <span class="string">&#x27;@/api/topListApi&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  data () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lists</span>: []</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    homeQuotationView</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> loadRankList () &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> topListApi.<span class="title function_">rankList</span>()</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">dateTime</span> = data.<span class="property">dt</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">lists</span> = data.<span class="property">rankList</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> !!item</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    itemViewClicked (quotationItem) &#123;</span></span><br><span class="line"><span class="language-javascript">      wx.<span class="title function_">navigateTo</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">`/pages/topListDetail/main?item=<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(quotationItem)&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  onShow () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">loadRankList</span>()</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;stylus&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.container-bg</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span> <span class="number">100%</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span> <span class="number">100%</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span> <span class="selector-id">#F2F4FA</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.home-container</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span> <span class="number">100%</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span> <span class="number">100%</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow-x</span> hidden</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è°ƒç”¨<code>parse(content, fileName, this.sourceMap)</code> å‡½æ•°å¾—åˆ°çš„ç»“æœå¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">taggerscriptå¤åˆ¶ä»£ç &#123;</span><br><span class="line">  template: &#123;</span><br><span class="line">    type: &#x27;template&#x27;,</span><br><span class="line">    content: &#x27;<span class="symbol">\n</span>&lt;view class=&quot;container-bg&quot;&gt;<span class="symbol">\n</span>  &lt;view class=&quot;home-container&quot;&gt;<span class="symbol">\n</span>    &lt;home-quotation-view v-for=&quot;(item, index) in lists&quot; :key=&quot;index&quot; :reason=&quot;item.reason&quot; :stockList=&quot;item.list&quot; @itemViewClicked=&quot;itemViewClicked&quot; /&gt;<span class="symbol">\n</span>  &lt;/view&gt;<span class="symbol">\n</span>&lt;/view&gt;<span class="symbol">\n</span>&#x27;,</span><br><span class="line">    start: 10,</span><br><span class="line">    attrs: &#123;&#125;,</span><br><span class="line">    end: 251</span><br><span class="line">  &#125;,</span><br><span class="line">  script: &#123;</span><br><span class="line">    type: &#x27;script&#x27;,</span><br><span class="line">    content: &#x27;<span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span>import homeQuotationView from \&#x27;@/components/homeQuotationView\&#x27;<span class="symbol">\n</span>import topListApi from \&#x27;@/api/topListApi\&#x27;<span class="symbol">\n</span><span class="symbol">\n</span>export default &#123;<span class="symbol">\n</span>  data () &#123;<span class="symbol">\n</span>    return &#123;<span class="symbol">\n</span>      lists: []<span class="symbol">\n</span>    &#125;<span class="symbol">\n</span>  &#125;,<span class="symbol">\n</span>  components: &#123;<span class="symbol">\n</span>    homeQuotationView<span class="symbol">\n</span>  &#125;,<span class="symbol">\n</span>  methods: &#123;<span class="symbol">\n</span>    async loadRankList () &#123;<span class="symbol">\n</span>      let &#123;data&#125; = await topListApi.rankList()<span class="symbol">\n</span>      if (data) &#123;<span class="symbol">\n</span>        this.dateTime = data.dt<span class="symbol">\n</span>        this.lists = data.rankList.filter((item) =&gt; &#123;<span class="symbol">\n</span>          return !!item<span class="symbol">\n</span>        &#125;)<span class="symbol">\n</span>      &#125;<span class="symbol">\n</span>    &#125;,<span class="symbol">\n</span>    itemViewClicked (quotationItem) &#123;<span class="symbol">\n</span>      wx.navigateTo(&#123;<span class="symbol">\n</span>        url: `/pages/topListDetail/main?item=$&#123;JSON.stringify(quotationItem)&#125;`<span class="symbol">\n</span>      &#125;)<span class="symbol">\n</span>    &#125;<span class="symbol">\n</span>  &#125;,<span class="symbol">\n</span>  onShow () &#123;<span class="symbol">\n</span>    this.loadRankList()<span class="symbol">\n</span>  &#125;<span class="symbol">\n</span>&#125;<span class="symbol">\n</span>&#x27;,</span><br><span class="line">    start: 282,</span><br><span class="line">    attrs: &#123;</span><br><span class="line">      lang: &#x27;js&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    lang: &#x27;js&#x27;,</span><br><span class="line">    end: 946,</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  styles: [&#123;</span><br><span class="line">    type: &#x27;style&#x27;,</span><br><span class="line">    content: &#x27;<span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span>.container-bg<span class="symbol">\n</span>  width 100%<span class="symbol">\n</span>  height 100%<span class="symbol">\n</span>  background-color #F2F4FA<span class="symbol">\n</span><span class="symbol">\n</span>.home-container<span class="symbol">\n</span>  width 100%<span class="symbol">\n</span>  height 100%<span class="symbol">\n</span>  overflow-x hidden<span class="symbol">\n</span><span class="symbol">\n</span>&#x27;,</span><br><span class="line">    start: 985,</span><br><span class="line">    attrs: [Object],</span><br><span class="line">    lang: &#x27;stylus&#x27;,</span><br><span class="line">    scoped: true,</span><br><span class="line">    end: 1135,</span><br><span class="line">    ...</span><br><span class="line">  &#125;],</span><br><span class="line">  customBlocks: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.è°ƒç”¨mpvue-loader&#x2F;lib&#x2F;template-compiler&#x2F;index.jså¯¼å‡ºçš„æ¥å£å¹¶ä¼ å…¥ä¸Šé¢å¾—åˆ°çš„htmlæ¨¡æ¿ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dartå¤åˆ¶ä»£ç <span class="keyword">var</span> templateCompilerPath = normalize.lib(<span class="string">&#x27;template-compiler/index&#x27;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="keyword">var</span> defaultLoaders = &#123;</span><br><span class="line">  html: templateCompilerPath + templateCompilerOptions,</span><br><span class="line">  css: options.extractCSS</span><br><span class="line">    ? getCSSExtractLoader()</span><br><span class="line">    : styleLoaderPath + <span class="string">&#x27;!&#x27;</span> + <span class="string">&#x27;css-loader&#x27;</span> + cssLoaderOptions,</span><br><span class="line">  js: hasBuble ? (<span class="string">&#x27;buble-loader&#x27;</span> + bubleOptions) : hasBabel ? babelLoaderOptions : <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// check if there are custom loaders specified via</span></span><br><span class="line"><span class="comment">// webpack config, otherwise use defaults</span></span><br><span class="line"><span class="keyword">var</span> loaders = <span class="built_in">Object</span>.assign(&#123;&#125;, defaultLoaders, options.loaders)</span><br></pre></td></tr></table></figure><ol><li>è°ƒç”¨mpvue&#x2F;packages&#x2F;mpvue-template-compiler&#x2F;build.jsçš„compileæ¥å£ï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç <span class="regexp">//</span> mpvue-loader<span class="regexp">/lib/</span>template-compiler/index.js</span><br><span class="line">var compiled = compile(html, compilerOptions)</span><br></pre></td></tr></table></figure><p>compileæ–¹æ³•ç”Ÿäº§ä¸‹é¢çš„ast(Abstract Syntax Tree)æ¨¡æ¿ï¼Œrenderå‡½æ•°å’ŒstaticRenderFns</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">yamlå¤åˆ¶ä»£ç &#123;</span></span><br><span class="line">  <span class="attr">ast:</span> &#123;</span><br><span class="line">    <span class="attr">type:</span> <span class="number">1</span>,</span><br><span class="line">    <span class="attr">tag:</span> <span class="string">&#x27;view&#x27;</span>,</span><br><span class="line">    <span class="attr">attrsList:</span> [],</span><br><span class="line">    <span class="attr">attrsMap:</span> &#123;</span><br><span class="line">      <span class="attr">class:</span> <span class="string">&#x27;container-bg&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parent:</span> <span class="string">undefined</span>,</span><br><span class="line">    <span class="attr">children:</span> [&#123;</span><br><span class="line">      <span class="attr">type:</span> <span class="number">1</span>,</span><br><span class="line">      <span class="attr">tag:</span> <span class="string">&#x27;view&#x27;</span>,</span><br><span class="line">      <span class="attr">attrsList:</span> [],</span><br><span class="line">      <span class="attr">attrsMap:</span> &#123;</span><br><span class="line">        <span class="attr">class:</span> <span class="string">&#x27;home-container&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">parent:</span> &#123;</span><br><span class="line">        <span class="attr">type:</span> <span class="number">1</span>,</span><br><span class="line">        <span class="attr">tag:</span> <span class="string">&#x27;view&#x27;</span>,</span><br><span class="line">        <span class="attr">attrsList:</span> [],</span><br><span class="line">        <span class="attr">attrsMap:</span> &#123;</span><br><span class="line">          <span class="attr">class:</span> <span class="string">&#x27;container-bg&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">parent:</span> <span class="string">undefined</span>,</span><br><span class="line">        <span class="attr">children:</span> [</span><br><span class="line">          [<span class="string">Circular</span>]</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">plain:</span> <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">staticClass:</span> <span class="string">&#x27;&quot;container-bg&quot;&#x27;</span>,</span><br><span class="line">        <span class="attr">static:</span> <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">staticRoot:</span> <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">children:</span> [&#123;</span><br><span class="line">        <span class="attr">type:</span> <span class="number">1</span>,</span><br><span class="line">        <span class="attr">tag:</span> <span class="string">&#x27;home-quotation-view&#x27;</span>,</span><br><span class="line">        <span class="attr">attrsList:</span> [&#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;:reason&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;item.reason&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;:stockList&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;item.list&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;@itemViewClicked&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;itemViewClicked&#x27;</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">attrsMap:</span> &#123;</span><br><span class="line">          <span class="attr">&#x27;v-for&#x27;:</span> <span class="string">&#x27;(item, index) in lists&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;:key&#x27;</span><span class="string">:</span> <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;:reason&#x27;</span><span class="string">:</span> <span class="string">&#x27;item.reason&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;:stockList&#x27;</span><span class="string">:</span> <span class="string">&#x27;item.list&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;@itemViewClicked&#x27;</span><span class="string">:</span> <span class="string">&#x27;itemViewClicked&#x27;</span>,</span><br><span class="line">          <span class="attr">&#x27;data-eventid&#x27;:</span> <span class="string">&#x27;<span class="template-variable">&#123;&#123;\&#x27;0-\&#x27;+index&#125;&#125;</span>&#x27;</span>,</span><br><span class="line">          <span class="attr">&#x27;data-comkey&#x27;:</span> <span class="string">&#x27;<span class="template-variable">&#123;&#123;$k&#125;&#125;</span>&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">parent:</span> [<span class="string">Circular</span>],</span><br><span class="line">        <span class="attr">children:</span> [],</span><br><span class="line">        <span class="attr">for:</span> <span class="string">&#x27;lists&#x27;</span>,</span><br><span class="line">        <span class="attr">alias:</span> <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">        <span class="attr">iterator1:</span> <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">        <span class="attr">key:</span> <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">        <span class="attr">plain:</span> <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">hasBindings:</span> <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">attrs:</span> [&#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;reason&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;item.reason&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;stockList&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;item.list&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;eventid&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;\&#x27;0-\&#x27;+index&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;mpcomid&#x27;</span>,</span><br><span class="line">          <span class="attr">value:</span> <span class="string">&#x27;\&#x27;0-\&#x27;+index&#x27;</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">events:</span> &#123;</span><br><span class="line">          <span class="attr">itemViewClicked:</span> &#123;</span><br><span class="line">            <span class="attr">value:</span> <span class="string">&#x27;itemViewClicked&#x27;</span>,</span><br><span class="line">            <span class="attr">modifiers:</span> <span class="string">undefined</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">eventid:</span> <span class="string">&#x27;\&#x27;0-\&#x27;+index&#x27;</span>,</span><br><span class="line">        <span class="attr">mpcomid:</span> <span class="string">&#x27;\&#x27;0-\&#x27;+index&#x27;</span>,</span><br><span class="line">        <span class="attr">static:</span> <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">staticRoot:</span> <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">forProcessed:</span> <span class="literal">true</span></span><br><span class="line">      &#125;],</span><br><span class="line">      <span class="attr">plain:</span> <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">staticClass:</span> <span class="string">&#x27;&quot;home-container&quot;&#x27;</span>,</span><br><span class="line">      <span class="attr">static:</span> <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">staticRoot:</span> <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="attr">plain:</span> <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">staticClass:</span> <span class="string">&#x27;&quot;container-bg&quot;&#x27;</span>,</span><br><span class="line">    <span class="attr">static:</span> <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">staticRoot:</span> <span class="literal">false</span></span><br><span class="line">  &#125;<span class="string">,</span></span><br><span class="line">  <span class="attr">render:</span> <span class="string">&#x27;with(this)&#123;return _c(\&#x27;view\&#x27;,&#123;staticClass:&quot;container-bg&quot;&#125;,[_c(\&#x27;view\&#x27;,&#123;staticClass:&quot;home-container&quot;&#125;,_l((lists),function(item,index)&#123;return _c(\&#x27;home-quotation-view\&#x27;,&#123;key:index,attrs:&#123;&quot;reason&quot;:item.reason,&quot;stockList&quot;:item.list,&quot;eventid&quot;:\&#x27;0-\&#x27;+index,&quot;mpcomid&quot;:\&#x27;0-\&#x27;+index&#125;,on:&#123;&quot;itemViewClicked&quot;:itemViewClicked&#125;&#125;)&#125;))])&#125;&#x27;</span><span class="string">,</span></span><br><span class="line">  <span class="attr">staticRenderFns:</span> []<span class="string">,</span></span><br><span class="line">  <span class="attr">errors:</span> []<span class="string">,</span></span><br><span class="line">  <span class="attr">tips:</span> []</span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„renderå‡½æ•°è¿è¡Œçš„ç»“æœæ˜¯è¿”å›<code>VNode</code>å¯¹è±¡ï¼Œå…¶å®<code>render</code>å‡½æ•°åº”è¯¥é•¿ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">schemeå¤åˆ¶ä»£ç (<span class="name">function</span>() &#123;</span><br><span class="line">  with(<span class="name">this</span>)&#123;</span><br><span class="line">    return _c(<span class="symbol">&#x27;div</span>&#x27;,&#123;   //åˆ›å»ºä¸€ä¸ª div å…ƒç´ </span><br><span class="line">      attrs:&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;app&quot;</span>&#125;  //div æ·»åŠ å±æ€§ id</span><br><span class="line">      &#125;,[</span><br><span class="line">        _m(<span class="name">0</span>),  //é™æ€èŠ‚ç‚¹ headerï¼Œæ­¤å¤„å¯¹åº” staticRenderFns æ•°ç»„ç´¢å¼•ä¸º <span class="number">0</span> çš„ render å‡½æ•°</span><br><span class="line">        _v(<span class="string">&quot; &quot;</span>), //ç©ºçš„æ–‡æœ¬èŠ‚ç‚¹</span><br><span class="line">        (<span class="name">message</span>) //ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œåˆ¤æ–­ message æ˜¯å¦å­˜åœ¨</span><br><span class="line">         //å¦‚æœå­˜åœ¨ï¼Œåˆ›å»º p å…ƒç´ ï¼Œå…ƒç´ é‡Œé¢æœ‰æ–‡æœ¬ï¼Œå€¼ä¸º toString(<span class="name">message</span>)</span><br><span class="line">        ?_c(<span class="symbol">&#x27;p</span>&#x27;,[<span class="name">_v</span>(<span class="string">&quot;\n    &quot;</span>+_s(<span class="name">message</span>)+<span class="string">&quot;\n  &quot;</span>)])</span><br><span class="line">        //å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»º p å…ƒç´ ï¼Œå…ƒç´ é‡Œé¢æœ‰æ–‡æœ¬ï¼Œå€¼ä¸º No message. </span><br><span class="line">        :_c(<span class="symbol">&#x27;p</span>&#x27;,[<span class="name">_v</span>(<span class="string">&quot;\n    No message.\n  &quot;</span>)])</span><br><span class="line">      ]</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„<code>_c</code>å°±æ˜¯vueå¯¹è±¡çš„<code>createElement</code>æ–¹æ³• (åˆ›å»ºå…ƒç´ )ï¼Œ<code>_m</code>æ˜¯<code>renderStatic</code>ï¼ˆæ¸²æŸ“é™æ€èŠ‚ç‚¹ï¼‰ï¼Œ<code>_v</code> æ˜¯ <code>createTextVNode</code>ï¼ˆåˆ›å»ºæ–‡æœ¬domï¼‰ï¼Œ<code>_s</code> æ˜¯ <code>toString</code> ï¼ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼‰</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">reasonmlå¤åˆ¶ä»£ç <span class="comment">// src/core/instance/render.js</span></span><br><span class="line">export <span class="keyword">function</span> initRender<span class="function"> (<span class="params">vm<span class="typing">: <span class="module"><span class="identifier">Component</span>)</span> &#123;</span></span></span></span><br><span class="line"><span class="typing"><span class="params"><span class="function"></span>  <span class="operator">...</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span>  // <span class="params">bind the createElement fn to this instance</span></span></span><br><span class="line"><span class="params"><span class="function"></span>  // <span class="params">so that we get proper render context inside it.</span></span></span><br><span class="line"><span class="params"><span class="function"></span>  // <span class="params">args order<span class="typing">: tag,</span> data,</span> <span class="params">children,</span> <span class="params">normalizationType,</span> <span class="params">alwaysNormalize</span></span></span><br><span class="line"><span class="params"><span class="function"></span>  // <span class="params">internal version is used by render functions compiled from templates</span></span></span><br><span class="line"><span class="params"><span class="function"></span>  <span class="params">vm._c = (a,</span> <span class="params">b,</span> <span class="params">c,</span> <span class="params">d)</span> =&gt;</span> create<span class="constructor">Element(<span class="params">vm</span>, <span class="params">a</span>, <span class="params">b</span>, <span class="params">c</span>, <span class="params">d</span>, <span class="params">false</span>)</span></span><br><span class="line">  <span class="comment">// normalization is always applied for the public version, used in</span></span><br><span class="line">  <span class="comment">// user-written render functions.</span></span><br><span class="line">  vm.$createElement =<span class="function"> (<span class="params">a</span>, <span class="params">b</span>, <span class="params">c</span>, <span class="params">d</span>) =&gt;</span> create<span class="constructor">Element(<span class="params">vm</span>, <span class="params">a</span>, <span class="params">b</span>, <span class="params">c</span>, <span class="params">d</span>, <span class="params">true</span>)</span><span class="operator"></span></span><br><span class="line"><span class="operator">  ...</span></span><br><span class="line"><span class="operator"></span>&#125;<span class="operator"></span></span><br><span class="line"><span class="operator"></span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="operator"></span><span class="module-access"><span class="module"><span class="identifier">Vue</span>.</span></span>prototype._s = toString<span class="operator"></span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="operator"></span><span class="module-access"><span class="module"><span class="identifier">Vue</span>.</span></span>prototype._m = renderStatic<span class="operator"></span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line"><span class="operator"></span><span class="module-access"><span class="module"><span class="identifier">Vue</span>.</span></span>prototype._v = createTextVNode</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol><li>è°ƒç”¨compileWxmlæ–¹æ³•ç”Ÿäº§wxmlæ¨¡æ¿ï¼Œè¿™ä¸ªæ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨ mpvue&#x2F;packages&#x2F;mpvue-template-compiler&#x2F;build.jsçš„compileToWxmlæ–¹æ³•å°†ç¬¬ä¸€æ­¥compileå‡ºæ¥çš„æ¨¡æ¿è½¬æˆå°ç¨‹åºçš„wxmlæ¨¡æ¿</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç <span class="regexp">//</span> mpvue-loader<span class="regexp">/lib/</span>template-compiler/index.js</span><br><span class="line">compileToWxml.call(this, compiled, html)</span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šè§£ç­”äº†é—®é¢˜1ã€2</strong></p><h3 id="runtime"><a href="#runtime" class="headerlink" title="runtime"></a>runtime</h3><p><a href="https://link.juejin.cn/?target=">ç›®å½•ç»“æ„</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç .</span><br><span class="line">â”œâ”€â”€ events.js <span class="regexp">//</span>è§£ç­”é—®é¢˜<span class="number">5</span></span><br><span class="line">â”œâ”€â”€ index.js <span class="regexp">//</span>å…¥å£æä¾›Vueå¯¹è±¡ï¼Œä»¥åŠ<span class="variable">$mount</span>ï¼Œå’Œå„ç§åˆå§‹åŒ–</span><br><span class="line">â”œâ”€â”€ liefcycle <span class="regexp">//</span>è§£ç­”é—®é¢˜<span class="number">6</span>ã€<span class="number">7</span></span><br><span class="line">â”œâ”€â”€ node-ops.js <span class="regexp">//</span>æ“ä½œçœŸå®DOMçš„ç›¸å…³å®ç°ï¼Œå› ä¸ºå°ç¨‹åºä¸èƒ½æ“ä½œDOMï¼Œæ‰€ä»¥è¿™é‡Œéƒ½æ˜¯ç›´æ¥è¿”å›</span><br><span class="line">â”œâ”€â”€ patch.js <span class="regexp">//</span>è§£ç­”é—®é¢˜<span class="number">3</span></span><br><span class="line">â””â”€â”€ render.js <span class="regexp">//</span>è§£ç­”é—®é¢˜<span class="number">4</span></span><br></pre></td></tr></table></figure><p><strong><a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/patch.js">patch.js</a></strong></p><p>å’Œvueä½¿ç”¨çš„<code>createPatchFunction</code>ä¿æŒä¸€è‡´ï¼Œä»»ç„¶æ˜¯æ—§æ ‘å’Œæ–°æ ‘è¿›è¡Œpatchäº§å‡ºdiffï¼Œä½†æ˜¯å¤šäº†ä¸€è¡Œthis.$updateDataToMP()ç”¨ä»¥æ›´æ–°ã€‚</p><p><strong><a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/render.js">render.js</a></strong></p><p>ä¸¤ä¸ªæ ¸å¿ƒçš„æ–¹æ³•<code>initDataToMP</code>ã€<code>updateDataToMP</code>ã€‚</p><p><code>initDataToMP</code>æ”¶é›†vmä¸Šçš„dataï¼Œç„¶åè°ƒç”¨å°ç¨‹åºPageç¤ºä¾‹çš„<code>setData</code>æ¸²æŸ“ã€‚</p><p><code>updateDataToMP</code>åœ¨æ¯æ¬¡patchï¼Œä¹Ÿå°±æ˜¯ä¾èµ–æ”¶é›†å‘ç°æ•°æ®æ”¹å˜æ—¶æ›´æ–°(å‚è€ƒpatch.jsä»£ç )ï¼Œè¿™éƒ¨åˆ†ä¸€æ ·ä¼šä½¿ç”¨<code>nextTick</code>å’Œé˜Ÿåˆ—ã€‚æœ€ç»ˆä½¿ç”¨äº†èŠ‚æµé˜€<code>throttleSetData</code>ã€‚50æ¯«ç§’ç”¨æ¥æ§åˆ¶é¢‘ç‡ä»¥è§£å†³é¢‘ç¹ä¿®æ”¹Dataï¼Œä¼šé€ æˆå¤§é‡ä¼ è¾“Dataæ•°æ®è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>å…¶ä¸­<code>collectVmData</code>æœ€ç»ˆä¹Ÿæ˜¯ç”¨åˆ°äº†<code>formatVmData</code>ã€‚å°¤å…¶è¦æ³¨æ„çš„æ˜¯ä¸€å¥æ³¨é‡Šï¼š</p><blockquote><p>getVmData è¿™å„¿è·å–å½“å‰ç»„ä»¶å†…çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å« propsã€computed çš„æ•°æ®</p></blockquote><p>æˆ‘ä»¬åˆçŸ¥é“ï¼Œserviceåˆ°viewæ˜¯ä¸¤ä¸ªçº¿ç¨‹é—´é€šä¿¡ï¼Œå¦‚æœDataå«æœ‰å¤§é‡æ•°æ®ï¼Œå¢åŠ äº†ä¼ è¾“æ•°æ®é‡ï¼ŒåŠ å¤§äº†ä¼ è¾“æˆæœ¬ï¼Œå°†ä¼šé€ æˆæ€§èƒ½ä¸‹é™ã€‚</p><p><strong><a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/events.js">events.js</a></strong></p><p>æ­£å¦‚å®˜ç½‘æ‰€è¯´çš„ï¼Œè¿™é‡Œä½¿ç”¨<code>eventTypeMap</code>åšäº†å„<a href="https://link.juejin.cn/?target=http://mpvue.com/mpvue/%23_13">äº‹ä»¶çš„éšå°„</a></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">clean</span><br><span class="line">å¤åˆ¶ä»£ç <span class="keyword">import</span> &#123; getComKey, eventTypeMap &#125; <span class="keyword">from</span> <span class="string">&#x27;../util/index&#x27;</span></span><br><span class="line">styluså¤åˆ¶ä»£ç <span class="comment">// ç”¨äºå°ç¨‹åºçš„ event type åˆ° web çš„ event</span></span><br><span class="line"><span class="keyword">export</span> const eventTypeMap = &#123;</span><br><span class="line">  tap: [<span class="string">&#x27;tap&#x27;</span>, <span class="string">&#x27;click&#x27;</span>],</span><br><span class="line">  touchstart: [<span class="string">&#x27;touchstart&#x27;</span>],</span><br><span class="line">  touchmove: [<span class="string">&#x27;touchmove&#x27;</span>],</span><br><span class="line">  touchcancel: [<span class="string">&#x27;touchcancel&#x27;</span>],</span><br><span class="line">  touchend: [<span class="string">&#x27;touchend&#x27;</span>],</span><br><span class="line">  longtap: [<span class="string">&#x27;longtap&#x27;</span>],</span><br><span class="line">  input: [<span class="string">&#x27;input&#x27;</span>],</span><br><span class="line">  blur: [<span class="string">&#x27;change&#x27;</span>, <span class="string">&#x27;blur&#x27;</span>],</span><br><span class="line">  submit: [<span class="string">&#x27;submit&#x27;</span>],</span><br><span class="line">  focus: [<span class="string">&#x27;focus&#x27;</span>],</span><br><span class="line">  scrolltoupper: [<span class="string">&#x27;scrolltoupper&#x27;</span>],</span><br><span class="line">  scrolltolower: [<span class="string">&#x27;scrolltolower&#x27;</span>],</span><br><span class="line">  scroll: [<span class="string">&#x27;scroll&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨äº†<code>handleProxyWithVue</code>æ–¹æ³•æ¥ä»£ç†å°ç¨‹åºäº‹ä»¶åˆ°vueäº‹ä»¶ã€‚</p><p>å¦å¤–çœ‹ä¸‹ä½œè€…è‡ªå·±å¯¹è¿™éƒ¨åˆ†çš„<a href="https://link.juejin.cn/?target=https://tech.meituan.com/mt_mpvue_development_framework.html">æ€è·¯</a></p><blockquote><p><strong>äº‹ä»¶ä»£ç†æœºåˆ¶</strong>ï¼šç”¨æˆ·äº¤äº’è§¦å‘çš„æ•°æ®æ›´æ–°é€šè¿‡äº‹ä»¶ä»£ç†æœºåˆ¶å®Œæˆã€‚åœ¨ Vue.js ä»£ç ä¸­ï¼Œäº‹ä»¶å“åº”å‡½æ•°å¯¹åº”åˆ°ç»„ä»¶çš„ methodï¼Œ Vue.js è‡ªåŠ¨ç»´æŠ¤äº†ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚ç„¶è€Œåœ¨å°ç¨‹åºä¸­å¹¶æ²¡æœ‰ç±»ä¼¼çš„æœºåˆ¶ï¼Œåˆå› ä¸º Vue.js æ‰§è¡Œç¯å¢ƒä¸­ç»´æŠ¤ç€ä¸€ä»½å®æ—¶çš„è™šæ‹Ÿ DOMï¼Œè¿™ä¸å°ç¨‹åºçš„è§†å›¾å±‚å®Œå…¨å¯¹åº”ï¼Œæˆ‘ä»¬æ€è€ƒï¼Œåœ¨å°ç¨‹åºç»„ä»¶èŠ‚ç‚¹ä¸Šè§¦å‘äº‹ä»¶åï¼Œåªè¦æ‰¾åˆ°è™šæ‹Ÿ DOM ä¸Šå¯¹åº”çš„èŠ‚ç‚¹ï¼Œè§¦å‘å¯¹åº”çš„äº‹ä»¶ä¸å°±å®Œæˆäº†ä¹ˆï¼›å¦ä¸€æ–¹é¢ï¼ŒVue.js äº‹ä»¶å“åº”å¦‚æœè§¦å‘äº†æ•°æ®æ›´æ–°ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ›´æ–°å°†è‡ªåŠ¨è§¦å‘ï¼Œåœ¨æ­¤å‡½æ•°ä¸ŠåŒæ­¥æ›´æ–°å°ç¨‹åºæ•°æ®ï¼Œæ•°æ®åŒæ­¥ä¹Ÿå°±å®ç°äº†ã€‚</p></blockquote><p><code>getHandle</code>è¿™ä¸ªæ–¹æ³•åº”è¯¥å°±æ˜¯ä½œè€…æ€è·¯å½“ä¸­æ‰€è¯´çš„ï¼šæ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹ï¼Œç„¶åæ‰¾åˆ°handleã€‚</p><p><strong><a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/lifecycle.js">lifecycle.js</a></strong></p><p>åœ¨<code>initMP</code>æ–¹æ³•ä¸­ï¼Œè‡ªå·±åˆ›å»ºå°ç¨‹åºçš„Appã€Pageã€‚å®ç°ç”Ÿå‘½å‘¨æœŸç›¸å…³æ–¹æ³•ï¼Œä½¿ç”¨<code>callHook</code>ä»£ç†å…¼å®¹å°ç¨‹åºAppã€Pageçš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p><a href="https://link.juejin.cn/?target=http://mpvue.com/mpvue/%23_4">å®˜æ–¹æ–‡æ¡£ç”Ÿå‘½å‘¨æœŸ</a>ä¸­è¯´åˆ°äº†ï¼š</p><blockquote><p>åŒ vueï¼Œä¸åŒçš„æ˜¯æˆ‘ä»¬ä¼šåœ¨å°ç¨‹åº onReady åï¼Œå†å»è§¦å‘ vue mounted ç”Ÿå‘½å‘¨æœŸ</p></blockquote><p>è¿™éƒ¨åˆ†æŸ¥çœ‹ï¼Œ<code>onReady</code>ä¹‹åæ‰ä¼šæ‰§è¡Œ<code>next</code>ï¼Œè¿™ä¸ª<code>next</code>å›è°ƒæœ€ç»ˆæ˜¯vueçš„<code>mountComponent</code>ã€‚å¯ä»¥åœ¨<a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/index.js%23L37">index.js</a>ä¸­çœ‹åˆ°ã€‚è¿™éƒ¨åˆ†ä»£ç ä¹Ÿå°±æ˜¯è§£å†³äº†â€å°ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­è§¦å‘vueç”Ÿå‘½å‘¨æœŸâ€ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç export <span class="keyword">function</span> initMP (mpType, <span class="keyword">next</span>) &#123;</span><br><span class="line">  <span class="regexp">//</span> ...</span><br><span class="line">    global.Page(&#123;</span><br><span class="line">      <span class="regexp">//</span> ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ</span><br><span class="line">      onReady () &#123;</span><br><span class="line">        mp.status = <span class="string">&#x27;ready&#x27;</span></span><br><span class="line"></span><br><span class="line">        callHook(rootVueVM, <span class="string">&#x27;onReady&#x27;</span>)</span><br><span class="line">        <span class="keyword">next</span>()</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="regexp">//</span> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å°ç¨‹åºonShowæ—¶ï¼Œä½¿ç”¨$nextTickå»ç¬¬ä¸€æ¬¡æ¸²æŸ“æ•°æ®ï¼Œå‚è€ƒä¸Šé¢æåˆ°çš„render.jsã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç export <span class="keyword">function</span> initMP (mpType, <span class="keyword">next</span>) &#123;</span><br><span class="line">  <span class="regexp">//</span> ...</span><br><span class="line">  global.Page(&#123;</span><br><span class="line">    <span class="regexp">//</span> ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º</span><br><span class="line">    onShow () &#123;</span><br><span class="line">      mp.page = this</span><br><span class="line">      mp.status = <span class="string">&#x27;show&#x27;</span></span><br><span class="line">      callHook(rootVueVM, <span class="string">&#x27;onShow&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="regexp">//</span> åªæœ‰é¡µé¢éœ€è¦ setData</span><br><span class="line">      rootVueVM.<span class="variable">$nextTick</span>(() =&gt; &#123;</span><br><span class="line">        rootVueVM._initDataToMP()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="regexp">//</span> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨mpvue-loaderç”Ÿæˆtemplateæ—¶ï¼Œæ¯”å¦‚ç‚¹å‡»äº‹ä»¶<code>@click</code>ä¼šå˜æˆ<code>bindtap=&quot;handleProxy&quot;</code>ï¼Œäº‹ä»¶ç»‘å®šå…¨éƒ½ä¼šä½¿ç”¨<code>handleProxy</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><p>å¯ä»¥æŸ¥çœ‹ä¸Šé¢<a href="#mpvue-loader">mpvue-loader</a>å›é¡¾ä¸€ä¸‹ã€‚</p><p>æœ€ç»ˆhandleProxyè°ƒç”¨çš„æ˜¯event.jsä¸­çš„<code>handleProxyWithVue</code>ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">awkå¤åˆ¶ä»£ç export <span class="keyword">function</span> initMP (mpType, <span class="keyword">next</span>) &#123;</span><br><span class="line">  <span class="regexp">//</span> ...</span><br><span class="line">    global.Page(&#123;</span><br><span class="line">      handleProxy (e) &#123;</span><br><span class="line">        return rootVueVM.<span class="variable">$handleProxyWithVue</span>(e)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="regexp">//</span> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/mpvue/blob/master/src/platforms/mp/runtime/index.js">index.js</a></strong></p><p>æœ€åindex.jså°±è´Ÿè´£å„ç§åˆå§‹åŒ–å’Œmountã€‚</p><h2 id="Classå’ŒStyleä¸ºä»€ä¹ˆæš‚ä¸æ”¯æŒç»„ä»¶"><a href="#Classå’ŒStyleä¸ºä»€ä¹ˆæš‚ä¸æ”¯æŒç»„ä»¶" class="headerlink" title="Classå’ŒStyleä¸ºä»€ä¹ˆæš‚ä¸æ”¯æŒç»„ä»¶"></a>Classå’ŒStyleä¸ºä»€ä¹ˆæš‚ä¸æ”¯æŒç»„ä»¶</h2><p>åŸå› ï¼šç›®å‰çš„ç»„ä»¶æ˜¯ä½¿ç”¨å°ç¨‹åºçš„ template æ ‡ç­¾å®ç°çš„ï¼Œç»™ç»„ä»¶æŒ‡å®šçš„classå’Œstyleæ˜¯æŒ‚è½½åœ¨templateæ ‡ç­¾ä¸Šï¼Œè€Œtemplate æ ‡ç­¾ä¸æ”¯æŒ class åŠ style å±æ€§ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šç»‘å®šclassæˆ–styleåˆ°ä¸€ä¸ªpropså±æ€§ä¸Šã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">arduinoå¤åˆ¶ä»£ç  <span class="comment">// ç»„ä»¶ComponentA.vue</span></span><br><span class="line"> &lt;<span class="keyword">template</span>&gt;</span><br><span class="line">  &lt;div <span class="keyword">class</span>=<span class="string">&quot;container&quot;</span> :<span class="keyword">class</span>=<span class="string">&quot;pClass&quot;</span>&gt;</span><br><span class="line">    ...</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/<span class="keyword">template</span>&gt;</span><br><span class="line">xmlå¤åˆ¶ä»£ç &lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      pClass: &#123;</span><br><span class="line">        type: <span class="type">String</span>,</span><br><span class="line">        <span class="keyword">default</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">xmlå¤åˆ¶ä»£ç &lt;!--PageB.vue--&gt;</span></span><br><span class="line"><span class="string">&lt;template&gt;</span></span><br><span class="line"><span class="string">    &lt;component-a :pClass=&quot;cusComponentAClass&quot;  /&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br><span class="line"><span class="string">applescriptå¤åˆ¶ä»£ç &lt;script&gt;</span></span><br><span class="line"><span class="string">data () &#123;</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">      cusComponentAClass: &#x27;</span>a-<span class="keyword">class</span> b-<span class="keyword">class</span><span class="number">&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">xmlå¤åˆ¶ä»£ç &lt;style lang=<span class="string">&quot;stylus&quot;</span> scoped&gt;</span><br><span class="line">  .a-<span class="keyword">class</span></span><br><span class="line">    border red solid <span class="number">2</span>rpx</span><br><span class="line">  .b-<span class="keyword">class</span></span><br><span class="line">    margin-right <span class="number">20</span>rpx</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·ä¼šæœ‰é—®é¢˜å°±æ˜¯styleåŠ ä¸Šscopedä¹‹åï¼Œç¼–è¯‘æ¨¡æ¿ç”Ÿæˆçš„ä»£ç æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">haskell</span>å¤åˆ¶ä»£ç  .a-<span class="keyword">class</span>.<span class="class"><span class="keyword">data</span>-v-8f1d914e &#123;</span></span><br><span class="line"><span class="class">   <span class="title">border</span>: #<span class="title">f00</span> <span class="title">solid</span> 2<span class="title">rpx</span>;</span></span><br><span class="line"><span class="class"> &#125;</span></span><br><span class="line"> .b-<span class="keyword">class</span>.<span class="class"><span class="keyword">data</span>-v-8f1d914e &#123;</span></span><br><span class="line"><span class="class">   <span class="title">margin</span>-<span class="title">right</span> 20<span class="title">rpx</span></span></span><br><span class="line"><span class="class"> &#125;</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æƒ³è¦è¿™äº›ç»„ä»¶çš„classç”Ÿæ•ˆå°±ä¸èƒ½ä½¿ç”¨scopedçš„styleï¼Œæ”¹æˆä¸‹é¢è¿™æ ·ï¼Œæœ€å¥½è‡ªå·±ç»™a-classå’Œb-classåŠ å‰ç¼€ä»¥é˜²å…¶ä»–çš„æ–‡ä»¶å¼•ç”¨è¿™äº›æ ·å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">xmlå¤åˆ¶ä»£ç  <span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;stylus&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.a-class</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span> red solid <span class="number">2</span>rpx</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.b-class</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span> <span class="number">20</span>rpx</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;stylus&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.other-class</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span> red solid <span class="number">2</span>rpx</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">   ...</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨å®šä¹‰ç»„ä»¶ä¸Šç»‘å®šstyleå±æ€§åˆ°ä¸€ä¸ªpropså±æ€§ä¸Šï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">xmlå¤åˆ¶ä»£ç  <span class="comment">&lt;!--Pç»„ä»¶ComponentA.vue--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;pStyle&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">xmlå¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">pStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">xmlå¤åˆ¶ä»£ç <span class="comment">&lt;!--PageB.vue--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component-a</span> <span class="attr">:pStyle</span>=<span class="string">&quot;cusComponentAStyle&quot;</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">xmlå¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> cusComponentAStyle = <span class="string">&#x27;border:red solid 2rpx; margin-right:20rpx;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">data () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      cusComponentAStyle</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">xmlå¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;stylus&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰styleObjectï¼Œç„¶åé€šè¿‡å·¥å…·å‡½æ•°è½¬åŒ–ä¸ºstyleStringï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">javascriptå¤åˆ¶ä»£ç <span class="keyword">const</span> bstyle = &#123;</span><br><span class="line">  <span class="attr">border</span>: <span class="string">&#x27;red solid 2rpx&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;margin-right&#x27;</span>: <span class="string">&#x27;20rpx&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(bstyle)) &#123;</span><br><span class="line">  arr.<span class="title function_">push</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cusComponentAStyle = arr.<span class="title function_">join</span>(<span class="string">&#x27;; &#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>å½“ç„¶è‡ªå®šä¹‰ç»„ä»¶ç¡®å®šåªä¼šæ”¹å˜æŸä¸ªcssæ ·å¼ï¼Œé€šè¿‡prosä¼ å…¥å•ä¸ªæ ·å¼çš„å€¼ï¼Œç„¶åé€šè¿‡:styleç»‘å®šè‚¯å®šæ²¡é—®é¢˜ï¼š</li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">dustå¤åˆ¶ä»£ç <span class="comment">&lt;!--ç»„ä»¶ComponentA.vue--&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#x27;background-color&#x27;: backgroundColor&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ...</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">xmlå¤åˆ¶ä»£ç <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> </span></span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable">    props: &#123;</span></span><br><span class="line"><span class="template-variable">      backgroundColor: &#123;</span></span><br><span class="line"><span class="template-variable">        type: String,</span></span><br><span class="line"><span class="template-variable">        <span class="keyword">default</span>: &#x27;yellow&#x27;</span></span><br><span class="line"><span class="template-variable">      &#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">  &#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">xmlå¤åˆ¶ä»£ç <span class="comment">&lt;!-- PageB.vue --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">component-a</span> <span class="attr">backgroundColor</span>=<span class="string">&quot;red&quot;</span>  /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="åˆ†åŒ…åŠ è½½"><a href="#åˆ†åŒ…åŠ è½½" class="headerlink" title="åˆ†åŒ…åŠ è½½"></a>åˆ†åŒ…åŠ è½½</h2><p>package.jsonä¿®æ”¹</p><ul><li>å‡çº§ï¼š â€œmpvue-loaderâ€: â€œ^1.1.2-rc.4â€ â€œwebpack-mpvue-asset-pluginâ€: â€œ^0.1.1â€</li><li>æ–°å¢ï¼š â€œrelativeâ€: â€œ^3.0.2â€</li></ul><p>æ³¨æ„äº‹é¡¹</p><ul><li>1.1.2-rc.5 ä¿®å¤ slot æ–‡ä»¶è·¯å¾„ç”Ÿæˆé”™è¯¯çš„é—®é¢˜</li><li>1.1.x ç‰ˆæœ¬è¿˜ä¸æ˜¯å¾ˆç¨³å®šï¼Œå¯¹ç¨³å®šæ€§è¦æ±‚è¾ƒé«˜çš„é¡¹ç›®å»ºè®®æš‚æ—¶ä½¿ç”¨ 1.0.x ç‰ˆæœ¬</li></ul><p>ç§»åŠ¨src&#x2F;main.jsä¸­configç›¸å…³å†…å®¹åˆ°åŒçº§ç›®å½•ä¸‹main.json(æ–°å»º)ä¸­</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nimå¤åˆ¶ä»£ç <span class="keyword">export</span> default &#123;</span><br><span class="line">  // config: <span class="meta">&#123;...&#125;</span> éœ€è¦ç§»åŠ¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>to</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">nimå¤åˆ¶ä»£ç &#123;</span><br><span class="line"> <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">   <span class="string">&quot;pages/index/main&quot;</span>,</span><br><span class="line">   <span class="string">&quot;pages/logs/main&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;subPackages&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;root&quot;</span>: <span class="string">&quot;pages/packageA&quot;</span>,</span><br><span class="line">     <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">       <span class="string">&quot;counter/main&quot;</span></span><br><span class="line">     ]</span><br><span class="line">   &#125;</span><br><span class="line"> ],</span><br><span class="line"> <span class="string">&quot;window&quot;</span>: <span class="meta">&#123;...&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>webpack é…ç½®é…åˆå‡çº§æŒ‡å—</strong></p><ul><li>æœ¬æ¬¡å‡çº§æ„åœ¨è°ƒæ•´ç”Ÿæˆæ–‡ä»¶ç›®å½•ç»“æ„ï¼Œå¯¹ä¾èµ–çš„æ–‡ä»¶ç”±åŸæ¥çš„å†™æ­»ç»å¯¹è·¯å¾„è¯¥æ”¹ä¸ºç›¸å¯¹è·¯å¾„</li><li><a href="mailto:&#x6d;&#x70;&#x76;&#x75;&#x65;&#45;&#x6c;&#111;&#x61;&#100;&#101;&#x72;&#x40;&#49;&#x2e;&#49;&#x2e;&#50;&#45;&#114;&#99;&#46;&#52;">&#x6d;&#x70;&#x76;&#x75;&#x65;&#45;&#x6c;&#111;&#x61;&#100;&#101;&#x72;&#x40;&#49;&#x2e;&#49;&#x2e;&#50;&#45;&#114;&#99;&#46;&#52;</a> ä¾èµ– <a href="mailto:&#119;&#x65;&#98;&#x70;&#97;&#99;&#x6b;&#45;&#109;&#112;&#118;&#117;&#101;&#x2d;&#x61;&#x73;&#x73;&#101;&#x74;&#45;&#112;&#108;&#117;&#103;&#105;&#110;&#64;&#x30;&#x2e;&#x31;&#46;&#x30;">&#119;&#x65;&#98;&#x70;&#97;&#99;&#x6b;&#45;&#109;&#112;&#118;&#117;&#101;&#x2d;&#x61;&#x73;&#x73;&#101;&#x74;&#45;&#112;&#108;&#117;&#103;&#105;&#110;&#64;&#x30;&#x2e;&#x31;&#46;&#x30;</a> åšä¾èµ–èµ„æºå¼•ç”¨</li><li>ä¹‹å‰å†™åœ¨ main.js ä¸­çš„ config ä¿¡æ¯ï¼Œéœ€è¦åœ¨ main.js åŒçº§ç›®å½•ä¸‹æ–°å»º main.json æ–‡ä»¶ï¼Œä½¿ç”¨ webapck-copy-plugin copy åˆ° build ç›®å½•ä¸‹</li><li>app.json ä¸­å¼•ç”¨çš„å›¾ç‰‡ä¸ä¼šè‡ªåŠ¨ copy åˆ° dist ç›®å½•ä¸‹ json é…ç½®æ–‡ä»¶æ˜¯ç”± webapck-copy-plugin copy è¿‡å»çš„ï¼Œä¸ä¼šå¤„ç†ä¾èµ–ï¼Œå¯ä»¥å°†å›¾ç‰‡æ”¾åˆ°æ ¹ç›®å½•ä¸‹ static ç›®å½•ä¸‹ï¼Œä½¿ç”¨ webapck-copy-plugin copy è¿‡å»</li></ul><p>build&#x2F;webpack.base.conf.js</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">arcadeå¤åˆ¶ä»£ç +<span class="keyword">var</span> CopyWebpackPlugin = require(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>)</span><br><span class="line">+<span class="keyword">var</span> relative = require(<span class="string">&#x27;relative&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">resolve</span> (<span class="params">dir</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> path.join(__dirname, <span class="string">&#x27;..&#x27;</span>, dir)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">-<span class="keyword">function</span> <span class="title function_">getEntry</span> (<span class="params">rootSrc, pattern</span>) &#123;</span><br><span class="line">-  <span class="keyword">var</span> files = glob.sync(path.resolve(rootSrc, pattern))</span><br><span class="line">-  <span class="keyword">return</span> files.<span class="built_in">reduce</span>(<span class="function">(<span class="params">res, file</span>) =&gt;</span> &#123;</span><br><span class="line">-    <span class="keyword">var</span> info = path.parse(file)</span><br><span class="line">-    <span class="keyword">var</span> key = info.dir.<span class="built_in">slice</span>(rootSrc.<span class="built_in">length</span> + <span class="number">1</span>) + <span class="string">&#x27;/&#x27;</span> + info.name</span><br><span class="line">-    res[key] = path.resolve(file)</span><br><span class="line">-    <span class="keyword">return</span> res</span><br><span class="line">-  &#125;, &#123;&#125;)</span><br><span class="line">+<span class="keyword">function</span> <span class="title function_">getEntry</span> (<span class="params">rootSrc</span>) &#123;</span><br><span class="line">+  <span class="keyword">var</span> <span class="built_in">map</span> = &#123;&#125;;</span><br><span class="line">+  glob.sync(rootSrc + <span class="string">&#x27;/pages/**/main.js&#x27;</span>)</span><br><span class="line">+  .forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">+    <span class="keyword">var</span> key = relative(rootSrc, file).<span class="built_in">replace</span>(<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">+    <span class="built_in">map</span>[key] = file;</span><br><span class="line">+  &#125;)</span><br><span class="line">+   <span class="keyword">return</span> <span class="built_in">map</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">   plugins: [</span><br><span class="line">-    <span class="keyword">new</span> MpvuePlugin()</span><br><span class="line">+    <span class="keyword">new</span> MpvuePlugin(),</span><br><span class="line">+    <span class="keyword">new</span> CopyWebpackPlugin([&#123;</span><br><span class="line">+      from: <span class="string">&#x27;**/*.json&#x27;</span>,</span><br><span class="line">+      to: <span class="string">&#x27;app.json&#x27;</span></span><br><span class="line">+    &#125;], &#123;</span><br><span class="line">+      context: <span class="string">&#x27;src/&#x27;</span></span><br><span class="line">+    &#125;),</span><br><span class="line">+    <span class="keyword">new</span> CopyWebpackPlugin([ <span class="comment">// å¤„ç† main.json é‡Œé¢å¼•ç”¨çš„å›¾ç‰‡ï¼Œä¸è¦æ”¾ä»£ç ä¸­å¼•ç”¨çš„å›¾ç‰‡</span></span><br><span class="line">+      &#123;</span><br><span class="line">+        from: path.resolve(__dirname, <span class="string">&#x27;../static&#x27;</span>),</span><br><span class="line">+        to: path.resolve(__dirname, <span class="string">&#x27;../dist/static&#x27;</span>),</span><br><span class="line">+        ignore: [<span class="string">&#x27;.*&#x27;</span>]</span><br><span class="line">+      &#125;</span><br><span class="line">+    ])</span><br><span class="line">   ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>build&#x2F;webpack.dev.conf.js</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">phpå¤åˆ¶ä»£ç module.exports = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">   <span class="attr">devtool</span>: <span class="string">&#x27;#source-map&#x27;</span>,</span><br><span class="line">   <span class="attr">output</span>: &#123;</span><br><span class="line">     <span class="attr">path</span>: config.build.assetsRoot,</span><br><span class="line">-    <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;js/[name].js&#x27;</span>),</span><br><span class="line">-    <span class="attr">chunkFilename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;js/[id].js&#x27;</span>)</span><br><span class="line">+    <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[name].js&#x27;</span>),</span><br><span class="line">+    <span class="attr">chunkFilename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[id].js&#x27;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">plugins</span>: [</span><br><span class="line">     <span class="keyword">new</span> webpack.<span class="title function_ invoke__">DefinePlugin</span>(&#123;</span><br><span class="line">    module.exports = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">     // copy <span class="keyword">from</span> ./webpack.prod.conf.js</span><br><span class="line">     // extract css into its own file</span><br><span class="line">     <span class="keyword">new</span> <span class="title class_">ExtractTextPlugin</span>(&#123;</span><br><span class="line">-      <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;css/[name].wxss&#x27;</span>)</span><br><span class="line">+      <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[name].wxss&#x27;</span>)</span><br><span class="line">     &#125;),</span><br><span class="line">    module.exports = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;),</span><br><span class="line">     <span class="keyword">new</span> webpack.optimize.<span class="title function_ invoke__">CommonsChunkPlugin</span>(&#123;</span><br><span class="line">-      <span class="attr">name</span>: <span class="string">&#x27;vendor&#x27;</span>,</span><br><span class="line">+      <span class="attr">name</span>: <span class="string">&#x27;common/vendor&#x27;</span>,</span><br><span class="line">       <span class="attr">minChunks</span>: function (module, count) &#123;</span><br><span class="line">         // any required modules inside node_modules are extracted to vendor</span><br><span class="line">         <span class="keyword">return</span> (</span><br><span class="line">        module.exports = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;),</span><br><span class="line">     <span class="keyword">new</span> webpack.optimize.<span class="title function_ invoke__">CommonsChunkPlugin</span>(&#123;</span><br><span class="line">-      <span class="attr">name</span>: <span class="string">&#x27;manifest&#x27;</span>,</span><br><span class="line">-      <span class="attr">chunks</span>: [<span class="string">&#x27;vendor&#x27;</span>]</span><br><span class="line">+      <span class="attr">name</span>: <span class="string">&#x27;common/manifest&#x27;</span>,</span><br><span class="line">+      <span class="attr">chunks</span>: [<span class="string">&#x27;common/vendor&#x27;</span>]</span><br><span class="line">     &#125;),</span><br><span class="line">-    // copy custom <span class="built_in">static</span> assets</span><br><span class="line">-    <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>([</span><br><span class="line">-      &#123;</span><br><span class="line">-        <span class="attr">from</span>: path.<span class="title function_ invoke__">resolve</span>(__dirname, <span class="string">&#x27;../static&#x27;</span>),</span><br><span class="line">-        <span class="attr">to</span>: config.build.assetsSubDirectory,</span><br><span class="line">-        <span class="attr">ignore</span>: [<span class="string">&#x27;.*&#x27;</span>]</span><br><span class="line">-      &#125;</span><br><span class="line">-    ]),</span><br></pre></td></tr></table></figure><p>build&#x2F;webpack.prod.conf.js</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">phpå¤åˆ¶ä»£ç </span><br><span class="line">    <span class="keyword">var</span> webpackConfig = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">   <span class="attr">devtool</span>: config.build.productionSourceMap ? <span class="string">&#x27;#source-map&#x27;</span> : <span class="literal">false</span>,</span><br><span class="line">   <span class="attr">output</span>: &#123;</span><br><span class="line">     <span class="attr">path</span>: config.build.assetsRoot,</span><br><span class="line">-    <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;js/[name].js&#x27;</span>),</span><br><span class="line">-    <span class="attr">chunkFilename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;js/[id].js&#x27;</span>)</span><br><span class="line">+    <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[name].js&#x27;</span>),</span><br><span class="line">+    <span class="attr">chunkFilename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[id].js&#x27;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">var</span> webpackConfig = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">     &#125;),</span><br><span class="line">     // extract css into its own file</span><br><span class="line">     <span class="keyword">new</span> <span class="title class_">ExtractTextPlugin</span>(&#123;</span><br><span class="line">-      // <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;css/[name].[contenthash].css&#x27;</span>)</span><br><span class="line">-      <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;css/[name].wxss&#x27;</span>)</span><br><span class="line">+      // <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[name].[contenthash].css&#x27;</span>)</span><br><span class="line">+      <span class="attr">filename</span>: utils.<span class="title function_ invoke__">assetsPath</span>(<span class="string">&#x27;[name].wxss&#x27;</span>)</span><br><span class="line">     &#125;),</span><br><span class="line">     <span class="comment">// Compress extracted CSS. We are using this plugin so that possible</span></span><br><span class="line">     <span class="comment">// duplicated CSS from different components can be deduped.</span></span><br><span class="line">    <span class="keyword">var</span> webpackConfig = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">     <span class="keyword">new</span> webpack.<span class="title function_ invoke__">HashedModuleIdsPlugin</span>(),</span><br><span class="line">     // split vendor js into its own file</span><br><span class="line">     <span class="keyword">new</span> webpack.optimize.<span class="title function_ invoke__">CommonsChunkPlugin</span>(&#123;</span><br><span class="line">-      <span class="attr">name</span>: <span class="string">&#x27;vendor&#x27;</span>,</span><br><span class="line">+      <span class="attr">name</span>: <span class="string">&#x27;common/vendor&#x27;</span>,</span><br><span class="line">       <span class="attr">minChunks</span>: function (module, count) &#123;</span><br><span class="line">         // any required modules inside node_modules are extracted to vendor</span><br><span class="line">         <span class="keyword">return</span> (</span><br><span class="line">     <span class="keyword">var</span> webpackConfig = <span class="title function_ invoke__">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">     // extract webpack runtime <span class="keyword">and</span> module manifest to its own file in order to</span><br><span class="line">     // prevent vendor hash <span class="keyword">from</span> being updated whenever app bundle is updated</span><br><span class="line">     <span class="keyword">new</span> webpack.optimize.<span class="title function_ invoke__">CommonsChunkPlugin</span>(&#123;</span><br><span class="line">-      <span class="attr">name</span>: <span class="string">&#x27;manifest&#x27;</span>,</span><br><span class="line">-      <span class="attr">chunks</span>: [<span class="string">&#x27;vendor&#x27;</span>]</span><br><span class="line">-    &#125;),</span><br><span class="line">+      <span class="attr">name</span>: <span class="string">&#x27;common/manifest&#x27;</span>,</span><br><span class="line">+      <span class="attr">chunks</span>: [<span class="string">&#x27;common/vendor&#x27;</span>]</span><br><span class="line">+    &#125;)</span><br><span class="line">-    // copy custom <span class="built_in">static</span> assets</span><br><span class="line">-    <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>([</span><br><span class="line">-      &#123;</span><br><span class="line">-        <span class="attr">from</span>: path.<span class="title function_ invoke__">resolve</span>(__dirname, <span class="string">&#x27;../static&#x27;</span>),</span><br><span class="line">-        <span class="attr">to</span>: config.build.assetsSubDirectory,</span><br><span class="line">-        <span class="attr">ignore</span>: [<span class="string">&#x27;.*&#x27;</span>]</span><br><span class="line">-      &#125;</span><br><span class="line">-    ])</span><br><span class="line">   ]</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure><p>config&#x2F;index.js</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">coffeescriptå¤åˆ¶ä»£ç </span><br><span class="line">module.<span class="built_in">exports</span> = &#123;</span><br><span class="line">     env: <span class="built_in">require</span>(<span class="string">&#x27;./prod.env&#x27;</span>),</span><br><span class="line">     index: path.resolve(__dirname, <span class="string">&#x27;../dist/index.html&#x27;</span>),</span><br><span class="line">     assetsRoot: path.resolve(__dirname, <span class="string">&#x27;../dist&#x27;</span>),</span><br><span class="line">-    assetsSubDirectory: <span class="string">&#x27;static&#x27;</span>, <span class="regexp">//</span> ä¸å°†èµ„æºèšåˆæ”¾åœ¨ static ç›®å½•ä¸‹</span><br><span class="line">+    assetsSubDirectory: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">     assetsPublicPath: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">     productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">     <span class="regexp">//</span> Gzip <span class="literal">off</span> <span class="keyword">by</span> <span class="keyword">default</span> <span class="keyword">as</span> many popular static hosts such <span class="keyword">as</span></span><br><span class="line">@@ <span class="number">-26</span>,<span class="number">7</span> +<span class="number">26</span>,<span class="number">7</span> @@ module.<span class="built_in">exports</span> = &#123;</span><br><span class="line">     port: <span class="number">8080</span>,</span><br><span class="line">     <span class="regexp">//</span> åœ¨å°ç¨‹åºå¼€å‘è€…å·¥å…·ä¸­ä¸éœ€è¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span><br><span class="line">     autoOpenBrowser: <span class="literal">false</span>,</span><br><span class="line">-    assetsSubDirectory: <span class="string">&#x27;static&#x27;</span>, <span class="regexp">//</span> ä¸å°†èµ„æºèšåˆæ”¾åœ¨ static ç›®å½•ä¸‹</span><br><span class="line">+    assetsSubDirectory: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">     assetsPublicPath: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">     proxyTable: &#123;&#125;,</span><br><span class="line">     <span class="regexp">//</span> CSS Sourcemaps <span class="literal">off</span> <span class="keyword">by</span> <span class="keyword">default</span> because relative paths are <span class="string">&quot;buggy&quot;</span></span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p>ä»¥ä¸Šå†…å®¹éƒ¨åˆ†æ¥è‡ªï¼š</p><ul><li><a href="https://link.juejin.cn/?target=https://zhuanlan.zhihu.com/p/22754296">å¾®ä¿¡å°ç¨‹åºæ¶æ„åˆ†æ (ä¸Š)</a></li><li><a href="https://link.juejin.cn/?target=https://zhuanlan.zhihu.com/p/25105936">å¾®ä¿¡å°ç¨‹åºæ¶æ„è§£æ</a></li><li><a href="https://link.juejin.cn/?target=http://daxue.qq.com/content/online/id/4107">2018å¾®ä¿¡å…¬å¼€è¯¾ç¬¬ä¸ƒå­£ä¸Šæµ·ç«™Â·å°ç¨‹åºä¸“åœº</a></li><li><a href="https://juejin.cn/post/6844903548866543623">å°ç¨‹åºä¸­ä½¿ç”¨iconfont</a></li><li><a href="https://link.juejin.cn/?target=http://www.infoq.com/cn/news/2018/07/wchat-miniprog-support">å¾®ä¿¡å°ç¨‹åºçš„ä¸‹ä¸€æ­¥ï¼šæ”¯æŒNPMã€å°ç¨‹åºäº‘ã€å¯è§†åŒ–ç¼–ç¨‹ã€æ”¯æŒåˆ†åŒ…</a></li><li><a href="https://link.juejin.cn/?target=http://mpvue.com/build/mpvue-loader/">mpvue-docs</a></li><li><a href="https://juejin.cn/post/6844903607301570568">ä½¿ç”¨Mpvueå¼€å‘å¾®ä¿¡å°ç¨‹åºçš„æœ€ä½³å®è·µ</a></li><li><a href="https://link.juejin.cn/?target=https://tech.meituan.com/mt_mpvue_development_framework.html">ç”¨Vue.jså¼€å‘å¾®ä¿¡å°ç¨‹åºï¼šå¼€æºæ¡†æ¶mpvueè§£æ</a></li><li><a href="https://link.juejin.cn/?target=https://github.com/answershuto/learnVue">learnVue</a></li></ul><p>ä½œè€…ï¼šyck<br>é“¾æ¥ï¼š<a href="https://juejin.cn/post/6844903670589423623">https://juejin.cn/post/6844903670589423623</a><br>æ¥æºï¼šç¨€åœŸæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>hexoç¬”è®°</title>
      <link href="/post/e5a5d29d.html"/>
      <url>/post/e5a5d29d.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Hexo åšå®¢ä¸­æ·»åŠ ä¸€ç¯‡æ–‡ç« ï¼Œä»¥åŠæ–‡ç« çš„é…ç½®ã€‚</p><h3 id="åˆ›å»ºæ–‡ç« "><a href="#åˆ›å»ºæ–‡ç« " class="headerlink" title="åˆ›å»ºæ–‡ç« "></a>åˆ›å»ºæ–‡ç« </h3><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ç¯‡æ–‡ç« ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new [layout] &lt;title&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæ–‡ç« çš„å¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œé»˜è®¤ä¸º <code>post</code>ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>_config.yml</code> ä¸­çš„ <code>default_layout</code> å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤ç”¨äºåˆ›å»ºä¸€ç¯‡æ–‡ä»¶åä¸º â€œlesson-1â€ çš„æ–‡ç« ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new lesson-1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤å°†åœ¨ç«™ç‚¹æ ¹ç›®å½•çš„ <code>source\_posts</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>lesson-1.md</code> çš„æ–‡ä»¶ã€‚</p><h3 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h3><p>Front-matter æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ <code>---</code> åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2022/5/16 20:46:25</span><br><span class="line">---</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯é¢„å…ˆå®šä¹‰çš„å‚æ•°ï¼Œæ‚¨å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™äº›å‚æ•°å€¼å¹¶åŠ ä»¥åˆ©ç”¨ã€‚</p><p>å‚æ•°</p><p>æè¿°</p><p>é»˜è®¤å€¼</p><p><code>layout</code></p><p>å¸ƒå±€</p><p><code>config.default_layout</code></p><p><code>title</code></p><p>æ ‡é¢˜</p><p>æ–‡ç« çš„æ–‡ä»¶å</p><p><code>date</code></p><p>å»ºç«‹æ—¥æœŸ</p><p>æ–‡ä»¶å»ºç«‹æ—¥æœŸ</p><p><code>updated</code></p><p>æ›´æ–°æ—¥æœŸ</p><p>æ–‡ä»¶æ›´æ–°æ—¥æœŸ</p><p><code>comments</code></p><p>å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½</p><p>true</p><p><code>tags</code></p><p>æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰</p><p><code>categories</code></p><p>åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰</p><p><code>permalink</code></p><p>è¦†ç›–æ–‡ç« ç½‘å€</p><p><code>excerpt</code></p><p>æ–‡ç« çš„æ‘˜è¦</p><p><strong>åˆ†ç±»å’Œæ ‡ç­¾</strong></p><p>åªæœ‰æ–‡ç« æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œæ‚¨å¯ä»¥åœ¨ Front-matter ä¸­è®¾ç½®ã€‚åœ¨å…¶ä»–ç³»ç»Ÿä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾å¬èµ·æ¥å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯åœ¨ Hexo ä¸­ä¸¤è€…æœ‰ç€æ˜æ˜¾çš„å·®åˆ«ï¼šåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œè€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚</p><p>åˆ†ç±»å’Œæ ‡ç­¾çš„æ·»åŠ å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">- åˆ†ç±»1</span><br><span class="line">tags:</span><br><span class="line">- æ ‡ç­¾1</span><br><span class="line">- æ ‡ç­¾2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Hexo ä¸æ”¯æŒæŒ‡å®šå¤šä¸ªåŒçº§åˆ†ç±»ã€‚ä¸‹é¢çš„æŒ‡å®šæ–¹æ³•ä¼šä½¿åˆ†ç±» <code>åˆ†ç±»2</code> æˆä¸º <code>åˆ†ç±»1</code> çš„å­åˆ†ç±»ï¼Œè€Œä¸æ˜¯å¹¶åˆ—åˆ†ç±»ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦ä¸ºæ‚¨çš„æ–‡ç« é€‰æ‹©å°½å¯èƒ½å‡†ç¡®çš„åˆ†ç±»ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">- åˆ†ç±»1</span><br><span class="line">- åˆ†ç±»2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ éœ€è¦ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ list ä¸­çš„æ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">- [åˆ†ç±»1, åˆ†ç±»1-1]</span><br><span class="line">- [åˆ†ç±»1, åˆ†ç±»1-2]</span><br><span class="line">- [åˆ†ç±»2]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿™ç¯‡æ–‡ç« åŒæ—¶åŒ…æ‹¬äºŒä¸ªåˆ†ç±»ï¼š <code>åˆ†ç±»1-1</code> å’Œ <code>åˆ†ç±»1-2</code> åˆ†åˆ«éƒ½æ˜¯çˆ¶åˆ†ç±» <code>åˆ†ç±»1</code> çš„å­åˆ†ç±»ï¼ŒåŒæ—¶ <code>åˆ†ç±»2</code> æ˜¯ä¸€ä¸ªæ²¡æœ‰å­åˆ†ç±»çš„åˆ†ç±»ã€‚</p><p>æ³¨ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°åˆ›å»ºçš„æ–‡ç« æ˜¯æ²¡æœ‰ categories å’Œ tags çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹çš„ <code>scaffolds\post.md</code> æ–‡ä»¶æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œè¿™æ ·æ¯æ¬¡æ–°å»ºæ–‡ç« ï¼Œå°±è‡ªåŠ¨æœ‰äº†è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ–‡ç« æ‘˜è¦"><a href="#æ–‡ç« æ‘˜è¦" class="headerlink" title="æ–‡ç« æ‘˜è¦"></a>æ–‡ç« æ‘˜è¦</h3><p>å¦‚æœæ²¡æœ‰è®¾ç½®æ‘˜è¦ï¼Œé¦–é¡µå°†æ˜¾ç¤ºæ–‡ç« å…¨éƒ¨å†…å®¹ã€‚æ‘˜è¦å¯ä»¥æ§åˆ¶æ–‡ç« åœ¨é¦–é¡µæ˜¾ç¤ºçš„å†…å®¹ã€‚</p><p>æœ‰ä¸¤ç§è®¾ç½®æ‘˜è¦çš„æ–¹æ³•ã€‚</p><p><strong>æ–¹æ³•ä¸€ï¼šå†™æ‘˜è¦</strong></p><p>åœ¨æ–‡ç« çš„ <code>front-matter</code> ä¸­æ·»åŠ  <code>excerpt</code>ï¼Œå…¶ä¸­ <code>excerpt</code> ä¸­çš„å†…å®¹å°±ä¼šè¢«æ˜¾ç¤ºåœ¨é¦–é¡µä¸Šã€‚å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2022/5/16 20:46:25</span><br><span class="line">excerpt: è¿™æ˜¯æ‘˜è¦...</span><br><span class="line">---</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­</strong></p><p>åœ¨æ–‡ç« ä¸­éœ€è¦æˆªæ–­çš„åœ°æ–¹åŠ å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¦–é¡µå°±ä¼šæ˜¾ç¤ºè¿™æ¡æŒ‡ä»¤ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œéšè—æ¥ä¸‹æ¥çš„æ‰€æœ‰å†…å®¹ã€‚</p><p><strong>ä»¥ä¸Šå°±æ˜¯åœ¨ Hexo åšå®¢ä¸­åˆ›å»ºæ–‡ç« ï¼Œä»¥åŠå¯¹æ–‡ç« åˆ†ç±»ã€æ ‡ç­¾å’Œæ‘˜è¦çš„é…ç½®ã€‚</strong></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
